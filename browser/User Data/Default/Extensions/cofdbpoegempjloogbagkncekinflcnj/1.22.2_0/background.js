var background=function(e){"use strict";function t(){let e=new Uint32Array(1);return crypto.getRandomValues(e),e[0]}function n(){return crypto.randomUUID()}function r(){const e=new Uint32Array(28);return crypto.getRandomValues(e),Array.from(e,(e=>("0"+e.toString(16)).slice(-2))).join("")}function o(e){try{return JSON.parse(atob(e.split(".")[1]))}catch(e){return null}}const s=[{langCode:"DE",langCodeForSpeech:"de-DE",supportsFormality:!0},{langCode:"EN-GB",langCodeForSpeech:"en",voice:"Google UK English Male"},{langCode:"EN-US",langCodeForSpeech:"en",voice:"Google UK English Male"},{langCode:"FR",langCodeForSpeech:"fr-FR",voice:"Thomas",supportsFormality:!0},{langCode:"ES",langCodeForSpeech:"es-ES",voice:"Google espaÃ±ol",label:"ES",supportsFormality:!0},{langCode:"IT",langCodeForSpeech:"it-IT",supportsFormality:!0},{langCode:"ID",langCodeForSpeech:"id-ID"},{langCode:"PL",langCodeForSpeech:"pl-PL",supportsFormality:!0},{langCode:"NL",langCodeForSpeech:"nl-NL",voice:"Google Nederlands",label:"NL",supportsFormality:!0},{langCode:"AR",langCodeForSpeech:"ar-AR"},{langCode:"BG",langCodeForSpeech:"bg-BG"},{langCode:"CS",langCodeForSpeech:"cs-CZ"},{langCode:"DA",langCodeForSpeech:"da-DK"},{langCode:"EL",langCodeForSpeech:"el-GR"},{langCode:"ET",langCodeForSpeech:"et"},{langCode:"FI",langCodeForSpeech:"fi-FI",voice:"Satu"},{langCode:"HU",langCodeForSpeech:"hu-HU"},{langCode:"JA",langCodeForSpeech:"ja-JP",supportsFormality:!0},{langCode:"KO",langCodeForSpeech:"ko-KR"},{langCode:"LT",langCodeForSpeech:"lt"},{langCode:"LV",langCodeForSpeech:"lv"},{langCode:"NB",langCodeForSpeech:"nb-NO"},{langCode:"PT-BR",langCodeForSpeech:"pt-PT",supportsFormality:!0},{langCode:"PT-PT",langCodeForSpeech:"pt-PT",supportsFormality:!0},{langCode:"RO",langCodeForSpeech:"ro-RO"},{langCode:"RU",langCodeForSpeech:"ru-RU",supportsFormality:!0},{langCode:"SK",langCodeForSpeech:"sk-SK"},{langCode:"SL",langCodeForSpeech:"sl"},{langCode:"SV",langCodeForSpeech:"sv-SE"},{langCode:"TR",langCodeForSpeech:"tr-TR"},{langCode:"UK",langCodeForSpeech:"uk-UA"},{langCode:"ZH",langCodeForSpeech:"zh-CN"},{langCode:"ZH-HANT",langCodeForSpeech:"zh-HANT"}],a=["EN-GB","EN-US","EN","DE","FR","ES"],i=["ES","FR"],c=0,l={inline:"inline",automatic:"automatic",manual:"manual",input:"input",input_alternatives:"input_alternatives"},u={notLoggedIn:1,loggedInPro:2,loggedInFree:3},d={notLoggedIn:1500,loggedInFree:5e3},p={notLoggedIn:2e3,loggedInFree:2e3},h={defaultPopup:1,fptInjectedPopup:2,inlineTooltipPopup:3},f={extensionIcon:1,fptAutoInject:2},g={defaultPopup:1,injectedFptPopup:2,inlinePopup:3},m={hintKeyboardShortcut:"HINT_KEYBOARD_SHORTCUT",inputTranslation:"INPUT_TRANSLATION",inlineTranslation:"INLINE_TRANSLATION",fullPageTranslation:"FULL_PAGE_TRANSLATION",accountSuccessfullyCreated:"ACCOUNT_SUCCESSFULLY_CREATED",successfullyLoggedIn:"SUCCESSFULLY_LOGGED_IN"},y={inlineTranslationTriggerIcon:"INLINE_TRANSLATION_TRIGGER_ICON",inlineTranslationSettingsIcon:"INLINE_TRANSLATION_SETTINGS_ICON",inlineTranslationSettingPopup:"INLINE_TRANSLATION_SETTING_POPUP",inputTranslationTriggerIcon:"INPUT_TRANSLATION_TRIGGER_ICON",inputImproveTriggerIcon:"INPUT_IMPROVE_TRIGGER_ICON",inputTranslationSettingsIcon:"INPUT_TRANSLATION_SETTINGS_ICON",inputTranslationSettingPopup:"INPUT_TRANSLATION_SETTING_POPUP",settingsPageFPT:"SETTINGS_PAGE_FPT",settingsPageReading:"SETTINGS_PAGE_READING",settingsPageWriting:"SETTINGS_PAGE_WRITING",settingsPageIntegrations:"SETTINGS_PAGE_INTEGRATIONS",fptHideModal:"FPT_HIDE_MODAL",inputTranslationReadMoreLink:"INPUT_TRANSLATION_READ_MORE_LINK",inlineTranslationReadMoreLink:"INLINE_TRANSLATION_READ_MORE_LINK",fptTranslationReadMoreLink:"FPT_TRANSLATION_READ_MORE_LINK",extensionHubToggleSwitch:"EXTENSION_HUB_TOGGLE_SWITCH",hubCustomizeShortcut:"HUB_CUSTOMIZE_SHORTCUT",hubLoginButton:"HUB_LOGIN_BUTTON",hubUpgradeToProLink:"HUB_UPGRADE_TO_PRO_LINK",hubTryProLink:"HUB_TRY_PRO_LINK",hubTryWriteProLink:"HUB_TRY_WRITE_PRO_LINK",settingsPageCustomizeShortcutButton:"SETTINGS_PAGE_CUSTOMIZE_SHORTCUT_BUTTON",hubFPTEnableCheckbox:"HUB_FPT_ENABLE_CHECKBOX",hubFPTDisableCheckbox:"HUB_FPT_DISABLE_CHECKBOX",deeplWriteIcon:"DEEPL_WRITE_ICON",gmailOnboardingPopup:"gmailOnboardingPopup",gmailOnboardingIcon:"gmailOnboardingIcon",gmailCharLimitLogin:"gmailCharLimitLogin",gmailFeedbackSurvey:"gmailFeedbackSurvey",hubViewIntegrations:"HUB_VIEW_INTEGRATIONS",hubCloseCustomizationsWidget:"HUB_CLOSE_CUSTOMIZATIONS_WIDGET",gslidesFeedbackSurvey:"GSLIDES_FEEDBACK_SURVEY",gslidesCharLimitLogin:"GSLIDES_CHAR_LIMIT_LOGIN",zendeskTryProLink:"ZENDESK_TRY_PRO_LINK",onboardingSignUp:"ONBOARDING_SIGN_UP",onboardingSkipSignUp:"ONBOARDING_SKIP_SIGN_UP",onboardingLoginLink:"ONBOARDING_LOGIN_LINK",onboardingSeeAllIntegrations:"ONBOARDING_SEE_ALL_INTEGRATIONS",iconToggleInHubTranslator:"ICON_TOGGLE_IN_HUB_TRANSLATOR",iconToggleInHubWrite:"ICON_TOGGLE_IN_HUB_WRITE",manageIconSettings:"MANAGE_ICON_SETTINGS",writeLanguageSwitchedInHub:"WRITE_LANGUAGE_SWITCHED_IN_HUB",writeLanguageSwitchedInSettings:"WRITE_LANGUAGE_SWITCHED_IN_SETTINGS"},_={triggerTranslation:"trigger-translation",changeLanguage:"change-language"},v={clickOnShortcutNotifiction:"CLICK_ON_SHORTCUT_NOTIFICATION",clickOnInlineTranslationShowAlternatives:"CLICK_ON_INLINE_TRANSLATION_SHOW_ALTERNATIVES",clickOnInlineTranslationCloseIcon:"CLICK_ON_INLINE_TRANSLATION_CLOSE_ICON",clickOnLogoutMenuEntry:"CLICK_ON_LOGOUT_MENU_ENTRY"},b={disablePerSite:"DISABLE_PER_SITE",disableEverywhere:"DISABLE_EVERYWHERE",enableEverywhere:"ENABLE_EVERYWHERE",enablePerSite:"ENABLE_PER_SITE"},S={inputTranslation:"INPUT_TRANSLATION",inlineTranslation:"INLINE_TRANSLATION",fullPageTranslation:"FULL_PAGE_TRANSLATION",gdocs:"GDOCS"},T={top:1,right:2,bottom:3,left:4},E={openPage:"OPEN_PAGE",backButton:"BACK_BUTTON",nextButton:"NEXT_BUTTON",navigation:"NAVIGATION"},w={unspecified:0,chrome:1,edge:2,local:3,firefox:4},I={chrome:"cofdbpoegempjloogbagkncekinflcnj",edge:"fancfknaplihpclbhbpclnmmjcjanbaf",local:"ocpdpnakdghopjcifldjidbdmfobmmoi",firefox:"firefox-extension@deepl.com"},k={deepl:1,linguee:2,google_translate:3,word_365:4,power_point_365:5,jira:6,confluence:7,gmail:8},C=5,R={default:"DEFAULT",gdocs:"GDOCS",zendesk:"ZENDESK",whatsappWeb:"WHATSAPP_WEB",twitter:"TWITTER",gmail:"GMAIL",gslides:"GSLIDES",linkedIn:"LINKEDIN"},x={translate:"translate",write:"write"},A={user:"USER",extension:"EXTENSION"},L={OPEN_TICKET:"OPEN_TICKET",DETECT_TICKET_LANGUAGE:"DETECT_TICKET_LANGUAGE",SWITCH_TICKET_LANGUAGE:"SWITCH_TICKET_LANGUAGE",ENABLE_AUTOTRANSLATE:"ENABLE_AUTOTRANSLATE",DISABLE_AUTOTRANSLATE:"DISABLE_AUTOTRANSLATE",TRANSLATE_MESSAGE:"TRANSLATE_MESSAGE",TRANSLATE_INPUT:"TRANSLATE_INPUT",ERROR:"ERROR"},O={translation:"TRANSLATION",login:"LOGIN"},N={chat:"CHAT",message:"MESSAGE"},D={TRANSLATOR:"TRANSLATOR",WRITE:"WRITE",API:"API",DOC_TRANSLATOR:"DOC_TRANSLATOR"},P={free:"free",pro:"pro",none:"none"},M={TEXT_REFINEMENT_REQUEST:"TEXT_REFINEMENT_REQUEST",GDOCS_INSERT_COPY:"GDOCS_INSERT_COPY",GDOCS_DISCARD_COPY:"GDOCS_DISCARD_COPY",GDOCS_CHAR_LIMIT_REACHED:"GDOCS_CHAR_LIMIT_REACHED",RESULT_ACCEPTED:"RESULT_ACCEPTED",RESULT_REVERTED:"RESULT_REVERTED",GET_ALTERNATIVES_FOR_INPUT:"GET_ALTERNATIVES_FOR_INPUT",ERROR:"ERROR"},F={RESULT_ACCEPTED:"RESULT_ACCEPTED",RESULT_REVERTED:"RESULT_REVERTED",ERROR:"ERROR"},U={ALTERNATIVES_OPENED:"ALTERNATIVES_OPENED",SEGMENTATION_SELECTED:"SEGMENTATION_SELECTED",ALTERNATIVE_SELECTED:"ALTERNATIVE_SELECTED"},j={READING_VIEW_TRANSLATE:"READING_VIEW_TRANSLATE",COMPOSE_VIEW_TRANSLATE:"COMPOSE_VIEW_TRANSLATE",COMPOSE_VIEW_IMPROVE:"COMPOSE_VIEW_IMPROVE"},B={ANONYMOUS_USER_LIMIT_EXCEEDED:"ANONYMOUS_USER_LIMIT_EXCEEDED",FREE_ACCOUNT_LIMIT_EXCEEDED:"FREE_ACCOUNT_LIMIT_EXCEEDED",WRITE_ANONYMOUS_USER_LIMIT_EXCEEDED:"WRITE_ANONYMOUS_USER_LIMIT_EXCEEDED",WRITE_FREE_ACCOUNT_LIMIT_EXCEEDED:"WRITE_FREE_ACCOUNT_LIMIT_EXCEEDED"},$={PRO_TRIAL:"PRO_TRIAL",LOGIN:"LOGIN",SIGNUP:"SIGNUP"},G={WORD:"word",SENTENCE:"sentence"},W={none:"None",pro:"Pro",free:"Free"},q={simple:"simple",business:"business",academic:"academic",casual:"casual",enthusiastic:"enthusiastic",friendly:"friendly",confident:"confident",diplomatic:"diplomatic"},H={chrome:"Chrome",edge:"Edge",brave:"Brave",firefox:"Firefox",opera:"Opera",safari:"Safari"};function V(e,t){let n;try{switch(e){case H.chrome:case H.brave:n=t.split("Chrome/")[1].split(" ")[0];break;case H.edge:n=t.split("Edg/")[1].split(" ")[0];break;case H.firefox:n=t.split("Firefox/")[1].split(" ")[0];break;case H.opera:n=t.split("OPR/")[1].split(" ")[0];break;case H.safari:n=t.split("Version/")[1].split(" ")[0]}}catch(t){console.error(`Could not get the browsers (${e}) version from user agent`,t)}try{!n&&navigator?.userAgentData&&function(e){return e===H.chrome||e===H.edge||e===H.brave||e===H.opera}(e)&&(n=z(e).version)}catch(t){console.error(`Could not get the chromium browsers (${e}) version`,t)}return n&&"string"==typeof n?n:"unknown_browser_version"}function z(e){if(!navigator.userAgentData||!e)return;const t=new RegExp(`${e}`,"i");return navigator.userAgentData.brands.filter((e=>t.test(e.brand)))[0]}function Y(){const e=navigator?.userAgent||"unknown_user_agent",t=navigator?.userAgentData?.platform||navigator?.platform||"unknown_platform";let n="unknown_browser",r="unknown_browser_version";const o=navigator?.language||"unknown_browser_language";try{const t=e.match(/chrome|chromium|crios/i),o=e.match(/edg/i)||z(H.edge),s=e.match(/firefox|fxios/i),a=e.match(/opr\//i)||z(H.opera),i=e.match(/safari/i),c=z(H.brave);t?(n=H.chrome,o&&(n=H.edge),a&&(n=H.opera),c&&(n=H.brave)):o?n=H.edge:s?n=H.firefox:a?n=H.opera:i&&(n=H.safari),r=V(n,e)}catch(e){console.error("Could not get the name of the brower",e)}return{userAgent:e,platform:t,browser:n,browserVersion:r,browserLang:o}}function K(){if({IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.22.2",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.22.2",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.22.2",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.22.2",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.22.2",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.22.2",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.22.2",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.22.2",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.22.2",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.typeform.com/to/MkMfP2Y6",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://s.deepl.com/chrome/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ"},APP_VERSION:"1.22.2",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,SHOW_CUSTOMER_SEGMENTATION_SURVEY:!1,ARABIC_SURVEY:!0}}.browserBuild)return{IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.22.2",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.22.2",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.22.2",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.22.2",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.22.2",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.22.2",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.22.2",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.22.2",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.22.2",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.typeform.com/to/MkMfP2Y6",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://s.deepl.com/chrome/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ"},APP_VERSION:"1.22.2",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,SHOW_CUSTOMER_SEGMENTATION_SURVEY:!1,ARABIC_SURVEY:!0}}.browserBuild.toLowerCase()===H.firefox.toLowerCase();const e=chrome.runtime.getURL("");return Y().browser===H.firefox||/moz-extension:\/\//gm.test(e)}const X={share_feedback_survey:"DOCS_GOOGLE_COM_FEEDBACK_FORM",new_share_feedback_survey:"NEW_FEEDBACK_FORM",try_DeepL_Pro:"DEEPL_COM_PRO",try_DeepL_Pro_Write:"DEEPL_COM_PRO_WRITE",show_more_translation:"DEEPL_COM_TRANSLATOR",deepl_translator_home:"DEEPL_COM_HOMEPAGE",deepl_write_home:"DEEPL_COM_WRITE",deepl_terms_of_service_free:"DEEPL_COM_TERMS_OF_SERVICE_FREE",deepl_create_account:"DEEPL_CREATE_ACCOUNT",deepl_translator_docs:"DEEPL_COM_DOCTRANS",shortcut_settings:"SHORTCUT_SETTINGS",support_article:"SUPPORT_ARTICLE",chrome_write_a_review:"CHROME_WRITE_A_REVIEW",edge_write_a_review:"EDGE_WRITE_A_REVIEW",gmail_feedback_survey:"GMAIL_FEEDBACK_SURVEY",gslides_feedback_survey:"GSLIDES_FEEDBACK_SURVEY",firefox_write_a_review:"FIREFOX_WRITE_A_REVIEW",external:{whatsapp:"EXTERNAL_WHATSAPP",twitter:"EXTERNAL_TWITTER",youtube:"EXTERNAL_YOUTUBE",facebook:"EXTERNAL_FACEBOOK",github:"EXTERNAL_GITHUB",discord:"EXTERNAL_DISCORD",telegram:"EXTERNAL_TELEGRAM",reddit:"EXTERNAL_REDDIT",gmail:"EXTERNAL_GMAIL",gdocs:"EXTERNAL_GDOCS",gslides:"EXTERNAL_GSLIDES",linkedIn:"EXTERNAL_LINKEDIN",msOffice:"EXTERNAL_MS_OFFICE"},deepl_support:"DEEPL_SUPPORT",firefox_feedback_survey:"FIREFOX_FEEDBACK_SURVEY",firefox_shortcut_docs:"FIREFOX_SHORTCUT_DOCS",customer_segmentation_survey_free:"CUSTOMER_SEGMENTATION_SURVEY_FREE",customer_segmentation_survey_pro:"CUSTOMER_SEGMENTATION_SURVEY_PRO",arabic_survey:"ARABIC_SURVEY"},J={DOCS_GOOGLE_COM_FEEDBACK_FORM:"https://deepl.typeform.com/to/MkMfP2Y6",NEW_FEEDBACK_FORM:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",DEEPL_COM_PRO:"https://www.deepl.com/pro",DEEPL_COM_PRO_WRITE:"https://www.deepl.com/pro-write",DEEPL_COM_TRANSLATOR:"https://www.deepl.com/translator",DEEPL_COM_WRITE:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.22.2",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.22.2",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.22.2",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.22.2",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.22.2",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.22.2",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.22.2",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.22.2",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.22.2",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.typeform.com/to/MkMfP2Y6",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://s.deepl.com/chrome/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ"}.deeplWrite,DEEPL_COM_DOCTRANS:"https://www.deepl.com/translator/files",DEEPL_COM_TERMS_OF_SERVICE_FREE:"https://www.deepl.com/en/pro-license?tab=free",DEEPL_CREATE_ACCOUNT:"https://www.deepl.com/signup",SHORTCUT_SETTINGS:"chrome://extensions/shortcuts",SUPPORT_ARTICLE:"https://support.deepl.com/hc/articles/4407580229522",CHROME_WEBSTORE:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",FIREFOX_WEBSTORE:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",EDGE_WEBSTORE:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",GMAIL_FEEDBACK_SURVEY:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",GSLIDES_FEEDBACK_SURVEY:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",EXTERNAL:{WHATSAPP:"https://web.whatsapp.com",TWITTER:"https://www.twitter.com",YOUTUBE:"https://www.youtube.com",FACEBOOK:"https://www.facebook.com",GITHUB:"https://www.github.com",DISCORD:"https://www.discord.com",TELEGRAM:"https://web.telegram.org",REDDIT:"https://www.reddit.com",GMAIL:"https://www.gmail.com",GDOCS:"https://docs.google.com",GSLIDES:"https://slides.google.com",LINKEDIN:"https://www.linkedin.com/",MSOFFICE:"https://www.office.com/"},DEEPL_SUPPORT:"https://support.deepl.com/hc",FIREFOX_FEEDBACK:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",FIREFOX_SHORTCUT_DOCS:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",CUSTOMER_SEGMENTATION_SURVEY_FREE:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",CUSTOMER_SEGMENTATION_SURVEY_PRO:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",ARABIC_SURVEY:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ"};function Z(e){const{destination:t,...n}=e;if(void 0!==t)switch(t){case X.share_feedback_survey:return J.DOCS_GOOGLE_COM_FEEDBACK_FORM;case X.new_share_feedback_survey:return J.NEW_FEEDBACK_FORM;case X.try_DeepL_Pro:return n?.utmContent?ee(J.DEEPL_COM_PRO,[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",n?.utmContent]]):J.DEEPL_COM_PRO;case X.try_DeepL_Pro_Write:return n?.utmContent?ee(J.DEEPL_COM_PRO_WRITE,[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",n?.utmContent]]):J.DEEPL_COM_PRO_WRITE;case X.show_more_translation:return n?function({sourceLang:e,targetLang:t,textToShare:n}){if(!e||!t||!n)return"";const r=new URL(J.DEEPL_COM_TRANSLATOR);let o=`${e.toLowerCase()}/${t.toLowerCase()}/${encodeURIComponent(n)}`;return r.hash=o,r.href}(n):void console.error("Invalid action.");case X.deepl_translator_home:return n?.utmContent?ee(J.DEEPL_COM_TRANSLATOR,[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",n?.utmContent]]):J.DEEPL_COM_TRANSLATOR;case X.deepl_write_home:return n?.utmContent?ee(J.DEEPL_COM_WRITE,[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",n?.utmContent]]):J.DEEPL_COM_WRITE;case X.deepl_translator_docs:return n?.utmContent?ee(J.DEEPL_COM_DOCTRANS,[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",n?.utmContent]]):J.DEEPL_COM_DOCTRANS;case X.deepl_terms_of_service_free:return J.DEEPL_COM_TERMS_OF_SERVICE_FREE;case X.shortcut_settings:return J.SHORTCUT_SETTINGS;case X.support_article:return J.SUPPORT_ARTICLE;case X.external.whatsapp:return J.EXTERNAL.WHATSAPP;case X.external.twitter:return J.EXTERNAL.TWITTER;case X.external.youtube:return J.EXTERNAL.YOUTUBE;case X.external.facebook:return J.EXTERNAL.FACEBOOK;case X.external.github:return J.EXTERNAL.GITHUB;case X.external.discord:return J.EXTERNAL.DISCORD;case X.external.telegram:return J.EXTERNAL.TELEGRAM;case X.external.reddit:return J.EXTERNAL.REDDIT;case X.external.gmail:return J.EXTERNAL.GMAIL;case X.external.gdocs:return J.EXTERNAL.GDOCS;case X.external.gslides:return J.EXTERNAL.GSLIDES;case X.external.linkedIn:return J.EXTERNAL.LINKEDIN;case X.external.msOffice:return J.EXTERNAL.MSOFFICE;case X.deepl_support:return J.DEEPL_SUPPORT;case X.chrome_write_a_review:return J.CHROME_WEBSTORE;case X.edge_write_a_review:return J.EDGE_WEBSTORE;case X.gmail_feedback_survey:return J.GMAIL_FEEDBACK_SURVEY;case X.gslides_feedback_survey:return J.GSLIDES_FEEDBACK_SURVEY;case X.firefox_write_a_review:return J.FIREFOX_WEBSTORE;case X.firefox_feedback_survey:return J.FIREFOX_FEEDBACK;case X.firefox_shortcut_docs:return J.FIREFOX_SHORTCUT_DOCS;case X.deepl_create_account:if(n){let e=[];if(n.utmContent){e=[...[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",n.utmContent]]]}if(n.redirectToOnboarding&&!K()){const t=`${chrome.runtime.getURL("")}onboarding.html`;e.push(["redirectUri",t])}return ee(J.DEEPL_CREATE_ACCOUNT,e)}return J.DEEPL_CREATE_ACCOUNT;case X.customer_segmentation_survey_free:return J.CUSTOMER_SEGMENTATION_SURVEY_FREE;case X.customer_segmentation_survey_pro:return J.CUSTOMER_SEGMENTATION_SURVEY_PRO;case X.arabic_survey:return J.ARABIC_SURVEY;default:return}}function Q(e){const t=Z(e),{openInSameTab:n}=e;if(!t)return;const r=new URL(t).href;n?chrome.tabs.query({active:!0,currentWindow:!0},(function(e){const t=e[0];chrome.tabs.update(t.id,{url:r})})):chrome.tabs.create({url:r,active:!0})}function ee(e,t){if(0===t.length||!e)return;const n=new URL(e);return t.forEach((e=>{2===e.length&&n.searchParams.append(e[0],e[1])})),n.href}const te=Object.prototype.toString;function ne(e){switch(te.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return fe(e,Error)}}function re(e,t){return te.call(e)===`[object ${t}]`}function oe(e){return re(e,"ErrorEvent")}function se(e){return re(e,"DOMError")}function ae(e){return re(e,"String")}function ie(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function ce(e){return null===e||ie(e)||"object"!=typeof e&&"function"!=typeof e}function le(e){return re(e,"Object")}function ue(e){return"undefined"!=typeof Event&&fe(e,Event)}function de(e){return re(e,"RegExp")}function pe(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function he(e){return"number"==typeof e&&e!=e}function fe(e,t){try{return e instanceof t}catch(e){return!1}}function ge(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}function me(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function ye(e,t){let n=e;const r=n.length;if(r<=150)return n;t>r&&(t=r);let o=Math.max(t-60,0);o<5&&(o=0);let s=Math.min(o+140,r);return s>r-5&&(s=r),s===r&&(o=Math.max(s-140,0)),n=n.slice(o,s),o>0&&(n=`'{snip} ${n}`),s<r&&(n+=" {snip}"),n}function _e(e,t){if(!Array.isArray(e))return"";const n=[];for(let t=0;t<e.length;t++){const r=e[t];try{ge(r)?n.push("[VueViewModel]"):n.push(String(r))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)}function ve(e,t=[],n=!1){return t.some((t=>function(e,t,n=!1){return!!ae(e)&&(de(t)?t.test(e):!!ae(t)&&(n?e===t:e.includes(t)))}(e,t,n)))}function be(e,t,n=250,r,o,s,a){if(!(s.exception&&s.exception.values&&a&&fe(a.originalException,Error)))return;const i=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;var c,l;i&&(s.exception.values=(c=Se(e,t,o,a.originalException,r,s.exception.values,i,0),l=n,c.map((e=>(e.value&&(e.value=me(e.value,l)),e)))))}function Se(e,t,n,r,o,s,a,i){if(s.length>=n+1)return s;let c=[...s];if(fe(r[o],Error)){Te(a,i);const s=e(t,r[o]),l=c.length;Ee(s,o,l,i),c=Se(e,t,n,r[o],o,[s,...c],s,l)}return Array.isArray(r.errors)&&r.errors.forEach(((r,s)=>{if(fe(r,Error)){Te(a,i);const l=e(t,r),u=c.length;Ee(l,`errors[${s}]`,u,i),c=Se(e,t,n,r,o,[l,...c],l,u)}})),c}function Te(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,..."AggregateError"===e.type&&{is_exception_group:!0},exception_id:t}}function Ee(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}function we(e){return e&&e.Math==Math?e:void 0}const Ie="object"==typeof globalThis&&we(globalThis)||"object"==typeof window&&we(window)||"object"==typeof self&&we(self)||"object"==typeof global&&we(global)||function(){return this}()||{};function ke(){return Ie}function Ce(e,t,n){const r=n||Ie,o=r.__SENTRY__=r.__SENTRY__||{};return o[e]||(o[e]=t())}const Re=ke(),xe=80;function Ae(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,o=[];let s=0,a=0;const i=" > ",c=i.length;let l;const u=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||xe;for(;n&&s++<r&&(l=Le(n,u),!("html"===l||s>1&&a+o.length*c+l.length>=d));)o.push(l),a+=l.length,n=n.parentNode;return o.reverse().join(i)}catch(e){return"<unknown>"}}function Le(e,t){const n=e,r=[];let o,s,a,i,c;if(!n||!n.tagName)return"";if(Re.HTMLElement&&n instanceof HTMLElement&&n.dataset&&n.dataset.sentryComponent)return n.dataset.sentryComponent;r.push(n.tagName.toLowerCase());const l=t&&t.length?t.filter((e=>n.getAttribute(e))).map((e=>[e,n.getAttribute(e)])):null;if(l&&l.length)l.forEach((e=>{r.push(`[${e[0]}="${e[1]}"]`)}));else if(n.id&&r.push(`#${n.id}`),o=n.className,o&&ae(o))for(s=o.split(/\s+/),c=0;c<s.length;c++)r.push(`.${s[c]}`);const u=["aria-label","type","name","title","alt"];for(c=0;c<u.length;c++)a=u[c],i=n.getAttribute(a),i&&r.push(`[${a}="${i}"]`);return r.join("")}function Oe(){try{return Re.document.location.href}catch(e){return""}}function Ne(e){return Re.document&&Re.document.querySelector?Re.document.querySelector(e):null}function De(e){if(!Re.HTMLElement)return null;let t=e;for(let e=0;e<5;e++){if(!t)return null;if(t instanceof HTMLElement&&t.dataset.sentryComponent)return t.dataset.sentryComponent;t=t.parentNode}return null}const Pe="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Me=["debug","info","warn","error","log","assert","trace"],Fe={};function Ue(e){if(!("console"in Ie))return e();const t=Ie.console,n={},r=Object.keys(Fe);r.forEach((e=>{const r=Fe[e];n[e]=t[e],t[e]=r}));try{return e()}finally{r.forEach((e=>{t[e]=n[e]}))}}const je=function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return Pe?Me.forEach((n=>{t[n]=(...t)=>{e&&Ue((()=>{Ie.console[n](`Sentry Logger [${n}]:`,...t)}))}})):Me.forEach((e=>{t[e]=()=>{}})),t}(),Be=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function $e(e,t=!1){const{host:n,path:r,pass:o,port:s,projectId:a,protocol:i,publicKey:c}=e;return`${i}://${c}${t&&o?`:${o}`:""}@${n}${s?`:${s}`:""}/${r?`${r}/`:r}${a}`}function Ge(e){const t=Be.exec(e);if(!t)return void Ue((()=>{console.error(`Invalid Sentry Dsn: ${e}`)}));const[n,r,o="",s,a="",i]=t.slice(1);let c="",l=i;const u=l.split("/");if(u.length>1&&(c=u.slice(0,-1).join("/"),l=u.pop()),l){const e=l.match(/^\d+/);e&&(l=e[0])}return We({host:s,pass:o,path:c,projectId:l,port:a,protocol:n,publicKey:r})}function We(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function qe(e){const t="string"==typeof e?Ge(e):We(e);if(t&&function(e){if(!Pe)return!0;const{port:t,projectId:n,protocol:r}=e;return!(["protocol","publicKey","host","projectId"].find((t=>!e[t]&&(je.error(`Invalid Sentry Dsn: ${t} missing`),!0)))||(n.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(r)?t&&isNaN(parseInt(t,10))&&(je.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(je.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),1):(je.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))}(t))return t}class He extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}function Ve(e,t,n){if(!(t in e))return;const r=e[t],o=n(r);"function"==typeof o&&Ye(o,r),e[t]=o}function ze(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch(n){Pe&&je.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function Ye(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,ze(e,"__sentry_original__",t)}catch(e){}}function Ke(e){return e.__sentry_original__}function Xe(e){if(ne(e))return{message:e.message,name:e.name,stack:e.stack,...Ze(e)};if(ue(e)){const t={type:e.type,target:Je(e.target),currentTarget:Je(e.currentTarget),...Ze(e)};return"undefined"!=typeof CustomEvent&&fe(e,CustomEvent)&&(t.detail=e.detail),t}return e}function Je(e){try{return t=e,"undefined"!=typeof Element&&fe(t,Element)?Ae(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}var t}function Ze(e){if("object"==typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function Qe(e){return et(e,new Map)}function et(e,t){if(function(e){if(!le(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||"Object"===t}catch(e){return!0}}(e)){const n=t.get(e);if(void 0!==n)return n;const r={};t.set(e,r);for(const n of Object.keys(e))void 0!==e[n]&&(r[n]=et(e[n],t));return r}if(Array.isArray(e)){const n=t.get(e);if(void 0!==n)return n;const r=[];return t.set(e,r),e.forEach((e=>{r.push(et(e,t))})),r}return e}const tt=50,nt=/\(error: (.*)\)/,rt=/captureMessage|captureException/;function ot(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,n=0)=>{const r=[],o=e.split("\n");for(let e=n;e<o.length;e++){const n=o[e];if(n.length>1024)continue;const s=nt.test(n)?n.replace(nt,"$1"):n;if(!s.match(/\S*Error: /)){for(const e of t){const t=e(s);if(t){r.push(t);break}}if(r.length>=tt)break}}return function(e){if(!e.length)return[];const t=Array.from(e);/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop();t.reverse(),rt.test(t[t.length-1].function||"")&&(t.pop(),rt.test(t[t.length-1].function||"")&&t.pop());return t.slice(0,tt).map((e=>({...e,filename:e.filename||t[t.length-1].filename,function:e.function||"?"})))}(r)}}const st="<anonymous>";function at(e){try{return e&&"function"==typeof e&&e.name||st}catch(e){return st}}const it={},ct={};function lt(e,t){it[e]=it[e]||[],it[e].push(t)}function ut(e,t){ct[e]||(t(),ct[e]=!0)}function dt(e,t){const n=e&&it[e];if(n)for(const r of n)try{r(t)}catch(t){Pe&&je.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${at(r)}\nError:`,t)}}function pt(e){const t="console";lt(t,e),ut(t,ht)}function ht(){"console"in Ie&&Me.forEach((function(e){e in Ie.console&&Ve(Ie.console,e,(function(t){return Fe[e]=t,function(...t){dt("console",{args:t,level:e});const n=Fe[e];n&&n.apply(Ie.console,t)}}))}))}function ft(){const e=Ie,t=e.crypto||e.msCrypto;let n=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]})}catch(e){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&n())>>e/4).toString(16)))}function gt(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function mt(e){const{message:t,event_id:n}=e;if(t)return t;const r=gt(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function yt(e,t,n){const r=e.exception=e.exception||{},o=r.values=r.values||[],s=o[0]=o[0]||{};s.value||(s.value=t||""),s.type||(s.type=n||"Error")}function _t(e,t){const n=gt(e);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...t},t&&"data"in t){const e={...r&&r.data,...t.data};n.mechanism.data=e}}function vt(e){if(e&&e.__sentry_captured__)return!0;try{ze(e,"__sentry_captured__",!0)}catch(e){}return!1}function bt(e){return Array.isArray(e)?e:[e]}const St=Ie,Tt=1e3;let Et,wt,It;function kt(e){lt("dom",e),ut("dom",Ct)}function Ct(){if(!St.document)return;const e=dt.bind(null,"dom"),t=Rt(e,!0);St.document.addEventListener("click",t,!1),St.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const n=St[t]&&St[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(Ve(n,"addEventListener",(function(t){return function(n,r,o){if("click"===n||"keypress"==n)try{const r=this,s=r.__sentry_instrumentation_handlers__=r.__sentry_instrumentation_handlers__||{},a=s[n]=s[n]||{refCount:0};if(!a.handler){const r=Rt(e);a.handler=r,t.call(this,n,r,o)}a.refCount++}catch(e){}return t.call(this,n,r,o)}})),Ve(n,"removeEventListener",(function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{const n=this,o=n.__sentry_instrumentation_handlers__||{},s=o[t];s&&(s.refCount--,s.refCount<=0&&(e.call(this,t,s.handler,r),s.handler=void 0,delete o[t]),0===Object.keys(o).length&&delete n.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,r)}})))}))}function Rt(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=function(e){try{return e.target}catch(e){return null}}(n);if(function(e,t){return"keypress"===e&&(!t||!t.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}(n.type,r))return;ze(n,"_sentryCaptured",!0),r&&!r._sentryId&&ze(r,"_sentryId",ft());const o="keypress"===n.type?"input":n.type;if(!function(e){if(e.type!==wt)return!1;try{if(!e.target||e.target._sentryId!==It)return!1}catch(e){}return!0}(n)){e({event:n,name:o,global:t}),wt=n.type,It=r?r._sentryId:void 0}clearTimeout(Et),Et=St.setTimeout((()=>{It=void 0,wt=void 0}),Tt)}}const xt=ke();function At(){if(!("fetch"in xt))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}function Lt(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Ot(){if("string"==typeof EdgeRuntime)return!0;if(!At())return!1;if(Lt(xt.fetch))return!0;let e=!1;const t=xt.document;if(t&&"function"==typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=Lt(n.contentWindow.fetch)),t.head.removeChild(n)}catch(e){Pe&&je.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e}function Nt(e){const t="fetch";lt(t,e),ut(t,Dt)}function Dt(){Ot()&&Ve(Ie,"fetch",(function(e){return function(...t){const{method:n,url:r}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,n]=e;return{url:Mt(t),method:Pt(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:Mt(t),method:Pt(t,"method")?String(t.method).toUpperCase():"GET"}}(t),o={args:t,fetchData:{method:n,url:r},startTimestamp:Date.now()};return dt("fetch",{...o}),e.apply(Ie,t).then((e=>(dt("fetch",{...o,endTimestamp:Date.now(),response:e}),e)),(e=>{throw dt("fetch",{...o,endTimestamp:Date.now(),error:e}),e}))}}))}function Pt(e,t){return!!e&&"object"==typeof e&&!!e[t]}function Mt(e){return"string"==typeof e?e:e?Pt(e,"url")?e.url:e.toString?e.toString():"":""}let Ft=null;function Ut(e){const t="error";lt(t,e),ut(t,jt)}function jt(){Ft=Ie.onerror,Ie.onerror=function(e,t,n,r,o){return dt("error",{column:r,error:o,line:n,msg:e,url:t}),!(!Ft||Ft.__SENTRY_LOADER__)&&Ft.apply(this,arguments)},Ie.onerror.__SENTRY_INSTRUMENTED__=!0}let Bt=null;function $t(e){const t="unhandledrejection";lt(t,e),ut(t,Gt)}function Gt(){Bt=Ie.onunhandledrejection,Ie.onunhandledrejection=function(e){return dt("unhandledrejection",e),!(Bt&&!Bt.__SENTRY_LOADER__)||Bt.apply(this,arguments)},Ie.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const Wt=ke();const qt=Ie;let Ht;function Vt(e){const t="history";lt(t,e),ut(t,zt)}function zt(){if(!function(){const e=Wt.chrome,t=e&&e.app&&e.app.runtime,n="history"in Wt&&!!Wt.history.pushState&&!!Wt.history.replaceState;return!t&&n}())return;const e=qt.onpopstate;function t(e){return function(...t){const n=t.length>2?t[2]:void 0;if(n){const e=Ht,t=String(n);Ht=t;dt("history",{from:e,to:t})}return e.apply(this,t)}}qt.onpopstate=function(...t){const n=qt.location.href,r=Ht;Ht=n;if(dt("history",{from:r,to:n}),e)try{return e.apply(this,t)}catch(e){}},Ve(qt.history,"pushState",t),Ve(qt.history,"replaceState",t)}const Yt=Ie,Kt="__sentry_xhr_v3__";function Xt(e){lt("xhr",e),ut("xhr",Jt)}function Jt(){if(!Yt.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;Ve(e,"open",(function(e){return function(...t){const n=Date.now(),r=ae(t[0])?t[0].toUpperCase():void 0,o=function(e){if(ae(e))return e;try{return e.toString()}catch(e){}return}(t[1]);if(!r||!o)return e.apply(this,t);this[Kt]={method:r,url:o,request_headers:{}},"POST"===r&&o.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const s=()=>{const e=this[Kt];if(e&&4===this.readyState){try{e.status_code=this.status}catch(e){}dt("xhr",{args:[r,o],endTimestamp:Date.now(),startTimestamp:n,xhr:this})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?Ve(this,"onreadystatechange",(function(e){return function(...t){return s(),e.apply(this,t)}})):this.addEventListener("readystatechange",s),Ve(this,"setRequestHeader",(function(e){return function(...t){const[n,r]=t,o=this[Kt];return o&&ae(n)&&ae(r)&&(o.request_headers[n.toLowerCase()]=r),e.apply(this,t)}})),e.apply(this,t)}})),Ve(e,"send",(function(e){return function(...t){const n=this[Kt];if(!n)return e.apply(this,t);void 0!==t[0]&&(n.body=t[0]);return dt("xhr",{args:[n.method,n.url],startTimestamp:Date.now(),xhr:this}),e.apply(this,t)}}))}function Zt(){return!("undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&__SENTRY_BROWSER_BUNDLE__)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function Qt(e,t){return e.require(t)}function en(e){let t;try{t=Qt(module,e)}catch(e){}try{const{cwd:n}=Qt(module,"process");t=Qt(module,`${n()}/node_modules/${e}`)}catch(e){}return t}function tn(){return"undefined"!=typeof window&&(!Zt()||void 0!==Ie.process&&"renderer"===Ie.process.type)}function nn(e,t=100,n=1/0){try{return on("",e,t,n)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function rn(e,t=3,n=102400){const r=nn(e,t);return o=r,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(o))>n?rn(e,t-1,n):r;var o}function on(e,t,n=1/0,r=1/0,o=function(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(n){if(e)return!!t.has(n)||(t.add(n),!1);for(let e=0;e<t.length;e++)if(t[e]===n)return!0;return t.push(n),!1},function(n){if(e)t.delete(n);else for(let e=0;e<t.length;e++)if(t[e]===n){t.splice(e,1);break}}]}()){const[s,a]=o;if(null==t||["number","boolean","string"].includes(typeof t)&&!he(t))return t;const i=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!=typeof global&&t===global)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(ge(t))return"[VueViewModel]";if(le(n=t)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n)return"[SyntheticEvent]";if("number"==typeof t&&t!=t)return"[NaN]";if("function"==typeof t)return`[Function: ${at(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const r=function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(r)?`[HTMLElement: ${r}]`:`[object ${r}]`}catch(e){return`**non-serializable** (${e})`}var n}(e,t);if(!i.startsWith("[object "))return i;if(t.__sentry_skip_normalization__)return t;const c="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===c)return i.replace("object ","");if(s(t))return"[Circular ~]";const l=t;if(l&&"function"==typeof l.toJSON)try{return on("",l.toJSON(),c-1,r,o)}catch(e){}const u=Array.isArray(t)?[]:{};let d=0;const p=Xe(t);for(const e in p){if(!Object.prototype.hasOwnProperty.call(p,e))continue;if(d>=r){u[e]="[MaxProperties ~]";break}const t=p[e];u[e]=on(e,t,c-1,r,o),d++}return a(t),u}const sn=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function an(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){const o=r>=0?e[r]:"/";o&&(t=`${o}/${t}`,n="/"===o.charAt(0))}return t=function(e,t){let n=0;for(let t=e.length-1;t>=0;t--){const r=e[t];"."===r?e.splice(t,1):".."===r?(e.splice(t,1),n++):n&&(e.splice(t,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}(t.split("/").filter((e=>!!e)),!n).join("/"),(n?"/":"")+t||"."}function cn(e){let t=0;for(;t<e.length&&""===e[t];t++);let n=e.length-1;for(;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}function ln(e,t){let n=function(e){const t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=sn.exec(t);return n?n.slice(1):[]}(e)[2];return t&&n.slice(-1*t.length)===t&&(n=n.slice(0,n.length-t.length)),n}var un;function dn(e){return new hn((t=>{t(e)}))}function pn(e){return new hn(((t,n)=>{n(e)}))}!function(e){e[e.PENDING=0]="PENDING";e[e.RESOLVED=1]="RESOLVED";e[e.REJECTED=2]="REJECTED"}(un||(un={}));class hn{constructor(e){hn.prototype.__init.call(this),hn.prototype.__init2.call(this),hn.prototype.__init3.call(this),hn.prototype.__init4.call(this),this._state=un.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new hn(((n,r)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(e){r(e)}else n(t)},e=>{if(t)try{n(t(e))}catch(e){r(e)}else r(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new hn(((t,n)=>{let r,o;return this.then((t=>{o=!1,r=t,e&&e()}),(t=>{o=!0,r=t,e&&e()})).then((()=>{o?n(r):t(r)}))}))}__init(){this._resolve=e=>{this._setResult(un.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(un.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===un.PENDING&&(pe(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===un.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===un.RESOLVED&&e[1](this._value),this._state===un.REJECTED&&e[2](this._value),e[0]=!0)}))}}}function fn(e){const t=[];function n(e){return t.splice(t.indexOf(e),1)[0]}return{$:t,add:function(r){if(!(void 0===e||t.length<e))return pn(new He("Not adding Promise because buffer limit was reached."));const o=r();return-1===t.indexOf(o)&&t.push(o),o.then((()=>n(o))).then(null,(()=>n(o).then(null,(()=>{})))),o},drain:function(e){return new hn(((n,r)=>{let o=t.length;if(!o)return n(!0);const s=setTimeout((()=>{e&&e>0&&n(!1)}),e);t.forEach((e=>{dn(e).then((()=>{--o||(clearTimeout(s),n(!0))}),r)}))}))}}}function gn(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function mn(e){return e.split(/[\?#]/,1)[0]}function yn(e){return e.split(/\\?\//).filter((e=>e.length>0&&","!==e)).length}const _n={ip:!1,request:!0,transaction:!0,user:!0},vn=["cookies","data","headers","method","query_string","url"],bn=["id","username","email"];function Sn(e,t={}){const n=e.method&&e.method.toUpperCase();let r="",o="url";t.customRoute||e.route?(r=t.customRoute||`${e.baseUrl||""}${e.route&&e.route.path}`,o="route"):(e.originalUrl||e.url)&&(r=mn(e.originalUrl||e.url||""));let s="";return t.method&&n&&(s+=n),t.method&&t.path&&(s+=" "),t.path&&r&&(s+=r),[s,o]}function Tn(e,t){const{include:n=vn,deps:r}=t||{},o={},s=e.headers||{},a=e.method,i=s.host||e.hostname||e.host||"<no host>",c="https"===e.protocol||e.socket&&e.socket.encrypted?"https":"http",l=e.originalUrl||e.url||"",u=l.startsWith(c)?l:`${c}://${i}${l}`;return n.forEach((t=>{switch(t){case"headers":o.headers=s,n.includes("cookies")||delete o.headers.cookie;break;case"method":o.method=a;break;case"url":o.url=u;break;case"cookies":o.cookies=e.cookies||s.cookie&&function(e){const t={};let n=0;for(;n<e.length;){const r=e.indexOf("=",n);if(-1===r)break;let o=e.indexOf(";",n);if(-1===o)o=e.length;else if(o<r){n=e.lastIndexOf(";",r-1)+1;continue}const s=e.slice(n,r).trim();if(void 0===t[s]){let n=e.slice(r+1,o).trim();34===n.charCodeAt(0)&&(n=n.slice(1,-1));try{t[s]=-1!==n.indexOf("%")?decodeURIComponent(n):n}catch(e){t[s]=n}}n=o+1}return t}(s.cookie)||{};break;case"query_string":o.query_string=function(e,t){let n=e.originalUrl||e.url||"";if(!n)return;n.startsWith("/")&&(n=`http://dogs.are.great${n}`);try{return e.query||"undefined"!=typeof URL&&new URL(n).search.slice(1)||t&&t.url&&t.url.parse(n).query||void 0}catch(e){return}}(e,r);break;case"data":if("GET"===a||"HEAD"===a)break;void 0!==e.body&&(o.data=ae(e.body)?e.body:JSON.stringify(nn(e.body)));break;default:({}).hasOwnProperty.call(e,t)&&(o[t]=e[t])}})),o}function En(e,t,n){const r={..._n,...n&&n.include};if(r.request){const o=Array.isArray(r.request)?Tn(t,{include:r.request,deps:n&&n.deps}):Tn(t,{deps:n&&n.deps});e.request={...e.request,...o}}if(r.user){const n=t.user&&le(t.user)?function(e,t){const n={};return(Array.isArray(t)?t:bn).forEach((t=>{e&&t in e&&(n[t]=e[t])})),n}(t.user,r.user):{};Object.keys(n).length&&(e.user={...e.user,...n})}if(r.ip){const n=t.ip||t.socket&&t.socket.remoteAddress;n&&(e.user={...e.user,ip_address:n})}return r.transaction&&!e.transaction&&(e.transaction=function(e,t){switch(t){case"path":return Sn(e,{path:!0})[0];case"handler":return e.route&&e.route.stack&&e.route.stack[0]&&e.route.stack[0].name||"<anonymous>";default:return Sn(e,{path:!0,method:!0,customRoute:e._reconstructedRoute?e._reconstructedRoute:void 0})[0]}}(t,r.transaction)),e}const wn=["fatal","error","warning","log","info","debug"];function In(e){return"warn"===e?"warning":wn.includes(e)?e:"log"}const kn=1e3;function Cn(){return Date.now()/kn}const Rn=function(){const{performance:e}=Ie;if(!e||!e.now)return Cn;const t=Date.now()-e.now(),n=null==e.timeOrigin?t:e.timeOrigin;return()=>(n+e.now())/kn}(),xn=(()=>{const{performance:e}=Ie;if(!e||!e.now)return;const t=36e5,n=e.now(),r=Date.now(),o=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,s=o<t,a=e.timing&&e.timing.navigationStart,i="number"==typeof a?Math.abs(a+n-r):t;return s||i<t?o<=i?e.timeOrigin:a:r})(),An="baggage",Ln="sentry-",On=/^sentry-/,Nn=8192;function Dn(e){if(!ae(e)&&!Array.isArray(e))return;let t={};if(Array.isArray(e))t=e.reduce(((e,t)=>{const n=Mn(t);for(const t of Object.keys(n))e[t]=n[t];return e}),{});else{if(!e)return;t=Mn(e)}const n=Object.entries(t).reduce(((e,[t,n])=>{if(t.match(On)){e[t.slice(Ln.length)]=n}return e}),{});return Object.keys(n).length>0?n:void 0}function Pn(e){if(!e)return;return function(e){if(0===Object.keys(e).length)return;return Object.entries(e).reduce(((e,[t,n],r)=>{const o=`${encodeURIComponent(t)}=${encodeURIComponent(n)}`,s=0===r?o:`${e},${o}`;return s.length>Nn?(Pe&&je.warn(`Not adding key: ${t} with val: ${n} to baggage header due to exceeding baggage size limits.`),e):s}),"")}(Object.entries(e).reduce(((e,[t,n])=>(n&&(e[`${Ln}${t}`]=n),e)),{}))}function Mn(e){return e.split(",").map((e=>e.split("=").map((e=>decodeURIComponent(e.trim()))))).reduce(((e,[t,n])=>(e[t]=n,e)),{})}const Fn=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function Un(e){if(!e)return;const t=e.match(Fn);if(!t)return;let n;return"1"===t[3]?n=!0:"0"===t[3]&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function jn(e,t){const n=Un(e),r=Dn(t),{traceId:o,parentSpanId:s,parentSampled:a}=n||{};return n?{traceId:o||ft(),parentSpanId:s||ft().substring(16),spanId:ft().substring(16),sampled:a,dsc:r||{}}:{traceId:o||ft(),spanId:ft().substring(16)}}function Bn(e=ft(),t=ft().substring(16),n){let r="";return void 0!==n&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function $n(e,t=[]){return[e,t]}function Gn(e,t){const[n,r]=e;return[n,[...r,t]]}function Wn(e,t){const n=e[1];for(const e of n){if(t(e,e[0].type))return!0}return!1}function qn(e,t){return(t||new TextEncoder).encode(e)}function Hn(e,t){const[n,r]=e;let o=JSON.stringify(n);function s(e){"string"==typeof o?o="string"==typeof e?o+e:[qn(o,t),e]:o.push("string"==typeof e?qn(e,t):e)}for(const e of r){const[t,n]=e;if(s(`\n${JSON.stringify(t)}\n`),"string"==typeof n||n instanceof Uint8Array)s(n);else{let e;try{e=JSON.stringify(n)}catch(t){e=JSON.stringify(nn(n))}s(e)}}return"string"==typeof o?o:function(e){const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);let r=0;for(const t of e)n.set(t,r),r+=t.length;return n}(o)}function Vn(e,t){const n="string"==typeof e.data?qn(e.data,t):e.data;return[Qe({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}const zn={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function Yn(e){return zn[e]}function Kn(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function Xn(e,t,n,r){const o=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:$e(r)},...o&&{trace:Qe({...o})}}}const Jn=6e4;function Zn(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;const r=Date.parse(`${e}`);return isNaN(r)?Jn:r-t}function Qn(e,t,n=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>n}function er(e,{statusCode:t,headers:n},r=Date.now()){const o={...e},s=n&&n["x-sentry-rate-limits"],a=n&&n["retry-after"];if(s)for(const e of s.trim().split(",")){const[t,n,,,s]=e.split(":",5),a=parseInt(t,10),i=1e3*(isNaN(a)?60:a);if(n)for(const e of n.split(";"))"metric_bucket"===e&&s&&!s.split(";").includes("custom")||(o[e]=r+i);else o.all=r+i}else a?o.all=r+Zn(a,r):429===t&&(o.all=r+6e4);return o}function tr(e,t){const n={type:t.name||t.constructor.name,value:t.message},r=function(e,t){return e(t.stack||"",1)}(e,t);return r.length&&(n.stacktrace={frames:r}),n}function nr(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}const rr="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,or="production";function sr(){return Ce("globalEventProcessors",(()=>[]))}function ar(e){sr().push(e)}function ir(e,t,n,r=0){return new hn(((o,s)=>{const a=e[r];if(null===t||"function"!=typeof a)o(t);else{const i=a({...t},n);rr&&a.id&&null===i&&je.log(`Event processor "${a.id}" dropped event`),pe(i)?i.then((t=>ir(e,t,n,r+1).then(o))).then(null,s):ir(e,i,n,r+1).then(o).then(null,s)}}))}function cr(e){const t=Rn(),n={sid:ft(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return Qe({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(n)};return e&&lr(n,e),n}function lr(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Rn(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:ft()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function ur(e,t){let n={};t?n={status:t}:"ok"===e.status&&(n={status:"exited"}),lr(e,n)}const dr=1;function pr(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:o,parent_span_id:s,status:a,tags:i,origin:c}=mr(e);return Qe({data:r,op:o,parent_span_id:s,span_id:t,status:a,tags:i,trace_id:n,origin:c})}function hr(e){const{traceId:t,spanId:n}=e.spanContext();return Bn(t,n,yr(e))}function fr(e){return"number"==typeof e?gr(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?gr(e.getTime()):Rn()}function gr(e){return e>9999999999?e/1e3:e}function mr(e){return function(e){return"function"==typeof e.getSpanJSON}(e)?e.getSpanJSON():"function"==typeof e.toJSON?e.toJSON():{}}function yr(e){const{traceFlags:t}=e.spanContext();return Boolean(t&dr)}function _r(e,t,n,r,o,s){const{normalizeDepth:a=3,normalizeMaxBreadth:i=1e3}=e,c={...t,event_id:t.event_id||n.event_id||ft(),timestamp:t.timestamp||Cn()},l=n.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:n,release:r,dist:o,maxValueLength:s=250}=t;"environment"in e||(e.environment="environment"in t?n:or);void 0===e.release&&void 0!==r&&(e.release=r);void 0===e.dist&&void 0!==o&&(e.dist=o);e.message&&(e.message=me(e.message,s));const a=e.exception&&e.exception.values&&e.exception.values[0];a&&a.value&&(a.value=me(a.value,s));const i=e.request;i&&i.url&&(i.url=me(i.url,s))}(c,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(c,l),void 0===t.type&&function(e,t){const n=Ie._sentryDebugIds;if(!n)return;let r;const o=vr.get(t);o?r=o:(r=new Map,vr.set(t,r));const s=Object.keys(n).reduce(((e,o)=>{let s;const a=r.get(o);a?s=a:(s=t(o),r.set(o,s));for(let t=s.length-1;t>=0;t--){const r=s[t];if(r.filename){e[r.filename]=n[o];break}}return e}),{});try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.filename&&(e.debug_id=s[e.filename])}))}))}catch(e){}}(c,e.stackParser);const u=function(e,t){if(!t)return e;const n=e?e.clone():new $r;return n.update(t),n}(r,n.captureContext);n.mechanism&&_t(c,n.mechanism);const d=o&&o.getEventProcessors?o.getEventProcessors():[],p=function(){Br||(Br=new $r);return Br}().getScopeData();if(s){Ur(p,s.getScopeData())}if(u){Ur(p,u.getScopeData())}const h=[...n.attachments||[],...p.attachments];h.length&&(n.attachments=h),Fr(c,p);return ir([...d,...sr(),...p.eventProcessors],c,n).then((e=>(e&&function(e){const t={};try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))}))}catch(e){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.keys(t).forEach((e=>{n.push({type:"sourcemap",code_file:e,debug_id:t[e]})}))}(e),"number"==typeof a&&a>0?function(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:nn(e.data,t,n)}})))},...e.user&&{user:nn(e.user,t,n)},...e.contexts&&{contexts:nn(e.contexts,t,n)},...e.extra&&{extra:nn(e.extra,t,n)}};e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=nn(e.contexts.trace.data,t,n)));e.spans&&(r.spans=e.spans.map((e=>{const r=mr(e).data;return r&&(e.data=nn(r,t,n)),e})));return r}(e,a,i):e)))}const vr=new WeakMap;function br(e){if(e)return function(e){return e instanceof $r||"function"==typeof e}(e)||function(e){return Object.keys(e).some((e=>Sr.includes(e)))}(e)?{captureContext:e}:e}const Sr=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function Tr(e,t){return Kr().captureException(e,br(t))}function Er(e,t){const n="string"==typeof t?t:void 0,r="string"!=typeof t?{captureContext:t}:void 0;return Kr().captureMessage(e,n,r)}function wr(e,t){return Kr().captureEvent(e,t)}function Ir(e,t){Kr().addBreadcrumb(e,t)}function kr(e,t){Kr().setContext(e,t)}function Cr(...e){const t=Kr();if(2===e.length){const[n,r]=e;return n?t.withScope((()=>(t.getStackTop().scope=n,r(n)))):t.withScope(r)}return t.withScope(e[0])}function Rr(){return Kr().getClient()}function xr(){return Kr().getScope()}function Ar(e){const t=Rr(),n=Xr(),r=xr(),{release:o,environment:s=or}=t&&t.getOptions()||{},{userAgent:a}=Ie.navigator||{},i=cr({release:o,environment:s,user:r.getUser()||n.getUser(),...a&&{userAgent:a},...e}),c=n.getSession();return c&&"ok"===c.status&&lr(c,{status:"exited"}),Lr(),n.setSession(i),r.setSession(i),i}function Lr(){const e=Xr(),t=xr(),n=t.getSession()||e.getSession();n&&ur(n),Or(),e.setSession(),t.setSession()}function Or(){const e=Xr(),t=xr(),n=Rr(),r=t.getSession()||e.getSession();r&&n&&n.captureSession&&n.captureSession(r)}function Nr(e=!1){e?Lr():Or()}function Dr(e){return e.transaction}function Pr(e,t,n){const r=t.getOptions(),{publicKey:o}=t.getDsn()||{},{segment:s}=n&&n.getUser()||{},a=Qe({environment:r.environment||or,release:r.release,user_segment:s,public_key:o,trace_id:e});return t.emit&&t.emit("createDsc",a),a}function Mr(e){const t=Rr();if(!t)return{};const n=Pr(mr(e).trace_id||"",t,xr()),r=Dr(e);if(!r)return n;const o=r&&r._frozenDynamicSamplingContext;if(o)return o;const{sampleRate:s,source:a}=r.metadata;null!=s&&(n.sample_rate=`${s}`);const i=mr(r);return a&&"url"!==a&&(n.transaction=i.description),n.sampled=String(yr(r)),t.emit&&t.emit("createDsc",n),n}function Fr(e,t){const{fingerprint:n,span:r,breadcrumbs:o,sdkProcessingMetadata:s}=t;!function(e,t){const{extra:n,tags:r,user:o,contexts:s,level:a,transactionName:i}=t,c=Qe(n);c&&Object.keys(c).length&&(e.extra={...c,...e.extra});const l=Qe(r);l&&Object.keys(l).length&&(e.tags={...l,...e.tags});const u=Qe(o);u&&Object.keys(u).length&&(e.user={...u,...e.user});const d=Qe(s);d&&Object.keys(d).length&&(e.contexts={...d,...e.contexts});a&&(e.level=a);i&&(e.transaction=i)}(e,t),r&&function(e,t){e.contexts={trace:pr(t),...e.contexts};const n=Dr(t);if(n){e.sdkProcessingMetadata={dynamicSamplingContext:Mr(t),...e.sdkProcessingMetadata};const r=mr(n).description;r&&(e.tags={transaction:r,...e.tags})}}(e,r),function(e,t){e.fingerprint=e.fingerprint?bt(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t));e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}(e,n),function(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}(e,o),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,s)}function Ur(e,t){const{extra:n,tags:r,user:o,contexts:s,level:a,sdkProcessingMetadata:i,breadcrumbs:c,fingerprint:l,eventProcessors:u,attachments:d,propagationContext:p,transactionName:h,span:f}=t;jr(e,"extra",n),jr(e,"tags",r),jr(e,"user",o),jr(e,"contexts",s),jr(e,"sdkProcessingMetadata",i),a&&(e.level=a),h&&(e.transactionName=h),f&&(e.span=f),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),l.length&&(e.fingerprint=[...e.fingerprint,...l]),u.length&&(e.eventProcessors=[...e.eventProcessors,...u]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...p}}function jr(e,t,n){if(n&&Object.keys(n).length){e[t]={...e[t]};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[t][r]=n[r])}}let Br;class $r{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=Gr()}static clone(e){return e?e.clone():new $r}clone(){const e=new $r;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._span=this._span,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e}setClient(e){this._client=e}getClient(){return this._client}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&lr(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this._span;return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e;if(t instanceof $r){const e=t.getScopeData();this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&Object.keys(e.user).length&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint.length&&(this._fingerprint=e.fingerprint),t.getRequestSession()&&(this._requestSession=t.getRequestSession()),e.propagationContext&&(this._propagationContext=e.propagationContext)}else if(le(t)){const t=e;this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession),t.propagationContext&&(this._propagationContext=t.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=Gr(),this}addBreadcrumb(e,t){const n="number"==typeof t?t:100;if(n<=0)return this;const r={timestamp:Cn(),...e},o=this._breadcrumbs;return o.push(r),this._breadcrumbs=o.length>n?o.slice(-n):o,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:e,_attachments:t,_contexts:n,_tags:r,_extra:o,_user:s,_level:a,_fingerprint:i,_eventProcessors:c,_propagationContext:l,_sdkProcessingMetadata:u,_transactionName:d,_span:p}=this;return{breadcrumbs:e,attachments:t,contexts:n,tags:r,extra:o,user:s,level:a,fingerprint:i||[],eventProcessors:c,propagationContext:l,sdkProcessingMetadata:u,transactionName:d,span:p}}applyToEvent(e,t={},n=[]){Fr(e,this.getScopeData());return ir([...n,...sr(),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const n=t&&t.event_id?t.event_id:ft();if(!this._client)return je.warn("No client configured on scope - will not capture exception!"),n;const r=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:r,...t,event_id:n},this),n}captureMessage(e,t,n){const r=n&&n.event_id?n.event_id:ft();if(!this._client)return je.warn("No client configured on scope - will not capture message!"),r;const o=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:o,...n,event_id:r},this),r}captureEvent(e,t){const n=t&&t.event_id?t.event_id:ft();return this._client?(this._client.captureEvent(e,{...t,event_id:n},this),n):(je.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}function Gr(){return{traceId:ft(),spanId:ft().substring(16)}}const Wr="7.116.0",qr=parseFloat(Wr),Hr=100;class Vr{constructor(e,t,n,r=qr){let o,s;this._version=r,t?o=t:(o=new $r,o.setClient(e)),n?s=n:(s=new $r,s.setClient(e)),this._stack=[{scope:o}],e&&this.bindClient(e),this._isolationScope=s}isOlderThan(e){return this._version<e}bindClient(e){const t=this.getStackTop();t.client=e,t.scope.setClient(e),e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1)&&!!this.getStack().pop()}withScope(e){const t=this.pushScope();let n;try{n=e(t)}catch(e){throw this.popScope(),e}return pe(n)?n.then((e=>(this.popScope(),e)),(e=>{throw this.popScope(),e})):(this.popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const n=this._lastEventId=t&&t.event_id?t.event_id:ft(),r=new Error("Sentry syntheticException");return this.getScope().captureException(e,{originalException:e,syntheticException:r,...t,event_id:n}),n}captureMessage(e,t,n){const r=this._lastEventId=n&&n.event_id?n.event_id:ft(),o=new Error(e);return this.getScope().captureMessage(e,t,{originalException:e,syntheticException:o,...n,event_id:r}),r}captureEvent(e,t){const n=t&&t.event_id?t.event_id:ft();return e.type||(this._lastEventId=n),this.getScope().captureEvent(e,{...t,event_id:n}),n}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:n,client:r}=this.getStackTop();if(!r)return;const{beforeBreadcrumb:o=null,maxBreadcrumbs:s=Hr}=r.getOptions&&r.getOptions()||{};if(s<=0)return;const a={timestamp:Cn(),...e},i=o?Ue((()=>o(a,t))):a;null!==i&&(r.emit&&r.emit("beforeAddBreadcrumb",i,t),n.addBreadcrumb(i,s))}setUser(e){this.getScope().setUser(e),this.getIsolationScope().setUser(e)}setTags(e){this.getScope().setTags(e),this.getIsolationScope().setTags(e)}setExtras(e){this.getScope().setExtras(e),this.getIsolationScope().setExtras(e)}setTag(e,t){this.getScope().setTag(e,t),this.getIsolationScope().setTag(e,t)}setExtra(e,t){this.getScope().setExtra(e,t),this.getIsolationScope().setExtra(e,t)}setContext(e,t){this.getScope().setContext(e,t),this.getIsolationScope().setContext(e,t)}configureScope(e){const{scope:t,client:n}=this.getStackTop();n&&e(t)}run(e){const t=Yr(this);try{e(this)}finally{Yr(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return rr&&je.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){const n=this._callExtensionMethod("startTransaction",e,t);if(rr&&!n){this.getClient()?je.warn("Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':\nSentry.addTracingExtensions();\nSentry.init({...});\n"):je.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")}return n}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,t=e.getSession();t&&ur(t),this._sendSessionUpdate(),e.setSession()}startSession(e){const{scope:t,client:n}=this.getStackTop(),{release:r,environment:o=or}=n&&n.getOptions()||{},{userAgent:s}=Ie.navigator||{},a=cr({release:r,environment:o,user:t.getUser(),...s&&{userAgent:s},...e}),i=t.getSession&&t.getSession();return i&&"ok"===i.status&&lr(i,{status:"exited"}),this.endSession(),t.setSession(a),a}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop(),n=e.getSession();n&&t&&t.captureSession&&t.captureSession(n)}_callExtensionMethod(e,...t){const n=zr().__SENTRY__;if(n&&n.extensions&&"function"==typeof n.extensions[e])return n.extensions[e].apply(this,t);rr&&je.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function zr(){return Ie.__SENTRY__=Ie.__SENTRY__||{extensions:{},hub:void 0},Ie}function Yr(e){const t=zr(),n=Zr(t);return Qr(t,e),n}function Kr(){const e=zr();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return function(e=zr()){t=e,t&&t.__SENTRY__&&t.__SENTRY__.hub&&!Zr(e).isOlderThan(qr)||Qr(e,new Vr);var t;return Zr(e)}(e)}function Xr(){return Kr().getIsolationScope()}function Jr(e,t={}){const n=zr();return n.__SENTRY__&&n.__SENTRY__.acs?n.__SENTRY__.acs.runWithAsyncContext(e,t):e()}function Zr(e){return Ce("hub",(()=>new Vr),e)}function Qr(e,t){if(!e)return!1;return(e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0}function eo(e){return(e||Kr()).getScope().getTransaction()}const to=Un;let no=!1;function ro(){const e=eo();if(e){const t="internal_error";rr&&je.log(`[Tracing] Transaction: ${t} -> Global error occured`),e.setStatus(t)}}var oo;function so(e){if(e<400&&e>=100)return"ok";if(e>=400&&e<500)switch(e){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(e>=500&&e<600)switch(e){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}ro.tag="sentry_tracingErrorCallback",function(e){e.Ok="ok";e.DeadlineExceeded="deadline_exceeded";e.Unauthenticated="unauthenticated";e.PermissionDenied="permission_denied";e.NotFound="not_found";e.ResourceExhausted="resource_exhausted";e.InvalidArgument="invalid_argument";e.Unimplemented="unimplemented";e.Unavailable="unavailable";e.InternalError="internal_error";e.UnknownError="unknown_error";e.Cancelled="cancelled";e.AlreadyExists="already_exists";e.FailedPrecondition="failed_precondition";e.Aborted="aborted";e.OutOfRange="out_of_range";e.DataLoss="data_loss"}(oo||(oo={}));const ao=so;function io(e,t){e.setTag("http.status_code",String(t)),e.setData("http.response.status_code",t);const n=so(t);"unknown_error"!==n&&e.setStatus(n)}function co(e,t,n=(()=>{})){let r;try{r=e()}catch(e){throw t(e),n(),e}return function(e,t,n){if(pe(e))return e.then((e=>(n(),e)),(e=>{throw t(e),n(),e}));return n(),e}(r,t,n)}function lo(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=Rr(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}function uo(e,t){const n=go(e);return Jr((()=>Cr(e.scope,(r=>{const o=Kr(),s=r.getSpan(),a=e.onlyIfParent&&!s?void 0:fo(o,{parentSpan:s,spanContext:n,forceTransaction:e.forceTransaction,scope:r});return co((()=>t(a)),(()=>{if(a){const{status:e}=mr(a);e&&"ok"!==e||a.setStatus("internal_error")}}),(()=>a&&a.end()))}))))}function po(e){if(!lo())return;const t=go(e),n=Kr(),r=e.scope?e.scope.getSpan():ho();if(e.onlyIfParent&&!r)return;const o=(e.scope||xr()).clone();return fo(n,{parentSpan:r,spanContext:t,forceTransaction:e.forceTransaction,scope:o})}function ho(){return xr().getSpan()}function fo(e,{parentSpan:t,spanContext:n,forceTransaction:r,scope:o}){if(!lo())return;const s=Xr();let a;if(t&&!r)a=t.startChild(n);else if(t){const r=Mr(t),{traceId:o,spanId:s}=t.spanContext(),i=yr(t);a=e.startTransaction({traceId:o,parentSpanId:s,parentSampled:i,...n,metadata:{dynamicSamplingContext:r,...n.metadata}})}else{const{traceId:t,dsc:r,parentSpanId:i,sampled:c}={...s.getPropagationContext(),...o.getPropagationContext()};a=e.startTransaction({traceId:t,parentSpanId:i,parentSampled:c,...n,metadata:{dynamicSamplingContext:r,...n.metadata}})}return o.setSpan(a),function(e,t,n){e&&(ze(e,yo,n),ze(e,mo,t))}(a,o,s),a}function go(e){if(e.startTime){const t={...e};return t.startTimestamp=fr(e.startTime),delete t.startTime,t}return e}const mo="_sentryScope",yo="_sentryIsolationScope";let _o;function vo(e){return _o?_o.get(e):void 0}function bo(e){const t=vo(e);if(!t)return;const n={};for(const[,[e,r]]of t)n[e]||(n[e]=[]),n[e].push(Qe(r));return n}const So="sentry.source",To="sentry.sample_rate",Eo="sentry.op",wo="sentry.origin";class Io{constructor(e=1e3){this._maxlen=e,this.spans=[]}add(e){this.spans.length>this._maxlen?e.spanRecorder=void 0:this.spans.push(e)}}class ko{constructor(e={}){this._traceId=e.traceId||ft(),this._spanId=e.spanId||ft().substring(16),this._startTime=e.startTimestamp||Rn(),this.tags=e.tags?{...e.tags}:{},this.data=e.data?{...e.data}:{},this.instrumenter=e.instrumenter||"sentry",this._attributes={},this.setAttributes({[wo]:e.origin||"manual",[Eo]:e.op,...e.attributes}),this._name=e.name||e.description,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.status&&(this._status=e.status),e.endTimestamp&&(this._endTime=e.endTimestamp),void 0!==e.exclusiveTime&&(this._exclusiveTime=e.exclusiveTime),this._measurements=e.measurements?{...e.measurements}:{}}get name(){return this._name||""}set name(e){this.updateName(e)}get description(){return this._name}set description(e){this._name=e}get traceId(){return this._traceId}set traceId(e){this._traceId=e}get spanId(){return this._spanId}set spanId(e){this._spanId=e}set parentSpanId(e){this._parentSpanId=e}get parentSpanId(){return this._parentSpanId}get sampled(){return this._sampled}set sampled(e){this._sampled=e}get attributes(){return this._attributes}set attributes(e){this._attributes=e}get startTimestamp(){return this._startTime}set startTimestamp(e){this._startTime=e}get endTimestamp(){return this._endTime}set endTimestamp(e){this._endTime=e}get status(){return this._status}set status(e){this._status=e}get op(){return this._attributes[Eo]}set op(e){this.setAttribute(Eo,e)}get origin(){return this._attributes[wo]}set origin(e){this.setAttribute(wo,e)}spanContext(){const{_spanId:e,_traceId:t,_sampled:n}=this;return{spanId:e,traceId:t,traceFlags:n?dr:0}}startChild(e){const t=new ko({...e,parentSpanId:this._spanId,sampled:this._sampled,traceId:this._traceId});t.spanRecorder=this.spanRecorder,t.spanRecorder&&t.spanRecorder.add(t);const n=Dr(this);if(t.transaction=n,rr&&n){const r=`[Tracing] Starting '${e&&e.op||"< unknown op >"}' span on transaction '${mr(t).description||"< unknown name >"}' (${n.spanContext().spanId}).`;je.log(r),this._logMessage=r}return t}setTag(e,t){return this.tags={...this.tags,[e]:t},this}setData(e,t){return this.data={...this.data,[e]:t},this}setAttribute(e,t){void 0===t?delete this._attributes[e]:this._attributes[e]=t}setAttributes(e){Object.keys(e).forEach((t=>this.setAttribute(t,e[t])))}setStatus(e){return this._status=e,this}setHttpStatus(e){return io(this,e),this}setName(e){this.updateName(e)}updateName(e){return this._name=e,this}isSuccess(){return"ok"===this._status}finish(e){return this.end(e)}end(e){if(this._endTime)return;const t=Dr(this);if(rr&&t&&t.spanContext().spanId!==this._spanId){const e=this._logMessage;e&&je.log(e.replace("Starting","Finishing"))}this._endTime=fr(e)}toTraceparent(){return hr(this)}toContext(){return Qe({data:this._getData(),description:this._name,endTimestamp:this._endTime,op:this.op,parentSpanId:this._parentSpanId,sampled:this._sampled,spanId:this._spanId,startTimestamp:this._startTime,status:this._status,tags:this.tags,traceId:this._traceId})}updateWithContext(e){return this.data=e.data||{},this._name=e.name||e.description,this._endTime=e.endTimestamp,this.op=e.op,this._parentSpanId=e.parentSpanId,this._sampled=e.sampled,this._spanId=e.spanId||this._spanId,this._startTime=e.startTimestamp||this._startTime,this._status=e.status,this.tags=e.tags||{},this._traceId=e.traceId||this._traceId,this}getTraceContext(){return pr(this)}getSpanJSON(){return Qe({data:this._getData(),description:this._name,op:this._attributes[Eo],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:this._status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[wo],_metrics_summary:bo(this),profile_id:this._attributes.profile_id,exclusive_time:this._exclusiveTime,measurements:Object.keys(this._measurements).length>0?this._measurements:void 0})}isRecording(){return!this._endTime&&!!this._sampled}toJSON(){return this.getSpanJSON()}_getData(){const{data:e,_attributes:t}=this,n=Object.keys(e).length>0,r=Object.keys(t).length>0;if(n||r)return n&&r?{...e,...t}:n?e:t}}class Co extends ko{constructor(e,t){super(e),this._contexts={},this._hub=t||Kr(),this._name=e.name||"",this._metadata={...e.metadata},this._trimEnd=e.trimEnd,this.transaction=this;const n=this._metadata.dynamicSamplingContext;n&&(this._frozenDynamicSamplingContext={...n})}get name(){return this._name}set name(e){this.setName(e)}get metadata(){return{source:"custom",spanMetadata:{},...this._metadata,...this._attributes[So]&&{source:this._attributes[So]},...this._attributes[To]&&{sampleRate:this._attributes[To]}}}set metadata(e){this._metadata=e}setName(e,t="custom"){this._name=e,this.setAttribute(So,t)}updateName(e){return this._name=e,this}initSpanRecorder(e=1e3){this.spanRecorder||(this.spanRecorder=new Io(e)),this.spanRecorder.add(this)}setContext(e,t){null===t?delete this._contexts[e]:this._contexts[e]=t}setMeasurement(e,t,n=""){this._measurements[e]={value:t,unit:n}}setMetadata(e){this._metadata={...this._metadata,...e}}end(e){const t=fr(e),n=this._finishTransaction(t);if(n)return this._hub.captureEvent(n)}toContext(){return Qe({...super.toContext(),name:this._name,trimEnd:this._trimEnd})}updateWithContext(e){return super.updateWithContext(e),this._name=e.name||"",this._trimEnd=e.trimEnd,this}getDynamicSamplingContext(){return Mr(this)}setHub(e){this._hub=e}getProfileId(){if(void 0!==this._contexts&&void 0!==this._contexts.profile)return this._contexts.profile.profile_id}_finishTransaction(e){if(void 0!==this._endTime)return;this._name||(rr&&je.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>"),super.end(e);const t=this._hub.getClient();if(t&&t.emit&&t.emit("finishTransaction",this),!0!==this._sampled)return rr&&je.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),void(t&&t.recordDroppedEvent("sample_rate","transaction"));const n=this.spanRecorder?this.spanRecorder.spans.filter((e=>e!==this&&mr(e).timestamp)):[];if(this._trimEnd&&n.length>0){const e=n.map((e=>mr(e).timestamp)).filter(Boolean);this._endTime=e.reduce(((e,t)=>e>t?e:t))}const{scope:r,isolationScope:o}={scope:(s=this)[mo],isolationScope:s[yo]};var s;const{metadata:a}=this,{source:i}=a,c={contexts:{...this._contexts,trace:pr(this)},spans:n,start_timestamp:this._startTime,tags:this.tags,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{...a,capturedSpanScope:r,capturedSpanIsolationScope:o,...Qe({dynamicSamplingContext:Mr(this)})},_metrics_summary:bo(this),...i&&{transaction_info:{source:i}}};return Object.keys(this._measurements).length>0&&(rr&&je.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),c.measurements=this._measurements),rr&&je.log(`[Tracing] Finishing ${this.op} transaction: ${this._name}.`),c}}const Ro={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},xo=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"];class Ao extends Io{constructor(e,t,n,r){super(r),this._pushActivity=e,this._popActivity=t,this.transactionSpanId=n}add(e){if(e.spanContext().spanId!==this.transactionSpanId){const t=e.end;e.end=(...n)=>(this._popActivity(e.spanContext().spanId),t.apply(e,n)),void 0===mr(e).timestamp&&this._pushActivity(e.spanContext().spanId)}super.add(e)}}class Lo extends Co{constructor(e,t,n=Ro.idleTimeout,r=Ro.finalTimeout,o=Ro.heartbeatInterval,s=!1,a=!1){super(e,t),this._idleHub=t,this._idleTimeout=n,this._finalTimeout=r,this._heartbeatInterval=o,this._onScope=s,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._idleTimeoutCanceledPermanently=!1,this._beforeFinishCallbacks=[],this._finishReason=xo[4],this._autoFinishAllowed=!a,s&&(rr&&je.log(`Setting idle transaction on scope. Span ID: ${this.spanContext().spanId}`),t.getScope().setSpan(this)),a||this._restartIdleTimeout(),setTimeout((()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=xo[3],this.end())}),this._finalTimeout)}end(e){const t=fr(e);if(this._finished=!0,this.activities={},"ui.action.click"===this.op&&this.setAttribute("finishReason",this._finishReason),this.spanRecorder){rr&&je.log("[Tracing] finishing IdleTransaction",new Date(1e3*t).toISOString(),this.op);for(const e of this._beforeFinishCallbacks)e(this,t);this.spanRecorder.spans=this.spanRecorder.spans.filter((e=>{if(e.spanContext().spanId===this.spanContext().spanId)return!0;mr(e).timestamp||(e.setStatus("cancelled"),e.end(t),rr&&je.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(e,void 0,2)));const{start_timestamp:n,timestamp:r}=mr(e),o=n&&n<t,s=(this._finalTimeout+this._idleTimeout)/1e3,a=r&&n&&r-n<s;if(rr){const t=JSON.stringify(e,void 0,2);o?a||je.log("[Tracing] discarding Span since it finished after Transaction final timeout",t):je.log("[Tracing] discarding Span since it happened after Transaction was finished",t)}return o&&a})),rr&&je.log("[Tracing] flushing IdleTransaction")}else rr&&je.log("[Tracing] No active IdleTransaction");if(this._onScope){const e=this._idleHub.getScope();e.getTransaction()===this&&e.setSpan(void 0)}return super.end(e)}registerBeforeFinishCallback(e){this._beforeFinishCallbacks.push(e)}initSpanRecorder(e){if(!this.spanRecorder){const t=e=>{this._finished||this._pushActivity(e)},n=e=>{this._finished||this._popActivity(e)};this.spanRecorder=new Ao(t,n,this.spanContext().spanId,e),rr&&je.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(e,{restartOnChildSpanChange:t}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=!1===t,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,0===Object.keys(this.activities).length&&this._idleTimeoutCanceledPermanently&&(this._finishReason=xo[5],this.end(e)))}setFinishReason(e){this._finishReason=e}sendAutoFinishSignal(){this._autoFinishAllowed||(rr&&je.log("[Tracing] Received finish signal for idle transaction."),this._restartIdleTimeout(),this._autoFinishAllowed=!0)}_restartIdleTimeout(e){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout((()=>{this._finished||0!==Object.keys(this.activities).length||(this._finishReason=xo[1],this.end(e))}),this._idleTimeout)}_pushActivity(e){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),rr&&je.log(`[Tracing] pushActivity: ${e}`),this.activities[e]=!0,rr&&je.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(e){if(this.activities[e]&&(rr&&je.log(`[Tracing] popActivity ${e}`),delete this.activities[e],rr&&je.log("[Tracing] new activities count",Object.keys(this.activities).length)),0===Object.keys(this.activities).length){const e=Rn();this._idleTimeoutCanceledPermanently?this._autoFinishAllowed&&(this._finishReason=xo[5],this.end(e)):this._restartIdleTimeout(e+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;const e=Object.keys(this.activities).join("");e===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=e,this._heartbeatCounter>=3?this._autoFinishAllowed&&(rr&&je.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=xo[0],this.end()):this._pingHeartbeat()}_pingHeartbeat(){rr&&je.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout((()=>{this._beat()}),this._heartbeatInterval)}}function Oo(e,t,n){if(!lo(t))return e.sampled=!1,e;if(void 0!==e.sampled)return e.setAttribute(To,Number(e.sampled)),e;let r;return"function"==typeof t.tracesSampler?(r=t.tracesSampler(n),e.setAttribute(To,Number(r))):void 0!==n.parentSampled?r=n.parentSampled:void 0!==t.tracesSampleRate?(r=t.tracesSampleRate,e.setAttribute(To,Number(r))):(r=1,e.setAttribute(To,r)),No(r)?r?(e.sampled=Math.random()<r,e.sampled?(rr&&je.log(`[Tracing] starting ${e.op} transaction - ${mr(e).description}`),e):(rr&&je.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(r)})`),e)):(rr&&je.log("[Tracing] Discarding transaction because "+("function"==typeof t.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),e.sampled=!1,e):(rr&&je.warn("[Tracing] Discarding transaction because of invalid sample rate."),e.sampled=!1,e)}function No(e){return he(e)||"number"!=typeof e&&"boolean"!=typeof e?(rr&&je.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):!(e<0||e>1)||(rr&&je.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${e}.`),!1)}function Do(){const e=this.getScope().getSpan();return e?{"sentry-trace":hr(e)}:{}}function Po(e,t){const n=this.getClient(),r=n&&n.getOptions()||{},o=r.instrumenter||"sentry",s=e.instrumenter||"sentry";o!==s&&(rr&&je.error(`A transaction was started with instrumenter=\`${s}\`, but the SDK is configured with the \`${o}\` instrumenter.\nThe transaction will not be sampled. Please use the ${o} instrumentation to start transactions.`),e.sampled=!1);let a=new Co(e,this);return a=Oo(a,r,{name:e.name,parentSampled:e.parentSampled,transactionContext:e,attributes:{...e.data,...e.attributes},...t}),a.isRecording()&&a.initSpanRecorder(r._experiments&&r._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",a),a}function Mo(e,t,n,r,o,s,a,i=!1){const c=e.getClient(),l=c&&c.getOptions()||{};let u=new Lo(t,e,n,r,a,o,i);return u=Oo(u,l,{name:t.name,parentSampled:t.parentSampled,transactionContext:t,attributes:{...t.data,...t.attributes},...s}),u.isRecording()&&u.initSpanRecorder(l._experiments&&l._experiments.maxSpans),c&&c.emit&&c.emit("startTransaction",u),u}function Fo(){const e=zr();e.__SENTRY__&&(e.__SENTRY__.extensions=e.__SENTRY__.extensions||{},e.__SENTRY__.extensions.startTransaction||(e.__SENTRY__.extensions.startTransaction=Po),e.__SENTRY__.extensions.traceHeaders||(e.__SENTRY__.extensions.traceHeaders=Do),no||(no=!0,Ut(ro),$t(ro)))}function Uo(e,t,n){const r=eo();r&&r.setMeasurement(e,t,n)}function jo(e,t,n,r){const o=Kn(n),s=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,n&&n.sdk);const a=Xn(e,o,r,t);delete e.sdkProcessingMetadata;return $n(a,[[{type:s},e]])}const Bo="7";function $o(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function Go(e,t){return n={sentry_key:e.publicKey,sentry_version:Bo,...t&&{sentry_client:`${t.name}/${t.version}`}},Object.keys(n).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(n[e])}`)).join("&");var n}function Wo(e,t={}){const n="string"==typeof t?t:t.tunnel,r="string"!=typeof t&&t._metadata?t._metadata.sdk:void 0;return n||`${function(e){return`${$o(e)}${e.projectId}/envelope/`}(e)}?${Go(e,r)}`}const qo=[];function Ho(e){const t=e.defaultIntegrations||[],n=e.integrations;let r;t.forEach((e=>{e.isDefaultInstance=!0})),r=Array.isArray(n)?[...t,...n]:"function"==typeof n?bt(n(t)):t;const o=function(e){const t={};return e.forEach((e=>{const{name:n}=e,r=t[n];r&&!r.isDefaultInstance&&e.isDefaultInstance||(t[n]=e)})),Object.keys(t).map((e=>t[e]))}(r),s=function(e,t){for(let n=0;n<e.length;n++)if(!0===t(e[n]))return n;return-1}(o,(e=>"Debug"===e.name));if(-1!==s){const[e]=o.splice(s,1);o.push(e)}return o}function Vo(e,t){for(const n of t)n&&n.afterAllSetup&&n.afterAllSetup(e)}function zo(e,t,n){if(n[t.name])rr&&je.log(`Integration skipped because it was already installed: ${t.name}`);else{if(n[t.name]=t,-1===qo.indexOf(t.name)&&(t.setupOnce(ar,Kr),qo.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),e.on&&"function"==typeof t.preprocessEvent){const n=t.preprocessEvent.bind(t);e.on("preprocessEvent",((t,r)=>n(t,r,e)))}if(e.addEventProcessor&&"function"==typeof t.processEvent){const n=t.processEvent.bind(t),r=Object.assign(((t,r)=>n(t,r,e)),{id:t.name});e.addEventProcessor(r)}rr&&je.log(`Integration installed: ${t.name}`)}}function Yo(e,t){return Object.assign((function(...e){return t(...e)}),{id:e})}function Ko(e){return e.replace(/[^\w\-./]+/gi,"")}const Xo=[["\n","\\n"],["\r","\\r"],["\t","\\t"],["\\","\\\\"],["|","\\u{7c}"],[",","\\u{2c}"]];function Jo(e){return[...e].reduce(((e,t)=>e+function(e){for(const[t,n]of Xo)if(e===t)return n;return e}(t)),"")}function Zo(e,t,n,r){const o={sent_at:(new Date).toISOString()};n&&n.sdk&&(o.sdk={name:n.sdk.name,version:n.sdk.version}),r&&t&&(o.dsn=$e(t));const s=function(e){const t=function(e){let t="";for(const n of e){const e=Object.entries(n.tags),r=e.length>0?`|#${e.map((([e,t])=>`${e}:${t}`)).join(",")}`:"";t+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${r}|T${n.timestamp}\n`}return t}(e);return[{type:"statsd",length:t.length},t]}(e);return $n(o,[s])}const Qo="Not capturing exception because it's already been captured.";class es{constructor(e){if(this._options=e,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=qe(e.dsn):rr&&je.warn("No DSN provided, client will not send events."),this._dsn){const t=Wo(this._dsn,e);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,n){if(vt(e))return void(rr&&je.log(Qo));let r=t&&t.event_id;return this._process(this.eventFromException(e,t).then((e=>this._captureEvent(e,t,n))).then((e=>{r=e}))),r}captureMessage(e,t,n,r){let o=n&&n.event_id;const s=ie(e)?e:String(e),a=ce(e)?this.eventFromMessage(s,t,n):this.eventFromException(e,n);return this._process(a.then((e=>this._captureEvent(e,n,r))).then((e=>{o=e}))),o}captureEvent(e,t,n){if(t&&t.originalException&&vt(t.originalException))return void(rr&&je.log(Qo));let r=t&&t.event_id;const o=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,t,o||n).then((e=>{r=e}))),r}captureSession(e){"string"!=typeof e.release?rr&&je.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),lr(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(e).then((n=>t.flush(e).then((e=>n&&e))))):dn(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),e)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}setupIntegrations(e){(e&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(e){return this.getIntegrationByName(e)}getIntegrationByName(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch(t){return rr&&je.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){const t=this._integrations[e.name];zo(this,e,this._integrations),t||Vo(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let n=jo(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])n=Gn(n,Vn(e,this._options.transportOptions&&this._options.transportOptions.textEncoder));const r=this._sendEnvelope(n);r&&r.then((t=>this.emit("afterSendEvent",e,t)),null)}sendSession(e){const t=function(e,t,n,r){const o=Kn(n);return $n({sent_at:(new Date).toISOString(),...o&&{sdk:o},...!!r&&t&&{dsn:$e(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}recordDroppedEvent(e,t,n){if(this._options.sendClientReports){const n=`${e}:${t}`;rr&&je.log(`Adding outcome: "${n}"`),this._outcomes[n]=this._outcomes[n]+1||1}}captureAggregateMetrics(e){rr&&je.log(`Flushing aggregated metrics, number of metrics: ${e.length}`);const t=Zo(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}on(e,t){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t)}emit(e,...t){this._hooks[e]&&this._hooks[e].forEach((e=>e(...t)))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(e,t){const n={};return t.forEach((t=>{t&&zo(e,t,n)})),n}(this,e),Vo(this,e),this._integrationsInitialized=!0}_updateSessionFromEvent(e,t){let n=!1,r=!1;const o=t.exception&&t.exception.values;if(o){r=!0;for(const e of o){const t=e.mechanism;if(t&&!1===t.handled){n=!0;break}}}const s="ok"===e.status;(s&&0===e.errors||s&&n)&&(lr(e,{...n&&{status:"crashed"},errors:e.errors||Number(r||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new hn((t=>{let n=0;const r=setInterval((()=>{0==this._numProcessing?(clearInterval(r),t(!0)):(n+=1,e&&n>=e&&(clearInterval(r),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,n,r=Xr()){const o=this.getOptions(),s=Object.keys(this._integrations);return!t.integrations&&s.length>0&&(t.integrations=s),this.emit("preprocessEvent",e,t),_r(o,e,t,n,this,r).then((e=>{if(null===e)return e;const t={...r.getPropagationContext(),...n?n.getPropagationContext():void 0};if(!(e.contexts&&e.contexts.trace)&&t){const{traceId:r,spanId:o,parentSpanId:s,dsc:a}=t;e.contexts={trace:{trace_id:r,span_id:o,parent_span_id:s},...e.contexts};const i=a||Pr(r,this,n);e.sdkProcessingMetadata={dynamicSamplingContext:i,...e.sdkProcessingMetadata}}return e}))}_captureEvent(e,t={},n){return this._processEvent(e,t,n).then((e=>e.event_id),(e=>{if(rr){const t=e;"log"===t.logLevel?je.log(t.message):je.warn(t)}}))}_processEvent(e,t,n){const r=this.getOptions(),{sampleRate:o}=r,s=ns(e),a=ts(e),i=e.type||"error",c=`before send for type \`${i}\``;if(a&&"number"==typeof o&&Math.random()>o)return this.recordDroppedEvent("sample_rate","error",e),pn(new He(`Discarding event because it's not included in the random sample (sampling rate = ${o})`,"log"));const l="replay_event"===i?"replay":i,u=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,t,n,u).then((n=>{if(null===n)throw this.recordDroppedEvent("event_processor",l,e),new He("An event processor returned `null`, will not send event.","log");if(t.data&&!0===t.data.__sentry__)return n;const o=function(e,t,n){const{beforeSend:r,beforeSendTransaction:o}=e;if(ts(t)&&r)return r(t,n);if(ns(t)&&o)return o(t,n);return t}(r,n,t);return function(e,t){const n=`${t} must return \`null\` or a valid event.`;if(pe(e))return e.then((e=>{if(!le(e)&&null!==e)throw new He(n);return e}),(e=>{throw new He(`${t} rejected with ${e}`)}));if(!le(e)&&null!==e)throw new He(n);return e}(o,c)})).then((r=>{if(null===r)throw this.recordDroppedEvent("before_send",l,e),new He(`${c} returned \`null\`, will not send event.`,"log");const o=n&&n.getSession();!s&&o&&this._updateSessionFromEvent(o,r);const a=r.transaction_info;if(s&&a&&r.transaction!==e.transaction){const e="custom";r.transaction_info={...a,source:e}}return this.sendEvent(r,t),r})).then(null,(e=>{if(e instanceof He)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new He(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)return this._transport.send(e).then(null,(e=>{rr&&je.error("Error while sending event:",e)}));rr&&je.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map((t=>{const[n,r]=t.split(":");return{reason:n,category:r,quantity:e[t]}}))}}function ts(e){return void 0===e.type}function ns(e){return"transaction"===e.type}function rs(e){const t=Rr();t&&t.addEventProcessor&&t.addEventProcessor(e)}const os={c:class{constructor(e){this._value=e}get weight(){return 1}add(e){this._value+=e}toString(){return`${this._value}`}},g:class{constructor(e){this._last=e,this._min=e,this._max=e,this._sum=e,this._count=1}get weight(){return 5}add(e){this._last=e,e<this._min&&(this._min=e),e>this._max&&(this._max=e),this._sum+=e,this._count++}toString(){return`${this._last}:${this._min}:${this._max}:${this._sum}:${this._count}`}},d:class{constructor(e){this._value=[e]}get weight(){return this._value.length}add(e){this._value.push(e)}toString(){return this._value.join(":")}},s:class{constructor(e){this.first=e,this._value=new Set([e])}get weight(){return this._value.size}add(e){this._value.add(e)}toString(){return Array.from(this._value).map((e=>"string"==typeof e?function(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t>>>0}(e):e)).join(":")}}};function ss(e){const t=Kr().getStackTop();t.client=e,t.scope.setClient(e)}const as=30;function is(e,t,n=fn(e.bufferSize||as)){let r={};function o(o){const s=[];if(Wn(o,((t,n)=>{const o=Yn(n);if(Qn(r,o)){const r=cs(t,n);e.recordDroppedEvent("ratelimit_backoff",o,r)}else s.push(t)})),0===s.length)return dn();const a=$n(o[0],s),i=t=>{Wn(a,((n,r)=>{const o=cs(n,r);e.recordDroppedEvent(t,Yn(r),o)}))};return n.add((()=>t({body:Hn(a,e.textEncoder)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&rr&&je.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),r=er(r,e),e)),(e=>{throw i("network_error"),e})))).then((e=>e),(e=>{if(e instanceof He)return rr&&je.error("Skipped sending event because buffer is full."),i("queue_overflow"),dn();throw e}))}return o.__sentry__baseTransport__=!0,{send:o,flush:e=>n.drain(e)}}function cs(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}const ls=100,us=5e3,ds=36e5;function ps(e,t){rr&&je.info(`[Offline]: ${e}`,t)}function hs(e){return t=>{const n=e(t),r=t.createStore?t.createStore(t):void 0;let o,s=us;function a(e,n,r){return o=["replay_event","replay_recording","client_report"],!Wn(e,((e,t)=>o.includes(t)))&&(!t.shouldStore||t.shouldStore(e,n,r));var o}function i(e){r&&(o&&clearTimeout(o),o=setTimeout((async()=>{o=void 0;const e=await r.pop();e&&(ps("Attempting to send previously queued event"),l(e).catch((e=>{ps("Failed to retry sending",e)})))}),e),"number"!=typeof o&&o.unref&&o.unref())}function c(){o||(i(s),s=Math.min(2*s,ds))}async function l(e){try{const t=await n.send(e);let r=ls;if(t)if(t.headers&&t.headers["retry-after"])r=Zn(t.headers["retry-after"]);else if((t.statusCode||0)>=400)return t;return i(r),s=us,t}catch(t){if(r&&await a(e,t,s))return await r.insert(e),c(),ps("Error sending. Event queued",t),{};throw t}}return t.flushAtStartup&&c(),{send:l,flush:e=>n.flush(e)}}}function fs(e,t){let n;return Wn(e,((e,r)=>(t.includes(r)&&(n=Array.isArray(e)?e[1]:void 0),!!n))),n}function gs(e){return[{type:"span"},e]}function ms(e,t){const n=t&&function(e){return void 0!==e.getClient}(t)?t.getClient():t,r=n&&n.getDsn(),o=n&&n.getOptions().tunnel;return function(e,t){return!!t&&e.includes(t.host)}(e,r)||function(e,t){if(!t)return!1;return ys(e)===ys(t)}(e,o)}function ys(e){return"/"===e[e.length-1]?e.slice(0,-1):e}const _s=new Map,vs=new Set;function bs(e,t){return function(e){if(Ie._sentryModuleMetadata)for(const t of Object.keys(Ie._sentryModuleMetadata)){const n=Ie._sentryModuleMetadata[t];if(vs.has(t))continue;vs.add(t);const r=e(t);for(const e of r.reverse())if(e.filename){_s.set(e.filename,n);break}}}(e),_s.get(t)}const Ss="ModuleMetadata",Ts=()=>({name:Ss,setupOnce(){},setup(e){"function"==typeof e.on&&e.on("beforeEnvelope",(e=>{Wn(e,((e,t)=>{if("event"===t){const t=Array.isArray(e)?e[1]:void 0;t&&(!function(e){try{e.exception.values.forEach((e=>{if(e.stacktrace)for(const t of e.stacktrace.frames||[])delete t.module_metadata}))}catch(e){}}(t),e[1]=t)}}))}))},processEvent:(e,t,n)=>(function(e,t){try{t.exception.values.forEach((t=>{if(t.stacktrace)for(const n of t.stacktrace.frames||[]){if(!n.filename)continue;const t=bs(e,n.filename);t&&(n.module_metadata=t)}}))}catch(e){}}(n.getOptions().stackParser,e),e)}),Es=Yo(Ss,Ts),ws={include:{cookies:!0,data:!0,headers:!0,ip:!1,query_string:!0,url:!0,user:{id:!0,username:!0,email:!0}},transactionNamingScheme:"methodPath"},Is="RequestData";Yo(Is,((e={})=>{const t=En,n={...ws,...e,include:{method:!0,...ws.include,...e.include,user:e.include&&"boolean"==typeof e.include.user?e.include.user:{...ws.include.user,...(e.include||{}).user}}};return{name:Is,setupOnce(){},processEvent(e,r,o){const{transactionNamingScheme:s}=n,{sdkProcessingMetadata:a={}}=e,i=a.request;if(!i)return e;const c=a.requestDataOptionsFromExpressHandler||a.requestDataOptionsFromGCPWrapper||function(e){const{transactionNamingScheme:t,include:{ip:n,user:r,...o}}=e,s=[];for(const[e,t]of Object.entries(o))t&&s.push(e);let a;if(void 0===r)a=!0;else if("boolean"==typeof r)a=r;else{const e=[];for(const[t,n]of Object.entries(r))n&&e.push(t);a=e}return{include:{ip:n,user:a,request:0!==s.length?s:void 0,transaction:t}}}(n),l=t(e,i,c);if("transaction"===e.type||"handler"===s)return l;const u=i._sentryTransaction;if(u){const e=mr(u).description||"",t="sentry.javascript.nextjs"===function(e){try{return e.getOptions()._metadata.sdk.name}catch(e){return}}(o)?e.startsWith("/api"):"path"!==s,[n]=Sn(i,{path:!0,method:t,customRoute:e});l.transaction=n}return l}}}));const ks=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],Cs=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],Rs="InboundFilters",xs=(e={})=>({name:Rs,setupOnce(){},processEvent(t,n,r){const o=r.getOptions(),s=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:ks],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:Cs],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(e,o);return function(e,t){if(t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e))return rr&&je.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${mt(e)}`),!0;if(function(e,t){if(e.type||!t||!t.length)return!1;return function(e){const t=[];e.message&&t.push(e.message);let n;try{n=e.exception.values[e.exception.values.length-1]}catch(e){}n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`));rr&&0===t.length&&je.error(`Could not extract message for event ${mt(e)}`);return t}(e).some((e=>ve(e,t)))}(e,t.ignoreErrors))return rr&&je.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${mt(e)}`),!0;if(function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;const n=e.transaction;return!!n&&ve(n,t)}(e,t.ignoreTransactions))return rr&&je.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${mt(e)}`),!0;if(function(e,t){if(!t||!t.length)return!1;const n=Ls(e);return!!n&&ve(n,t)}(e,t.denyUrls))return rr&&je.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${mt(e)}.\nUrl: ${Ls(e)}`),!0;if(!function(e,t){if(!t||!t.length)return!0;const n=Ls(e);return!n||ve(n,t)}(e,t.allowUrls))return rr&&je.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${mt(e)}.\nUrl: ${Ls(e)}`),!0;return!1}(t,s)?null:t}}),As=Yo(Rs,xs);function Ls(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(t):null}catch(t){return rr&&je.error(`Cannot extract url for event ${mt(e)}`),null}}let Os;const Ns="FunctionToString",Ds=new WeakMap,Ps=()=>({name:Ns,setupOnce(){Os=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=Ke(this),n=Ds.has(Rr())&&void 0!==t?t:this;return Os.apply(n,e)}}catch(e){}},setup(e){Ds.set(e,!0)}}),Ms=Yo(Ns,Ps),Fs="LinkedErrors",Us=Yo(Fs,((e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:Fs,setupOnce(){},preprocessEvent(e,r,o){const s=o.getOptions();be(tr,s.stackParser,s.maxValueLength,n,t,e,r)}}}));var js=Object.freeze({__proto__:null,FunctionToString:Ms,InboundFilters:As,LinkedErrors:Us});class Bs{constructor(e){this._client=e,this._buckets=new Map,this._interval=setInterval((()=>this.flush()),5e3)}add(e,t,n,r="none",o={},s=Rn()){const a=Math.floor(s),i=t.replace(/[^\w\-.]+/gi,"_");const c=function(e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[Ko(n)]=Jo(String(e[n])));return t}(o),l=function(e){return e.replace(/[^\w]+/gi,"_")}(r),u=function(e,t,n,r){return`${e}${t}${n}${Object.entries(Qe(r)).sort(((e,t)=>e[0].localeCompare(t[0])))}`}(e,i,l,c);let d=this._buckets.get(u);const p=d&&"s"===e?d.metric.weight:0;d?(d.metric.add(n),d.timestamp<a&&(d.timestamp=a)):(d={metric:new os[e](n),timestamp:a,metricType:e,name:i,unit:l,tags:c},this._buckets.set(u,d));!function(e,t,n,r,o,s){const a=ho();if(a){const i=vo(a)||new Map,c=`${e}:${t}@${r}`,l=i.get(s);if(l){const[,e]=l;i.set(s,[c,{min:Math.min(e.min,n),max:Math.max(e.max,n),count:e.count+=1,sum:e.sum+=n,tags:e.tags}])}else i.set(s,[c,{min:n,max:n,count:1,sum:n,tags:o}]);_o||(_o=new WeakMap),_o.set(a,i)}}(e,i,"string"==typeof n?d.metric.weight-p:n,l,o,u)}flush(){if(0!==this._buckets.size){if(this._client.captureAggregateMetrics){const e=Array.from(this._buckets).map((([,e])=>e));this._client.captureAggregateMetrics(e)}this._buckets.clear()}}close(){clearInterval(this._interval),this.flush()}}const $s="MetricsAggregator",Gs=()=>({name:$s,setupOnce(){},setup(e){e.metricsAggregator=new Bs(e)}});function Ws(e,t,n,r={}){const o=Rr(),s=xr();if(o){if(!o.metricsAggregator)return void(rr&&je.warn("No metrics aggregator enabled. Please add the MetricsAggregator integration to use metrics APIs"));const{unit:a,tags:i,timestamp:c}=r,{release:l,environment:u}=o.getOptions(),d=s.getTransaction(),p={};l&&(p.release=l),u&&(p.environment=u),d&&(p.transaction=mr(d).description||""),rr&&je.log(`Adding value of ${n} to ${e} metric ${t}`),o.metricsAggregator.add(e,t,n,a,{...p,...i},c)}}const qs={increment:function(e,t=1,n){Ws("c",e,t,n)},distribution:function(e,t,n){Ws("d",e,t,n)},set:function(e,t,n){Ws("s",e,t,n)},gauge:function(e,t,n){Ws("g",e,t,n)},MetricsAggregator:Yo($s,Gs),metricsAggregatorIntegration:Gs},Hs=js,Vs="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function zs(e){const t=nr([e,"call",e=>e(),"access",e=>e.getClient,"call",e=>e(),"optionalAccess",e=>e.getOptions,"call",e=>e()]);return"sentry"!==(nr([t,"optionalAccess",e=>e.instrumenter])||"sentry")}class Ys{static __initStatic(){this.id="Express"}constructor(e={}){this.name=Ys.id,this._router=e.router||e.app,this._methods=(Array.isArray(e.methods)?e.methods:[]).concat("use")}setupOnce(e,t){this._router?zs(t)?Vs&&je.log("Express Integration is skipped because of instrumenter configuration."):(function(e,t=[]){t.forEach((t=>function(e,t){const n=e[t];return e[t]=function(...e){return n.call(this,...function(e,t){return e.map((e=>"function"==typeof e?Ks(e,t):Array.isArray(e)?e.map((e=>"function"==typeof e?Ks(e,t):e)):e))}(e,t))},e}(e,t)))}(this._router,this._methods),function(e){const t="settings"in e;t&&void 0===e._router&&e.lazyrouter&&e.lazyrouter();const n=t?e._router:e;if(!n)return Vs&&je.debug("Cannot instrument router for URL Parameterization (did not find a valid router)."),void(Vs&&je.debug("Routing instrumentation is currently only supported in Express 4."));const r=Object.getPrototypeOf(n),o=r.process_params;r.process_params=function(e,t,n,r,s){n._reconstructedRoute||(n._reconstructedRoute="");const{layerRoutePath:a,isRegex:i,isArray:c,numExtraSegments:l}=function(e){let t=nr([e,"access",e=>e.route,"optionalAccess",e=>e.path]);const n=de(t),r=Array.isArray(t);if(!t){const[n]=Ie.process.versions.node.split(".").map(Number);n>=16&&(t=Xs(e.path,e.regexp,e.keys))}if(!t)return{isRegex:n,isArray:r,numExtraSegments:0};const o=r?Math.max((a=t,a.reduce(((e,t)=>e+yn(t.toString())),0)-yn(e.path||"")),0):0,s=function(e,t){if(e)return t.map((e=>e.toString())).join(",");return t&&t.toString()}(r,t);var a;return{layerRoutePath:s,isRegex:n,isArray:r,numExtraSegments:o}}(e);let u;(a||i||c)&&(n._hasParameters=!0),u=a||(function(e,t,n){const r=nr([mn(e||""),"optionalAccess",e=>e.split,"call",e=>e("/"),"access",e=>e.filter,"call",e=>e((e=>!!e))]);let o=0;const s=nr([t,"optionalAccess",e=>e.split,"call",e=>e("/"),"access",e=>e.filter,"call",e=>e((e=>!!e)),"access",e=>e.length])||0;return nr([n,"optionalAccess",e=>e.split,"call",e=>e("/"),"access",e=>e.filter,"call",e=>e((e=>nr([r,"optionalAccess",e=>e[s+o]])===e&&(o+=1,!0))),"access",e=>e.join,"call",e=>e("/")])}(n.originalUrl,n._reconstructedRoute,e.path)||"");const d=u.split("/").filter((e=>e.length>0&&(i||c||!e.includes("*")))).join("/");d&&d.length>0&&(n._reconstructedRoute+=`/${d}${i?"/":""}`);if(yn(mn(n.originalUrl||""))+l===yn(n._reconstructedRoute)){n._hasParameters||n._reconstructedRoute!==n.originalUrl&&(n._reconstructedRoute=n.originalUrl?mn(n.originalUrl):n.originalUrl);const e=r.__sentry_transaction,t=e&&mr(e).data||{};if(e&&"custom"!==t[So]){const t=n._reconstructedRoute||"/",[r,o]=Sn(n,{path:!0,method:!0,customRoute:t});e.updateName(r),e.setAttribute(So,o)}}return o.call(this,e,t,n,r,s)}}(this._router)):Vs&&je.error("ExpressIntegration is missing an Express instance")}}function Ks(e,t){const n=e.length;switch(n){case 2:return function(n,r){const o=r.__sentry_transaction;if(o){const n=o.startChild({description:e.name,op:`middleware.express.${t}`,origin:"auto.middleware.express"});r.once("finish",(()=>{n.end()}))}return e.call(this,n,r)};case 3:return function(n,r,o){const s=nr([r.__sentry_transaction,"optionalAccess",e=>e.startChild,"call",n=>n({description:e.name,op:`middleware.express.${t}`,origin:"auto.middleware.express"})]);e.call(this,n,r,(function(...e){nr([s,"optionalAccess",e=>e.end,"call",e=>e()]),o.call(this,...e)}))};case 4:return function(n,r,o,s){const a=nr([o.__sentry_transaction,"optionalAccess",e=>e.startChild,"call",n=>n({description:e.name,op:`middleware.express.${t}`,origin:"auto.middleware.express"})]);e.call(this,n,r,o,(function(...e){nr([a,"optionalAccess",e=>e.end,"call",e=>e()]),s.call(this,...e)}))};default:throw new Error(`Express middleware takes 2-4 arguments. Got: ${n}`)}}Ys.__initStatic();const Xs=(e,t,n)=>{if(!(e&&t&&n&&0!==Object.keys(n).length&&nr([n,"access",e=>e[0],"optionalAccess",e=>e.offset])))return;const r=n.sort(((e,t)=>e.offset-t.offset)),o=new RegExp(t,`${t.flags}d`).exec(e);if(!o||!o.indices)return;const[,...s]=o.indices;if(s.length!==r.length)return;let a=e,i=0;return s.forEach(((e,t)=>{if(e){const[n,o]=e,s=a.substring(0,n-i),c=`:${r[t].name}`,l=a.substring(o-i);a=s+c+l,i+=o-n-c.length}})),a};class Js{static __initStatic(){this.id="Postgres"}constructor(e={}){this.name=Js.id,this._usePgNative=!!e.usePgNative,this._module=e.module}loadDependency(){return this._module=this._module||en("pg")}setupOnce(e,t){if(zs(t))return void(Vs&&je.log("Postgres Integration is skipped because of instrumenter configuration."));const n=this.loadDependency();if(!n)return void(Vs&&je.error("Postgres Integration was unable to require `pg` package."));const r=this._usePgNative?nr([n,"access",e=>e.native,"optionalAccess",e=>e.Client]):n.Client;r?Ve(r.prototype,"query",(function(e){return function(n,r,o){const s=t().getScope().getSpan(),a={"db.system":"postgresql"};try{this.database&&(a["db.name"]=this.database),this.host&&(a["server.address"]=this.host),this.port&&(a["server.port"]=this.port),this.user&&(a["db.user"]=this.user)}catch(e){}const i=nr([s,"optionalAccess",e=>e.startChild,"call",e=>e({description:"string"==typeof n?n:n.text,op:"db",origin:"auto.db.postgres",data:a})]);if("function"==typeof o)return e.call(this,n,r,(function(e,t){nr([i,"optionalAccess",e=>e.end,"call",e=>e()]),o(e,t)}));if("function"==typeof r)return e.call(this,n,(function(e,t){nr([i,"optionalAccess",e=>e.end,"call",e=>e()]),r(e,t)}));const c=void 0!==r?e.call(this,n,r):e.call(this,n);return pe(c)?c.then((e=>(nr([i,"optionalAccess",e=>e.end,"call",e=>e()]),e))):(nr([i,"optionalAccess",e=>e.end,"call",e=>e()]),c)}})):Vs&&je.error("Postgres Integration was unable to access 'pg-native' bindings.")}}Js.__initStatic();class Zs{static __initStatic(){this.id="Mysql"}constructor(){this.name=Zs.id}loadDependency(){return this._module=this._module||en("mysql/lib/Connection.js")}setupOnce(e,t){if(zs(t))return void(Vs&&je.log("Mysql Integration is skipped because of instrumenter configuration."));const n=this.loadDependency();if(!n)return void(Vs&&je.error("Mysql Integration was unable to require `mysql` package."));let r;try{n.prototype.connect=new Proxy(n.prototype.connect,{apply:(e,t,n)=>(r||(r=t.config),e.apply(t,n))})}catch(e){Vs&&je.error("Mysql Integration was unable to instrument `mysql` config.")}function o(e){if(!e)return;const t=r?{"server.address":r.host,"server.port":r.port,"db.user":r.user}:{};Object.keys(t).forEach((n=>{e.setAttribute(n,t[n])})),e.end()}Ve(n,"createQuery",(function(e){return function(n,r,s){const a=nr([t().getScope().getSpan(),"optionalAccess",e=>e.startChild,"call",e=>e({description:"string"==typeof n?n:n.sql,op:"db",origin:"auto.db.mysql",data:{"db.system":"mysql"}})]);if("function"==typeof s)return e.call(this,n,r,(function(e,t,n){o(a),s(e,t,n)}));if("function"==typeof r)return e.call(this,n,(function(e,t,n){o(a),r(e,t,n)}));const i=e.call(this,n,r);return i.on("end",(()=>{o(a)})),i}}))}}Zs.__initStatic();const Qs=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"],ea={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],find:["query"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]};class ta{static __initStatic(){this.id="Mongo"}constructor(e={}){this.name=ta.id,this._operations=Array.isArray(e.operations)?e.operations:Qs,this._describeOperations=!("describeOperations"in e)||e.describeOperations,this._useMongoose=!!e.useMongoose}loadDependency(){const e=this._useMongoose?"mongoose":"mongodb";return this._module=this._module||en(e)}setupOnce(e,t){if(zs(t))return void(Vs&&je.log("Mongo Integration is skipped because of instrumenter configuration."));const n=this.loadDependency();if(n)this._instrumentOperations(n.Collection,this._operations,t);else{const e=this._useMongoose?"mongoose":"mongodb";Vs&&je.error(`Mongo Integration was unable to require \`${e}\` package.`)}}_instrumentOperations(e,t,n){t.forEach((t=>this._patchOperation(e,t,n)))}_patchOperation(e,t,n){if(!(t in e.prototype))return;const r=this._getSpanContextFromOperationArguments.bind(this);Ve(e.prototype,t,(function(e){return function(...o){const s=o[o.length-1],a=n(),i=a.getScope(),c=a.getClient(),l=i.getSpan(),u=nr([c,"optionalAccess",e=>e.getOptions,"call",e=>e(),"access",e=>e.sendDefaultPii]);if("function"!=typeof s||"mapReduce"===t&&2===o.length){const n=nr([l,"optionalAccess",e=>e.startChild,"call",e=>e(r(this,t,o,u))]),s=e.call(this,...o);if(pe(s))return s.then((e=>(nr([n,"optionalAccess",e=>e.end,"call",e=>e()]),e)));if((d=s)&&"object"==typeof d&&d.once&&"function"==typeof d.once){const e=s;try{e.once("close",(()=>{nr([n,"optionalAccess",e=>e.end,"call",e=>e()])}))}catch(e){nr([n,"optionalAccess",e=>e.end,"call",e=>e()])}return e}return nr([n,"optionalAccess",e=>e.end,"call",e=>e()]),s}var d;const p=nr([l,"optionalAccess",e=>e.startChild,"call",e=>e(r(this,t,o.slice(0,-1)))]);return e.call(this,...o.slice(0,-1),(function(e,t){nr([p,"optionalAccess",e=>e.end,"call",e=>e()]),s(e,t)}))}}))}_getSpanContextFromOperationArguments(e,t,n,r=!1){const o={"db.system":"mongodb","db.name":e.dbName,"db.operation":t,"db.mongodb.collection":e.collectionName},s={op:"db",origin:"auto.db.mongo",description:t,data:o},a=ea[t],i=Array.isArray(this._describeOperations)?this._describeOperations.includes(t):this._describeOperations;if(!a||!i||!r)return s;try{if("mapReduce"===t){const[e,t]=n;o[a[0]]="string"==typeof e?e:e.name||"<anonymous>",o[a[1]]="string"==typeof t?t:t.name||"<anonymous>"}else for(let e=0;e<a.length;e++)o[`db.mongodb.${a[e]}`]=JSON.stringify(n[e])}catch(e){}return s}}ta.__initStatic();class na{static __initStatic(){this.id="Prisma"}constructor(e={}){if(this.name=na.id,(t=e.client)&&t.$use&&!e.client._sentryInstrumented){ze(e.client,"_sentryInstrumented",!0);const t={};try{const n=e.client._engineConfig;if(n){const{activeProvider:e,clientVersion:r}=n;e&&(t["db.system"]=e),r&&(t["db.prisma.version"]=r)}}catch(e){}e.client.$use(((e,n)=>{if(zs(Kr))return n(e);const r=e.action,o=e.model;return uo({name:o?`${o} ${r}`:r,onlyIfParent:!0,op:"db.prisma",attributes:{[wo]:"auto.db.prisma"},data:{...t,"db.operation":r}},(()=>n(e)))}))}else Vs&&je.warn("Unsupported Prisma client provided to PrismaIntegration. Provided client:",e.client);var t}setupOnce(){}}na.__initStatic();class ra{static __initStatic(){this.id="GraphQL"}constructor(){this.name=ra.id}loadDependency(){return this._module=this._module||en("graphql/execution/execute.js")}setupOnce(e,t){if(zs(t))return void(Vs&&je.log("GraphQL Integration is skipped because of instrumenter configuration."));const n=this.loadDependency();n?Ve(n,"execute",(function(e){return function(...n){const r=t().getScope(),o=r.getSpan(),s=nr([o,"optionalAccess",e=>e.startChild,"call",e=>e({description:"execute",op:"graphql.execute",origin:"auto.graphql.graphql"})]);nr([r,"optionalAccess",e=>e.setSpan,"call",e=>e(s)]);const a=e.call(this,...n);return pe(a)?a.then((e=>(nr([s,"optionalAccess",e=>e.end,"call",e=>e()]),nr([r,"optionalAccess",e=>e.setSpan,"call",e=>e(o)]),e))):(nr([s,"optionalAccess",e=>e.end,"call",e=>e()]),nr([r,"optionalAccess",e=>e.setSpan,"call",e=>e(o)]),a)}})):Vs&&je.error("GraphQL Integration was unable to require graphql/execution package.")}}ra.__initStatic();class oa{static __initStatic(){this.id="Apollo"}constructor(e={useNestjs:!1}){this.name=oa.id,this._useNest=!!e.useNestjs}loadDependency(){return this._useNest?this._module=this._module||en("@nestjs/graphql"):this._module=this._module||en("apollo-server-core"),this._module}setupOnce(e,t){if(zs(t))Vs&&je.log("Apollo Integration is skipped because of instrumenter configuration.");else if(this._useNest){const e=this.loadDependency();if(!e)return void(Vs&&je.error("Apollo-NestJS Integration was unable to require @nestjs/graphql package."));Ve(e.GraphQLFactory.prototype,"mergeWithSchema",(function(e){return function(...n){return Ve(this.resolversExplorerService,"explore",(function(e){return function(){return sa(bt(e.call(this)),t)}})),e.call(this,...n)}}))}else{const e=this.loadDependency();if(!e)return void(Vs&&je.error("Apollo Integration was unable to require apollo-server-core package."));Ve(e.ApolloServerBase.prototype,"constructSchema",(function(e){return function(){if(!this.config.resolvers)return Vs&&(this.config.schema?(je.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `schema` property.If you are using NestJS with Apollo, please use `Sentry.Integrations.Apollo({ useNestjs: true })` instead."),je.warn()):this.config.modules&&je.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `modules` property."),je.error("Skipping tracing as no resolvers found on the `ApolloServer` instance.")),e.call(this);const n=bt(this.config.resolvers);return this.config.resolvers=sa(n,t),e.call(this)}}))}}}function sa(e,t){return e.map((e=>(Object.keys(e).forEach((n=>{Object.keys(e[n]).forEach((r=>{"function"==typeof e[n][r]&&function(e,t,n,r){Ve(e[t],n,(function(e){return function(...o){const s=nr([r().getScope().getSpan(),"optionalAccess",e=>e.startChild,"call",e=>e({description:`${t}.${n}`,op:"graphql.resolve",origin:"auto.graphql.apollo"})]),a=e.call(this,...o);return pe(a)?a.then((e=>(nr([s,"optionalAccess",e=>e.end,"call",e=>e()]),e))):(nr([s,"optionalAccess",e=>e.end,"call",e=>e()]),a)}}))}(e,n,r,t)}))})),e)))}oa.__initStatic();const aa=Ie;function ia(){aa.document?aa.document.addEventListener("visibilitychange",(()=>{const e=eo();if(aa.document.hidden&&e){const t="cancelled",{op:n,status:r}=mr(e);Vs&&je.log(`[Tracing] Transaction: ${t} -> since tab moved to the background, op: ${n}`),r||e.setStatus(t),e.setTag("visibilitychange","document.hidden"),e.end()}})):Vs&&je.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const ca=(e,t,n)=>{let r,o;return s=>{t.value>=0&&(s||n)&&(o=t.value-(r||0),(o||void 0===r)&&(r=t.value,t.delta=o,e(t)))}},la=()=>aa.__WEB_VITALS_POLYFILL__?aa.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||(()=>{const e=aa.performance.timing,t=aa.performance.navigation.type,n={entryType:"navigation",startTime:0,type:2==t?"back_forward":1===t?"reload":"navigate"};for(const t in e)"navigationStart"!==t&&"toJSON"!==t&&(n[t]=Math.max(e[t]-e.navigationStart,0));return n})()):aa.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],ua=()=>{const e=la();return e&&e.activationStart||0},da=(e,t)=>{const n=la();let r="navigate";return n&&(r=aa.document&&aa.document.prerendering||ua()>0?"prerender":n.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:`v3-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:r}},pa=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver((e=>{t(e.getEntries())}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},ha=(e,t)=>{const n=r=>{"pagehide"!==r.type&&"hidden"!==aa.document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};aa.document&&(addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0))},fa=(e,t={})=>{const n=da("CLS",0);let r,o=0,s=[];const a=e=>{e.forEach((e=>{if(!e.hadRecentInput){const t=s[0],a=s[s.length-1];o&&0!==s.length&&e.startTime-a.startTime<1e3&&e.startTime-t.startTime<5e3?(o+=e.value,s.push(e)):(o=e.value,s=[e]),o>n.value&&(n.value=o,n.entries=s,r&&r())}}))},i=pa("layout-shift",a);if(i){r=ca(e,n,t.reportAllChanges);const o=()=>{a(i.takeRecords()),r(!0)};return ha(o),o}};let ga=-1;const ma=()=>(ga<0&&(aa.document&&aa.document.visibilityState&&(ga="hidden"!==aa.document.visibilityState||aa.document.prerendering?1/0:0),ha((({timeStamp:e})=>{ga=e}),!0)),{get firstHiddenTime(){return ga}}),ya=e=>{const t=ma(),n=da("FID");let r;const o=e=>{e.startTime<t.firstHiddenTime&&(n.value=e.processingStart-e.startTime,n.entries.push(e),r(!0))},s=e=>{e.forEach(o)},a=pa("first-input",s);r=ca(e,n),a&&ha((()=>{s(a.takeRecords()),a.disconnect()}),!0)};let _a=0,va=1/0,ba=0;const Sa=e=>{e.forEach((e=>{e.interactionId&&(va=Math.min(va,e.interactionId),ba=Math.max(ba,e.interactionId),_a=ba?(ba-va)/7+1:0)}))};let Ta;const Ea=()=>{"interactionCount"in performance||Ta||(Ta=pa("event",Sa,{type:"event",buffered:!0,durationThreshold:0}))},wa=()=>Ta?_a:performance.interactionCount||0,Ia=[],ka={},Ca=e=>{const t=Ia[Ia.length-1],n=ka[e.interactionId];if(n||Ia.length<10||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{const t={id:e.interactionId,latency:e.duration,entries:[e]};ka[t.id]=t,Ia.push(t)}Ia.sort(((e,t)=>t.latency-e.latency)),Ia.splice(10).forEach((e=>{delete ka[e.id]}))}},Ra=(e,t)=>{t=t||{},Ea();const n=da("INP");let r;const o=e=>{e.forEach((e=>{if(e.interactionId&&Ca(e),"first-input"===e.entryType){!Ia.some((t=>t.entries.some((t=>e.duration===t.duration&&e.startTime===t.startTime))))&&Ca(e)}}));const t=(()=>{const e=Math.min(Ia.length-1,Math.floor(wa()/50));return Ia[e]})();t&&t.latency!==n.value&&(n.value=t.latency,n.entries=t.entries,r())},s=pa("event",o,{durationThreshold:t.durationThreshold||40});r=ca(e,n,t.reportAllChanges),s&&(s.observe({type:"first-input",buffered:!0}),ha((()=>{o(s.takeRecords()),n.value<0&&wa()>0&&(n.value=0,n.entries=[]),r(!0)})))},xa={},Aa=e=>{const t=ma(),n=da("LCP");let r;const o=e=>{const o=e[e.length-1];if(o){const e=Math.max(o.startTime-ua(),0);e<t.firstHiddenTime&&(n.value=e,n.entries=[o],r())}},s=pa("largest-contentful-paint",o);if(s){r=ca(e,n);const t=()=>{xa[n.id]||(o(s.takeRecords()),s.disconnect(),xa[n.id]=!0,r(!0))};return["keydown","click"].forEach((e=>{aa.document&&addEventListener(e,t,{once:!0,capture:!0})})),ha(t,!0),t}},La=e=>{aa.document&&(aa.document.prerendering?addEventListener("prerenderingchange",(()=>La(e)),!0):"complete"!==aa.document.readyState?addEventListener("load",(()=>La(e)),!0):setTimeout(e,0))},Oa=(e,t)=>{t=t||{};const n=da("TTFB"),r=ca(e,n,t.reportAllChanges);La((()=>{const e=la();if(e){if(n.value=Math.max(e.responseStart-ua(),0),n.value<0||n.value>performance.now())return;n.entries=[e],r(!0)}}))},Na={},Da={};let Pa,Ma,Fa,Ua,ja;function Ba(e,t=!1){return Ya("lcp",e,Ha,Fa,t)}function $a(e,t){return Ka(e,t),Da[e]||(!function(e){const t={};"event"===e&&(t.durationThreshold=0);pa(e,(t=>{Ga(e,{entries:t})}),t)}(e),Da[e]=!0),Xa(e,t)}function Ga(e,t){const n=Na[e];if(n&&n.length)for(const r of n)try{r(t)}catch(t){Vs&&je.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${at(r)}\nError:`,t)}}function Wa(){return fa((e=>{Ga("cls",{metric:e}),Pa=e}),{reportAllChanges:!0})}function qa(){return ya((e=>{Ga("fid",{metric:e}),Ma=e}))}function Ha(){return Aa((e=>{Ga("lcp",{metric:e}),Fa=e}))}function Va(){return Oa((e=>{Ga("ttfb",{metric:e}),Ua=e}))}function za(){return Ra((e=>{Ga("inp",{metric:e}),ja=e}))}function Ya(e,t,n,r,o=!1){let s;return Ka(e,t),Da[e]||(s=n(),Da[e]=!0),r&&t({metric:r}),Xa(e,t,o?s:void 0)}function Ka(e,t){Na[e]=Na[e]||[],Na[e].push(t)}function Xa(e,t,n){return()=>{n&&n();const r=Na[e];if(!r)return;const o=r.indexOf(t);-1!==o&&r.splice(o,1)}}function Ja(e){return"number"==typeof e&&isFinite(e)}function Za(e,{startTimestamp:t,...n}){return t&&e.startTimestamp>t&&(e.startTimestamp=t),e.startChild({startTimestamp:t,...n})}const Qa=2147483647;function ei(e){return e/1e3}function ti(){return aa&&aa.addEventListener&&aa.performance}let ni,ri,oi=0,si={};function ai(){const e=ti();if(e&&xn){e.mark&&aa.performance.mark("sentry-tracing-init");const t=Ya("fid",(({metric:e})=>{const t=e.entries[e.entries.length-1];if(!t)return;const n=ei(xn),r=ei(t.startTime);Vs&&je.log("[Measurements] Adding FID"),si.fid={value:e.value,unit:"millisecond"},si["mark.fid"]={value:n+r,unit:"second"}}),qa,Ma),n=function(e,t=!1){return Ya("cls",e,Wa,Pa,t)}((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(Vs&&je.log("[Measurements] Adding CLS"),si.cls={value:e.value,unit:""},ri=t)}),!0),r=Ba((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(Vs&&je.log("[Measurements] Adding LCP"),si.lcp={value:e.value,unit:"millisecond"},ni=t)}),!0),o=function(e){return Ya("ttfb",e,Va,Ua)}((({metric:e})=>{e.entries[e.entries.length-1]&&(Vs&&je.log("[Measurements] Adding TTFB"),si.ttfb={value:e.value,unit:"millisecond"})}));return()=>{t(),n(),r(),o()}}return()=>{}}function ii(){$a("longtask",(({entries:e})=>{for(const t of e){const e=eo();if(!e)return;const n=ei(xn+t.startTime),r=ei(t.duration);e.startChild({description:"Main UI thread blocked",op:"ui.long-task",origin:"auto.ui.browser.metrics",startTimestamp:n,endTimestamp:n+r})}}))}function ci(){$a("event",(({entries:e})=>{for(const t of e){const e=eo();if(!e)return;if("click"===t.name){const n=ei(xn+t.startTime),r=ei(t.duration),o={description:Ae(t.target),op:`ui.interaction.${t.name}`,origin:"auto.ui.browser.metrics",startTimestamp:n,endTimestamp:n+r},s=De(t.target);s&&(o.attributes={"ui.component_name":s}),e.startChild(o)}}}))}function li(e,t){if(ti()&&xn){const n=function(e,t){return n=({metric:n})=>{if(void 0===n.value)return;const r=n.entries.find((e=>e.duration===n.value&&void 0!==ui[e.name])),o=Rr();if(!r||!o)return;const s=ui[r.name],a=o.getOptions(),i=ei(xn+r.startTime),c=ei(n.value),l=void 0!==r.interactionId?e[r.interactionId]:void 0;if(void 0===l)return;const{routeName:u,parentContext:d,activeTransaction:p,user:h,replayId:f}=l,g=void 0!==h?h.email||h.id||h.ip_address:void 0,m=void 0!==p?p.getProfileId():void 0,y=new ko({startTimestamp:i,endTimestamp:i+c,op:`ui.interaction.${s}`,name:Ae(r.target),attributes:{release:a.release,environment:a.environment,transaction:u,...void 0!==g&&""!==g?{user:g}:{},...void 0!==m?{profile_id:m}:{},...void 0!==f?{replay_id:f}:{}},exclusiveTime:n.value,measurements:{inp:{value:n.value,unit:"millisecond"}}}),_=function(e,t,n){if(!lo(t))return!1;let r;return r=void 0!==e&&"function"==typeof t.tracesSampler?t.tracesSampler({transactionContext:e,name:e.name,parentSampled:e.parentSampled,attributes:{...e.data,...e.attributes},location:aa.location}):void 0!==e&&void 0!==e.sampled?e.sampled:void 0!==t.tracesSampleRate?t.tracesSampleRate:1,No(r)?!0===r?n:!1===r?0:r*n:(Vs&&je.warn("[Tracing] Discarding interaction span because of invalid sample rate."),!1)}(d,a,t);if(_&&Math.random()<_){const e=y?function(e,t){const n={sent_at:(new Date).toISOString()};return t&&(n.dsn=$e(t)),$n(n,e.map(gs))}([y],o.getDsn()):void 0,t=o&&o.getTransport();t&&e&&t.send(e).then(null,(e=>{Vs&&je.error("Error while sending interaction:",e)}))}},Ya("inp",n,za,ja);var n}(e,t);return()=>{n()}}return()=>{}}const ui={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function di(e){const t=ti();if(!t||!aa.performance.getEntries||!xn)return;Vs&&je.log("[Tracing] Adding & adjusting spans using Performance API");const n=ei(xn),r=t.getEntries(),{op:o,start_timestamp:s}=mr(e);if(r.slice(oi).forEach((t=>{const r=ei(t.startTime),o=ei(t.duration);if(!("navigation"===e.op&&s&&n+r<s))switch(t.entryType){case"navigation":!function(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach((r=>{pi(e,t,r,n)})),pi(e,t,"secureConnection",n,"TLS/SSL","connectEnd"),pi(e,t,"fetch",n,"cache","domainLookupStart"),pi(e,t,"domainLookup",n,"DNS"),function(e,t,n){t.responseEnd&&(Za(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"request",startTimestamp:n+ei(t.requestStart),endTimestamp:n+ei(t.responseEnd)}),Za(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"response",startTimestamp:n+ei(t.responseStart),endTimestamp:n+ei(t.responseEnd)}))}(e,t,n)}(e,t,n);break;case"mark":case"paint":case"measure":{!function(e,t,n,r,o){const s=o+n,a=s+r;Za(e,{description:t.name,endTimestamp:a,op:t.entryType,origin:"auto.resource.browser.metrics",startTimestamp:s})}(e,t,r,o,n);const s=ma(),a=t.startTime<s.firstHiddenTime;"first-paint"===t.name&&a&&(Vs&&je.log("[Measurements] Adding FP"),si.fp={value:t.startTime,unit:"millisecond"}),"first-contentful-paint"===t.name&&a&&(Vs&&je.log("[Measurements] Adding FCP"),si.fcp={value:t.startTime,unit:"millisecond"});break}case"resource":!function(e,t,n,r,o,s){if("xmlhttprequest"===t.initiatorType||"fetch"===t.initiatorType)return;const a=gn(n),i={};hi(i,t,"transferSize","http.response_transfer_size"),hi(i,t,"encodedBodySize","http.response_content_length"),hi(i,t,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in t&&(i["resource.render_blocking_status"]=t.renderBlockingStatus);a.protocol&&(i["url.scheme"]=a.protocol.split(":").pop());a.host&&(i["server.address"]=a.host);i["url.same_origin"]=n.includes(aa.location.origin);const c=s+r,l=c+o;Za(e,{description:n.replace(aa.location.origin,""),endTimestamp:l,op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",origin:"auto.resource.browser.metrics",startTimestamp:c,data:i})}(e,t,t.name,r,o,n)}})),oi=Math.max(r.length-1,0),function(e){const t=aa.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setTag("effectiveConnectionType",n.effectiveType),n.type&&e.setTag("connectionType",n.type),Ja(n.rtt)&&(si["connection.rtt"]={value:n.rtt,unit:"millisecond"}));Ja(t.deviceMemory)&&e.setTag("deviceMemory",`${t.deviceMemory} GB`);Ja(t.hardwareConcurrency)&&e.setTag("hardwareConcurrency",String(t.hardwareConcurrency))}(e),"pageload"===o){!function(e){const t=la();if(!t)return;const{responseStart:n,requestStart:r}=t;r<=n&&(Vs&&je.log("[Measurements] Adding TTFB Request Time"),e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}(si),["fcp","fp","lcp"].forEach((e=>{if(!si[e]||!s||n>=s)return;const t=si[e].value,r=n+ei(t),o=Math.abs(1e3*(r-s)),a=o-t;Vs&&je.log(`[Measurements] Normalized ${e} from ${t} to ${o} (${a})`),si[e].value=o}));const t=si["mark.fid"];t&&si.fid&&(Za(e,{description:"first input delay",endTimestamp:t.value+ei(si.fid.value),op:"ui.action",origin:"auto.ui.browser.metrics",startTimestamp:t.value}),delete si["mark.fid"]),"fcp"in si||delete si.cls,Object.keys(si).forEach((e=>{Uo(e,si[e].value,si[e].unit)})),function(e){ni&&(Vs&&je.log("[Measurements] Adding LCP Data"),ni.element&&e.setTag("lcp.element",Ae(ni.element)),ni.id&&e.setTag("lcp.id",ni.id),ni.url&&e.setTag("lcp.url",ni.url.trim().slice(0,200)),e.setTag("lcp.size",ni.size));ri&&ri.sources&&(Vs&&je.log("[Measurements] Adding CLS Data"),ri.sources.forEach(((t,n)=>e.setTag(`cls.source.${n+1}`,Ae(t.node)))))}(e)}ni=void 0,ri=void 0,si={}}function pi(e,t,n,r,o,s){const a=s?t[s]:t[`${n}End`],i=t[`${n}Start`];i&&a&&Za(e,{op:"browser",origin:"auto.browser.browser.metrics",description:o||n,startTimestamp:r+ei(i),endTimestamp:r+ei(a)})}function hi(e,t,n,r){const o=t[n];null!=o&&o<Qa&&(e[r]=o)}function fi(e,t,n,r,o="auto.http.browser"){if(!lo()||!e.fetchData)return;const s=t(e.fetchData.url);if(e.endTimestamp&&s){const t=e.fetchData.__span;if(!t)return;const n=r[t];return void(n&&(!function(e,t){if(t.response){io(e,t.response.status);const n=t.response&&t.response.headers&&t.response.headers.get("content-length");if(n){const t=parseInt(n);t>0&&e.setAttribute("http.response_content_length",t)}}else t.error&&e.setStatus("internal_error");e.end()}(n,e),delete r[t]))}const a=xr(),i=Rr(),{method:c,url:l}=e.fetchData,u=function(e){try{return new URL(e).href}catch(e){return}}(l),d=u?gn(u).host:void 0,p=s?po({name:`${c} ${l}`,onlyIfParent:!0,attributes:{url:l,type:"fetch","http.method":c,"http.url":u,"server.address":d,[wo]:o},op:"http.client"}):void 0;if(p&&(e.fetchData.__span=p.spanContext().spanId,r[p.spanContext().spanId]=p),n(e.fetchData.url)&&i){const t=e.args[0];e.args[1]=e.args[1]||{};const n=e.args[1];n.headers=function(e,t,n,r,o){const s=o||n.getSpan(),a=Xr(),{traceId:i,spanId:c,sampled:l,dsc:u}={...a.getPropagationContext(),...n.getPropagationContext()},d=s?hr(s):Bn(i,c,l),p=Pn(u||(s?Mr(s):Pr(i,t,n))),h=r.headers||("undefined"!=typeof Request&&fe(e,Request)?e.headers:void 0);if(h){if("undefined"!=typeof Headers&&fe(h,Headers)){const e=new Headers(h);return e.append("sentry-trace",d),p&&e.append(An,p),e}if(Array.isArray(h)){const e=[...h,["sentry-trace",d]];return p&&e.push([An,p]),e}{const e="baggage"in h?h.baggage:void 0,t=[];return Array.isArray(e)?t.push(...e):e&&t.push(e),p&&t.push(p),{...h,"sentry-trace":d,baggage:t.length>0?t.join(","):void 0}}}return{"sentry-trace":d,baggage:p}}(t,i,a,n,p)}return p}const gi=["localhost",/^\/(?!\/)/],mi={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,tracingOrigins:gi,tracePropagationTargets:gi};function yi(e){const{traceFetch:t,traceXHR:n,tracePropagationTargets:r,tracingOrigins:o,shouldCreateSpanForRequest:s,enableHTTPTimings:a}={traceFetch:mi.traceFetch,traceXHR:mi.traceXHR,...e},i="function"==typeof s?s:e=>!0,c=e=>function(e,t){return ve(e,t||gi)}(e,r||o),l={};t&&Nt((e=>{const t=fi(e,i,c,l);if(t){const n=bi(e.fetchData.url),r=n?gn(n).host:void 0;t.setAttributes({"http.url":n,"server.address":r})}a&&t&&_i(t)})),n&&Xt((e=>{const t=function(e,t,n,r){const o=e.xhr,s=o&&o[Kt];if(!lo()||!o||o.__sentry_own_request__||!s)return;const a=t(s.url);if(e.endTimestamp&&a){const e=o.__sentry_xhr_span_id__;if(!e)return;const t=r[e];return void(t&&void 0!==s.status_code&&(io(t,s.status_code),t.end(),delete r[e]))}const i=xr(),c=Xr(),l=bi(s.url),u=l?gn(l).host:void 0,d=a?po({name:`${s.method} ${s.url}`,onlyIfParent:!0,attributes:{type:"xhr","http.method":s.method,"http.url":l,url:s.url,"server.address":u,[wo]:"auto.http.browser"},op:"http.client"}):void 0;d&&(o.__sentry_xhr_span_id__=d.spanContext().spanId,r[o.__sentry_xhr_span_id__]=d);const p=Rr();if(o.setRequestHeader&&n(s.url)&&p){const{traceId:e,spanId:t,sampled:n,dsc:r}={...c.getPropagationContext(),...i.getPropagationContext()};!function(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader(An,n)}catch(e){}}(o,d?hr(d):Bn(e,t,n),Pn(r||(d?Mr(d):Pr(e,p,i))))}return d}(e,i,c,l);a&&t&&_i(t)}))}function _i(e){const{url:t}=mr(e).data||{};if(!t||"string"!=typeof t)return;const n=$a("resource",(({entries:r})=>{r.forEach((r=>{if(function(e){return"resource"===e.entryType&&"initiatorType"in e&&"string"==typeof e.nextHopProtocol&&("fetch"===e.initiatorType||"xmlhttprequest"===e.initiatorType)}(r)&&r.name.endsWith(t)){(function(e){const{name:t,version:n}=function(e){let t="unknown",n="unknown",r="";for(const o of e){if("/"===o){[t,n]=e.split("/");break}if(!isNaN(Number(o))){t="h"===r?"http":r,n=e.split(r)[1];break}r+=o}r===e&&(t=r);return{name:t,version:n}}(e.nextHopProtocol),r=[];if(r.push(["network.protocol.version",n],["network.protocol.name",t]),!xn)return r;return[...r,["http.request.redirect_start",vi(e.redirectStart)],["http.request.fetch_start",vi(e.fetchStart)],["http.request.domain_lookup_start",vi(e.domainLookupStart)],["http.request.domain_lookup_end",vi(e.domainLookupEnd)],["http.request.connect_start",vi(e.connectStart)],["http.request.secure_connection_start",vi(e.secureConnectionStart)],["http.request.connection_end",vi(e.connectEnd)],["http.request.request_start",vi(e.requestStart)],["http.request.response_start",vi(e.responseStart)],["http.request.response_end",vi(e.responseEnd)]]})(r).forEach((t=>e.setAttribute(...t))),setTimeout(n)}}))}))}function vi(e=0){return((xn||performance.timeOrigin)+e)/1e3}function bi(e){try{return new URL(e,aa.location.origin).href}catch(e){return}}const Si={...Ro,markBackgroundTransactions:!0,routingInstrumentation:function(e,t=!0,n=!0){if(!aa||!aa.location)return void(Vs&&je.warn("Could not initialize routing instrumentation due to invalid location"));let r,o=aa.location.href;t&&(r=e({name:aa.location.pathname,startTimestamp:xn?xn/1e3:void 0,op:"pageload",origin:"auto.pageload.browser",metadata:{source:"url"}})),n&&Vt((({to:t,from:n})=>{void 0===n&&o&&-1!==o.indexOf(t)?o=void 0:n!==t&&(o=void 0,r&&(Vs&&je.log(`[Tracing] Finishing current transaction with op: ${r.op}`),r.end()),r=e({name:aa.location.pathname,op:"navigation",origin:"auto.navigation.browser",metadata:{source:"url"}}))}))},startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,enableInp:!1,interactionsSampleRate:1,_experiments:{},...mi};function Ti(e){const t=Ne(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}function Ei(e){const t=e.attributes&&e.attributes[So],n=e.data&&e.data[So],r=e.metadata&&e.metadata.source;return t||n||r}const wi={...Ro,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableInp:!1,interactionsSampleRate:1,_experiments:{},...mi};function Ii(e,t){if(!e.emit)return;e.emit("startPageLoadSpan",t);const n=ho();return"pageload"===(n&&mr(n).op)?n:void 0}function ki(e,t){if(!e.emit)return;e.emit("startNavigationSpan",t);const n=ho();return"navigation"===(n&&mr(n).op)?n:void 0}function Ci(e){const t=Ne(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}const Ri=10;function xi(e){const t=e.attributes&&e.attributes[So],n=e.data&&e.data[So],r=e.metadata&&e.metadata.source;return t||n||r}const Ai=Ie;let Li=0;function Oi(){return Li>0}function Ni(e,t={},n){if("function"!=typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return t;if(Ke(e))return e}catch(t){return e}const r=function(){const r=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);const o=r.map((e=>Ni(e,t)));return e.apply(this,o)}catch(e){throw Li++,setTimeout((()=>{Li--})),Cr((n=>{n.addEventProcessor((e=>(t.mechanism&&(yt(e,void 0,void 0),_t(e,t.mechanism)),e.extra={...e.extra,arguments:r},e))),Tr(e)})),e}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}catch(e){}Ye(r,e),ze(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get:()=>e.name})}catch(e){}return r}const Di="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function Pi(e,t){const n=Fi(e,t),r={type:t&&t.name,value:ji(t)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function Mi(e,t){return{exception:{values:[Pi(e,t)]}}}function Fi(e,t){const n=t.stacktrace||t.stack||"",r=function(e){if(e){if("number"==typeof e.framesToPop)return e.framesToPop;if(Ui.test(e.message))return 1}return 0}(t);try{return e(n,r)}catch(e){}return[]}const Ui=/Minified React error #\d+;/i;function ji(e){const t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function Bi(e,t,n,r){const o=Gi(e,t,n&&n.syntheticException||void 0,r);return _t(o),o.level="error",n&&n.event_id&&(o.event_id=n.event_id),dn(o)}function $i(e,t,n="info",r,o){const s=Wi(e,t,r&&r.syntheticException||void 0,o);return s.level=n,r&&r.event_id&&(s.event_id=r.event_id),dn(s)}function Gi(e,t,n,r,o){let s;if(oe(t)&&t.error){return Mi(e,t.error)}if(se(t)||re(t,"DOMException")){const o=t;if("stack"in t)s=Mi(e,t);else{const t=o.name||(se(o)?"DOMError":"DOMException"),a=o.message?`${t}: ${o.message}`:t;s=Wi(e,a,n,r),yt(s,a)}return"code"in o&&(s.tags={...s.tags,"DOMException.code":`${o.code}`}),s}if(ne(t))return Mi(e,t);if(le(t)||ue(t)){return s=function(e,t,n,r){const o=Rr(),s=o&&o.getOptions().normalizeDepth,a={exception:{values:[{type:ue(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:qi(t,{isUnhandledRejection:r})}]},extra:{__serialized__:rn(t,s)}};if(n){const t=Fi(e,n);t.length&&(a.exception.values[0].stacktrace={frames:t})}return a}(e,t,n,o),_t(s,{synthetic:!0}),s}return s=Wi(e,t,n,r),yt(s,`${t}`,void 0),_t(s,{synthetic:!0}),s}function Wi(e,t,n,r){const o={};if(r&&n){const r=Fi(e,n);r.length&&(o.exception={values:[{value:t,stacktrace:{frames:r}}]})}if(ie(t)){const{__sentry_template_string__:e,__sentry_template_values__:n}=t;return o.logentry={message:e,params:n},o}return o.message=t,o}function qi(e,{isUnhandledRejection:t}){const n=function(e,t=40){const n=Object.keys(Xe(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return me(n[0],t);for(let e=n.length;e>0;e--){const r=n.slice(0,e).join(", ");if(!(r.length>t))return e===n.length?r:me(r,t)}return""}(e),r=t?"promise rejection":"exception";if(oe(e))return`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``;if(ue(e)){return`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){}}(e)}\` (type=${e.type}) captured as ${r}`}return`Object captured as ${r} with keys: ${n}`}function Hi(e,{metadata:t,tunnel:n,dsn:r}){const o={event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:$e(r)}},s=function(e){return[{type:"user_report"},e]}(e);return $n(o,[s])}class Vi extends es{constructor(e){!function(e,t,n=[t],r="npm"){const o=e._metadata||{};o.sdk||(o.sdk={name:`sentry.javascript.${t}`,packages:n.map((e=>({name:`${r}:@sentry/${e}`,version:Wr}))),version:Wr}),e._metadata=o}(e,"browser",["browser"],Ai.SENTRY_SDK_SOURCE||"npm"),super(e),e.sendClientReports&&Ai.document&&Ai.document.addEventListener("visibilitychange",(()=>{"hidden"===Ai.document.visibilityState&&this._flushOutcomes()}))}eventFromException(e,t){return Bi(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",n){return $i(this._options.stackParser,e,t,n,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(Di&&je.warn("SDK not enabled, will not capture user feedback."));const t=Hi(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(t)}_prepareEvent(e,t,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n)}_flushOutcomes(){const e=this._clearOutcomes();if(0===e.length)return void(Di&&je.log("No outcomes to send"));if(!this._dsn)return void(Di&&je.log("No dsn provided, will not send outcomes"));Di&&je.log("Sending outcomes:",e);const t=(n=e,$n((r=this._options.tunnel&&$e(this._dsn))?{dsn:r}:{},[[{type:"client_report"},{timestamp:o||Cn(),discarded_events:n}]]));var n,r,o;this._sendEnvelope(t)}}let zi;function Yi(e,t=function(){if(zi)return zi;if(Lt(Ai.fetch))return zi=Ai.fetch.bind(Ai);const e=Ai.document;let t=Ai.fetch;if(e&&"function"==typeof e.createElement)try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);const r=n.contentWindow;r&&r.fetch&&(t=r.fetch),e.head.removeChild(n)}catch(e){Di&&je.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return zi=t.bind(Ai)}()){let n=0,r=0;return is(e,(function(o){const s=o.body.length;n+=s,r++;const a={body:o.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{return t(e.url,a).then((e=>(n-=s,r--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(e){return zi=void 0,n-=s,r--,pn(e)}}))}const Ki=4;function Xi(e){return is(e,(function(t){return new hn(((n,r)=>{const o=new XMLHttpRequest;o.onerror=r,o.onreadystatechange=()=>{o.readyState===Ki&&n({statusCode:o.status,headers:{"x-sentry-rate-limits":o.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":o.getResponseHeader("Retry-After")}})},o.open("POST",e.url);for(const t in e.headers)Object.prototype.hasOwnProperty.call(e.headers,t)&&o.setRequestHeader(t,e.headers[t]);o.send(t.body)}))}))}const Ji="?";function Zi(e,t,n,r){const o={filename:e,function:t,in_app:!0};return void 0!==n&&(o.lineno=n),void 0!==r&&(o.colno=r),o}const Qi=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,ec=/\((\S*)(?::(\d+))(?::(\d+))\)/,tc=[30,e=>{const t=Qi.exec(e);if(t){if(t[2]&&0===t[2].indexOf("eval")){const e=ec.exec(t[2]);e&&(t[2]=e[1],t[3]=e[2],t[4]=e[3])}const[e,n]=hc(t[1]||Ji,t[2]);return Zi(n,e,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}],nc=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,rc=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,oc=[50,e=>{const t=nc.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=rc.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],n=t[1]||Ji;return[n,e]=hc(n,e),Zi(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],sc=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,ac=[40,e=>{const t=sc.exec(e);return t?Zi(t[2],t[1]||Ji,+t[3],t[4]?+t[4]:void 0):void 0}],ic=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,cc=[10,e=>{const t=ic.exec(e);return t?Zi(t[2],t[3]||Ji,+t[1]):void 0}],lc=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,uc=[20,e=>{const t=lc.exec(e);return t?Zi(t[5],t[3]||t[4]||Ji,+t[1],+t[2]):void 0}],dc=[tc,oc,ac],pc=ot(...dc),hc=(e,t)=>{const n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:Ji,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},fc=1024,gc="Breadcrumbs",mc=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:gc,setupOnce(){},setup(e){t.console&&pt(function(e){return function(t){if(Rr()!==e)return;const n={category:"console",data:{arguments:t.args,logger:"console"},level:In(t.level),message:_e(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;n.message=`Assertion failed: ${_e(t.args.slice(1)," ")||"console.assert"}`,n.data.arguments=t.args.slice(1)}Ir(n,{input:t.args,level:t.level})}}(e)),t.dom&&kt(function(e,t){return function(n){if(Rr()!==e)return;let r,o,s="object"==typeof t?t.serializeAttribute:void 0,a="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;a&&a>fc&&(Di&&je.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${a} was configured. Sentry will use 1024 instead.`),a=fc),"string"==typeof s&&(s=[s]);try{const e=n.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;r=Ae(t,{keyAttrs:s,maxStringLength:a}),o=De(t)}catch(e){r="<unknown>"}if(0===r.length)return;const i={category:`ui.${n.name}`,message:r};o&&(i.data={"ui.component_name":o}),Ir(i,{event:n.event,name:n.name,global:n.global})}}(e,t.dom)),t.xhr&&Xt(function(e){return function(t){if(Rr()!==e)return;const{startTimestamp:n,endTimestamp:r}=t,o=t.xhr[Kt];if(!n||!r||!o)return;const{method:s,url:a,status_code:i,body:c}=o;Ir({category:"xhr",data:{method:s,url:a,status_code:i},type:"http"},{xhr:t.xhr,input:c,startTimestamp:n,endTimestamp:r})}}(e)),t.fetch&&Nt(function(e){return function(t){if(Rr()!==e)return;const{startTimestamp:n,endTimestamp:r}=t;if(r&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.error){Ir({category:"fetch",data:t.fetchData,level:"error",type:"http"},{data:t.error,input:t.args,startTimestamp:n,endTimestamp:r})}else{const e=t.response;Ir({category:"fetch",data:{...t.fetchData,status_code:e&&e.status},type:"http"},{input:t.args,response:e,startTimestamp:n,endTimestamp:r})}}}(e)),t.history&&Vt(function(e){return function(t){if(Rr()!==e)return;let n=t.from,r=t.to;const o=gn(Ai.location.href);let s=n?gn(n):void 0;const a=gn(r);s&&s.path||(s=o),o.protocol===a.protocol&&o.host===a.host&&(r=a.relative),o.protocol===s.protocol&&o.host===s.host&&(n=s.relative),Ir({category:"navigation",data:{from:n,to:r}})}}(e)),t.sentry&&e.on&&e.on("beforeSendEvent",function(e){return function(t){Rr()===e&&Ir({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:mt(t)},{event:t})}}(e))}}},yc=Yo(gc,mc);const _c="Dedupe",vc=()=>{let e;return{name:_c,setupOnce(){},processEvent(t){if(t.type)return t;try{if(function(e,t){if(!t)return!1;if(function(e,t){const n=e.message,r=t.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!Tc(e,t))return!1;if(!Sc(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const n=Ec(t),r=Ec(e);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!Tc(e,t))return!1;if(!Sc(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return Di&&je.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}},bc=Yo(_c,vc);function Sc(e,t){let n=wc(e),r=wc(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let e=0;e<r.length;e++){const t=r[e],o=n[e];if(t.filename!==o.filename||t.lineno!==o.lineno||t.colno!==o.colno||t.function!==o.function)return!1}return!0}function Tc(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(e){return!1}}function Ec(e){return e.exception&&e.exception.values&&e.exception.values[0]}function wc(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}const Ic="GlobalHandlers",kc=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:Ic,setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(!function(e){Ut((t=>{const{stackParser:n,attachStacktrace:r}=Ac();if(Rr()!==e||Oi())return;const{msg:o,url:s,line:a,column:i,error:c}=t,l=void 0===c&&ae(o)?function(e,t,n,r){const o=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let s=oe(e)?e.message:e,a="Error";const i=s.match(o);i&&(a=i[1],s=i[2]);const c={exception:{values:[{type:a,value:s}]}};return Rc(c,t,n,r)}(o,s,a,i):Rc(Gi(n,c||o,void 0,r,!1),s,a,i);l.level="error",wr(l,{originalException:c,mechanism:{handled:!1,type:"onerror"}})}))}(e),xc("onerror")),t.onunhandledrejection&&(!function(e){$t((t=>{const{stackParser:n,attachStacktrace:r}=Ac();if(Rr()!==e||Oi())return;const o=function(e){if(ce(e))return e;const t=e;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch(e){}return e}(t),s=ce(o)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(o)}`}]}}:Gi(n,o,void 0,r,!0);s.level="error",wr(s,{originalException:o,mechanism:{handled:!1,type:"onunhandledrejection"}})}))}(e),xc("onunhandledrejection"))}}},Cc=Yo(Ic,kc);function Rc(e,t,n,r){const o=e.exception=e.exception||{},s=o.values=o.values||[],a=s[0]=s[0]||{},i=a.stacktrace=a.stacktrace||{},c=i.frames=i.frames||[],l=isNaN(parseInt(r,10))?void 0:r,u=isNaN(parseInt(n,10))?void 0:n,d=ae(t)&&t.length>0?t:Oe();return 0===c.length&&c.push({colno:l,filename:d,function:"?",in_app:!0,lineno:u}),e}function xc(e){Di&&je.log(`Global Handler attached: ${e}`)}function Ac(){const e=Rr();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const Lc="HttpContext",Oc=()=>({name:Lc,setupOnce(){},preprocessEvent(e){if(!Ai.navigator&&!Ai.location&&!Ai.document)return;const t=e.request&&e.request.url||Ai.location&&Ai.location.href,{referrer:n}=Ai.document||{},{userAgent:r}=Ai.navigator||{},o={...e.request&&e.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},s={...e.request,...t&&{url:t},headers:o};e.request=s}}),Nc=Yo(Lc,Oc),Dc="LinkedErrors",Pc=(e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:Dc,setupOnce(){},preprocessEvent(e,r,o){const s=o.getOptions();be(Pi,s.stackParser,s.maxValueLength,n,t,e,r)}}},Mc=Yo(Dc,Pc),Fc=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Uc="TryCatch",jc=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:Uc,setupOnce(){t.setTimeout&&Ve(Ai,"setTimeout",$c),t.setInterval&&Ve(Ai,"setInterval",$c),t.requestAnimationFrame&&Ve(Ai,"requestAnimationFrame",Gc),t.XMLHttpRequest&&"XMLHttpRequest"in Ai&&Ve(XMLHttpRequest.prototype,"send",Wc);const e=t.eventTarget;if(e){(Array.isArray(e)?e:Fc).forEach(qc)}}}},Bc=Yo(Uc,jc);function $c(e){return function(...t){const n=t[0];return t[0]=Ni(n,{mechanism:{data:{function:at(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function Gc(e){return function(t){return e.apply(this,[Ni(t,{mechanism:{data:{function:"requestAnimationFrame",handler:at(e)},handled:!1,type:"instrument"}})])}}function Wc(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in n&&"function"==typeof n[e]&&Ve(n,e,(function(t){const n={mechanism:{data:{function:e,handler:at(t)},handled:!1,type:"instrument"}},r=Ke(t);return r&&(n.mechanism.data.handler=at(r)),Ni(t,n)}))})),e.apply(this,t)}}function qc(e){const t=Ai,n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(Ve(n,"addEventListener",(function(t){return function(n,r,o){try{"function"==typeof r.handleEvent&&(r.handleEvent=Ni(r.handleEvent,{mechanism:{data:{function:"handleEvent",handler:at(r),target:e},handled:!1,type:"instrument"}}))}catch(e){}return t.apply(this,[n,Ni(r,{mechanism:{data:{function:"addEventListener",handler:at(r),target:e},handled:!1,type:"instrument"}}),o])}})),Ve(n,"removeEventListener",(function(e){return function(t,n,r){const o=n;try{const n=o&&o.__sentry_wrapped__;n&&e.call(this,t,n,r)}catch(e){}return e.call(this,t,o,r)}})))}const Hc=[xs(),Ps(),jc(),mc(),kc(),Pc(),vc(),Oc()];function Vc(e){return[...Hc]}function zc(e={}){void 0===e.defaultIntegrations&&(e.defaultIntegrations=Vc()),void 0===e.release&&("string"==typeof __SENTRY_RELEASE__&&(e.release=__SENTRY_RELEASE__),Ai.SENTRY_RELEASE&&Ai.SENTRY_RELEASE.id&&(e.release=Ai.SENTRY_RELEASE.id)),void 0===e.autoSessionTracking&&(e.autoSessionTracking=!0),void 0===e.sendClientReports&&(e.sendClientReports=!0);const t={...e,stackParser:(n=e.stackParser||pc,Array.isArray(n)?ot(...n):n),integrations:Ho(e),transport:e.transport||(At()?Yi:Xi)};var n;!function(e,t){!0===t.debug&&(rr?je.enable():Ue((()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")}))),xr().update(t.initialScope);const n=new e(t);ss(n),function(e){e.init?e.init():e.setupIntegrations&&e.setupIntegrations()}(n)}(Vi,t),e.autoSessionTracking&&function(){if(void 0===Ai.document)return void(Di&&je.warn("Session tracking in non-browser environment with @sentry/browser is not supported."));Ar({ignoreDuration:!0}),Nr(),Vt((({from:e,to:t})=>{void 0!==e&&e!==t&&(Ar({ignoreDuration:!0}),Nr())}))}()}var Yc=Object.freeze({__proto__:null,GlobalHandlers:Cc,TryCatch:Bc,Breadcrumbs:yc,LinkedErrors:Mc,HttpContext:Nc,Dedupe:bc});const Kc=Ie,Xc="sentryReplaySession",Jc="replay_event",Zc="Unable to send Replay",Qc=15e4,el=5e3,tl=2e7,nl=36e5;function rl(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}var ol;function sl(e){const t=rl([e,"optionalAccess",e=>e.host]);return Boolean(rl([t,"optionalAccess",e=>e.shadowRoot])===e)}function al(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function il(e){try{const n=e.rules||e.cssRules;return n?((t=Array.from(n,cl).join("")).includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),t):null}catch(e){return null}var t}function cl(e){let t;if(function(e){return"styleSheet"in e}(e))try{t=il(e.styleSheet)||function(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return""===e.layerName?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}(e)}catch(e){}else if(function(e){return"selectorText"in e}(e)&&e.selectorText.includes(":"))return function(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}(e.cssText);return t||e.cssText}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(ol||(ol={}));class ll{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){if(!e)return-1;const t=rl([this,"access",e=>e.getMeta,"call",t=>t(e),"optionalAccess",e=>e.id]);return r=()=>-1,null!=(n=t)?n:r();var n,r}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach((e=>this.removeNodeFromMap(e)))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}replace(e,t){const n=this.getNode(e);if(n){const e=this.nodeMetaMap.get(n);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function ul({maskInputOptions:e,tagName:t,type:n}){return"OPTION"===t&&(t="SELECT"),Boolean(e[t.toLowerCase()]||n&&e[n]||"password"===n||"INPUT"===t&&!n&&e.text)}function dl({isMasked:e,element:t,value:n,maskInputFn:r}){let o=n||"";return e?(r&&(o=r(o,t)),"*".repeat(o.length)):o}function pl(e){return e.toLowerCase()}function hl(e){return e.toUpperCase()}const fl="__rrweb_original__";function gl(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?pl(t):null}function ml(e,t,n){return"INPUT"!==t||"radio"!==n&&"checkbox"!==n?e.value:e.getAttribute("value")||""}let yl=1;const _l=new RegExp("[^a-z0-9-_:]"),vl=-2;function bl(){return yl++}let Sl,Tl;const El=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,wl=/^(?:[a-z+]+:)?\/\//i,Il=/^www\..*/i,kl=/^(data:)([^,]*),(.*)/i;function Cl(e,t){return(e||"").replace(El,((e,n,r,o,s,a)=>{const i=r||s||a,c=n||o||"";if(!i)return e;if(wl.test(i)||Il.test(i))return`url(${c}${i}${c})`;if(kl.test(i))return`url(${c}${i}${c})`;if("/"===i[0])return`url(${c}${function(e){let t="";return t=e.indexOf("//")>-1?e.split("/").slice(0,3).join("/"):e.split("/")[0],t=t.split("?")[0],t}(t)+i}${c})`;const l=t.split("/"),u=i.split("/");l.pop();for(const e of u)"."!==e&&(".."===e?l.pop():l.push(e));return`url(${c}${l.join("/")}${c})`}))}const Rl=/^[^ \t\n\r\u000c]+/,xl=/^[, \t\n\r\u000c]+/;function Al(e,t){if(!t||""===t.trim())return t;const n=e.createElement("a");return n.href=t,n.href}function Ll(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function Ol(){const e=document.createElement("a");return e.href="",e.href}function Nl(e,t,n,r,o,s){return r?"src"===n||"href"===n&&("use"!==t||"#"!==r[0])||"xlink:href"===n&&"#"!==r[0]?Al(e,r):"background"!==n||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n?function(e,t){if(""===t.trim())return t;let n=0;function r(e){let r;const o=e.exec(t.substring(n));return o?(r=o[0],n+=r.length,r):""}const o=[];for(;r(xl),!(n>=t.length);){let s=r(Rl);if(","===s.slice(-1))s=Al(e,s.substring(0,s.length-1)),o.push(s);else{let r="";s=Al(e,s);let a=!1;for(;;){const e=t.charAt(n);if(""===e){o.push((s+r).trim());break}if(a)")"===e&&(a=!1);else{if(","===e){n+=1,o.push((s+r).trim());break}"("===e&&(a=!0)}r+=e,n+=1}}}return o.join(", ")}(e,r):"style"===n?Cl(r,Ol()):"object"===t&&"data"===n?Al(e,r):"function"==typeof s?s(n,r,o):r:Al(e,r):r}function Dl(e,t,n){return("video"===e||"audio"===e)&&"autoplay"===t}function Pl(e,t,n=1/0,r=0){return e?e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:Pl(e.parentNode,t,n,r+1):-1}function Ml(e,t){return n=>{const r=n;if(null===r)return!1;try{if(e)if("string"==typeof e){if(r.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}(r,e))return!0;return!(!t||!r.matches(t))}catch(e){return!1}}}function Fl(e,t,n,r,o,s){try{const a=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===a)return!1;if("INPUT"===a.tagName){const e=a.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(e))return!0}let i=-1,c=-1;if(s){if(c=Pl(a,Ml(r,o)),c<0)return!0;i=Pl(a,Ml(t,n),c>=0?c:1/0)}else{if(i=Pl(a,Ml(t,n)),i<0)return!1;c=Pl(a,Ml(r,o),i>=0?i:1/0)}return i>=0?!(c>=0)||i<=c:!(c>=0)&&!!s}catch(e){}return!!s}function Ul(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:s,unblockSelector:a,maskAllText:i,maskAttributeFn:c,maskTextClass:l,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:p,inlineStylesheet:h,maskInputOptions:f={},maskTextFn:g,maskInputFn:m,dataURLOptions:y={},inlineImages:_,recordCanvas:v,keepIframeSrcFn:b,newlyAddedElement:S=!1}=t,T=function(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return 1===n?void 0:n}(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:ol.Document,childNodes:[],compatMode:e.compatMode}:{type:ol.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:ol.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:T};case e.ELEMENT_NODE:return function(e,t){const{doc:n,blockClass:r,blockSelector:o,unblockSelector:s,inlineStylesheet:a,maskInputOptions:i={},maskAttributeFn:c,maskInputFn:l,dataURLOptions:u={},inlineImages:d,recordCanvas:p,keepIframeSrcFn:h,newlyAddedElement:f=!1,rootId:g,maskAllText:m,maskTextClass:y,unmaskTextClass:_,maskTextSelector:v,unmaskTextSelector:b}=t,S=function(e,t,n,r){try{if(r&&e.matches(r))return!1;if("string"==typeof t){if(e.classList.contains(t))return!0}else for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}if(n)return e.matches(n)}catch(e){}return!1}(e,r,o,s),T=function(e){if(e instanceof HTMLFormElement)return"form";const t=pl(e.tagName);return _l.test(t)?"div":t}(e);let E={};const w=e.attributes.length;for(let t=0;t<w;t++){const r=e.attributes[t];r.name&&!Dl(T,r.name,r.value)&&(E[r.name]=Nl(n,T,pl(r.name),r.value,e,c))}if("link"===T&&a){const t=Array.from(n.styleSheets).find((t=>t.href===e.href));let r=null;t&&(r=il(t)),r&&(delete E.rel,delete E.href,E._cssText=Cl(r,t.href))}if("style"===T&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const t=il(e.sheet);t&&(E._cssText=Cl(t,Ol()))}if("input"===T||"textarea"===T||"select"===T||"option"===T){const t=e,n=gl(t),r=ml(t,hl(T),n),o=t.checked;if("submit"!==n&&"button"!==n&&r){const e=Fl(t,y,v,_,b,ul({type:n,tagName:hl(T),maskInputOptions:i}));E.value=dl({isMasked:e,element:t,value:r,maskInputFn:l})}o&&(E.checked=o)}"option"===T&&(e.selected&&!i.select?E.selected=!0:delete E.selected);if("canvas"===T&&p)if("2d"===e.__context)(function(e){const t=e.getContext("2d");if(!t)return!0;for(let n=0;n<e.width;n+=50)for(let r=0;r<e.height;r+=50){const o=t.getImageData,s=fl in o?o[fl]:o;if(new Uint32Array(s.call(t,n,r,Math.min(50,e.width-n),Math.min(50,e.height-r)).data.buffer).some((e=>0!==e)))return!1}return!0})(e)||(E.rr_dataURL=e.toDataURL(u.type,u.quality));else if(!("__context"in e)){const t=e.toDataURL(u.type,u.quality),n=document.createElement("canvas");n.width=e.width,n.height=e.height;t!==n.toDataURL(u.type,u.quality)&&(E.rr_dataURL=t)}if("img"===T&&d){Sl||(Sl=n.createElement("canvas"),Tl=Sl.getContext("2d"));const t=e,r=t.crossOrigin;t.crossOrigin="anonymous";const o=()=>{t.removeEventListener("load",o);try{Sl.width=t.naturalWidth,Sl.height=t.naturalHeight,Tl.drawImage(t,0,0),E.rr_dataURL=Sl.toDataURL(u.type,u.quality)}catch(e){console.warn(`Cannot inline img src=${t.currentSrc}! Error: ${e}`)}r?E.crossOrigin=r:t.removeAttribute("crossorigin")};t.complete&&0!==t.naturalWidth?o():t.addEventListener("load",o)}"audio"!==T&&"video"!==T||(E.rr_mediaState=e.paused?"paused":"played",E.rr_mediaCurrentTime=e.currentTime);f||(e.scrollLeft&&(E.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(E.rr_scrollTop=e.scrollTop));if(S){const{width:t,height:n}=e.getBoundingClientRect();E={class:E.class,rr_width:`${t}px`,rr_height:`${n}px`}}"iframe"!==T||h(E.src)||(e.contentDocument||(E.rr_src=E.src),delete E.src);let I;try{customElements.get(T)&&(I=!0)}catch(e){}return{type:ol.Element,tagName:T,attributes:E,childNodes:[],isSVG:Ll(e)||void 0,needBlock:S,rootId:g,isCustom:I}}(e,{doc:n,blockClass:o,blockSelector:s,unblockSelector:a,inlineStylesheet:h,maskAttributeFn:c,maskInputOptions:f,maskInputFn:m,dataURLOptions:y,inlineImages:_,recordCanvas:v,keepIframeSrcFn:b,newlyAddedElement:S,rootId:T,maskAllText:i,maskTextClass:l,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:p});case e.TEXT_NODE:return function(e,t){const{maskAllText:n,maskTextClass:r,unmaskTextClass:o,maskTextSelector:s,unmaskTextSelector:a,maskTextFn:i,maskInputOptions:c,maskInputFn:l,rootId:u}=t,d=e.parentNode&&e.parentNode.tagName;let p=e.textContent;const h="STYLE"===d||void 0,f="SCRIPT"===d||void 0,g="TEXTAREA"===d||void 0;if(h&&p){try{e.nextSibling||e.previousSibling||rl([e,"access",e=>e.parentNode,"access",e=>e.sheet,"optionalAccess",e=>e.cssRules])&&(p=il(e.parentNode.sheet))}catch(t){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${t}`,e)}p=Cl(p,Ol())}f&&(p="SCRIPT_PLACEHOLDER");const m=Fl(e,r,s,o,a,n);h||f||g||!p||!m||(p=i?i(p,e.parentElement):p.replace(/[\S]/g,"*"));g&&p&&(c.textarea||m)&&(p=l?l(p,e.parentNode):p.replace(/[\S]/g,"*"));if("OPTION"===d&&p){p=dl({isMasked:Fl(e,r,s,o,a,ul({type:null,tagName:d,maskInputOptions:c})),element:e,value:p,maskInputFn:l})}return{type:ol.Text,textContent:p||"",isStyle:h,rootId:u}}(e,{maskAllText:i,maskTextClass:l,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:p,maskTextFn:g,maskInputOptions:f,maskInputFn:m,rootId:T});case e.CDATA_SECTION_NODE:return{type:ol.CDATA,textContent:"",rootId:T};case e.COMMENT_NODE:return{type:ol.Comment,textContent:e.textContent||"",rootId:T};default:return!1}}function jl(e){return null==e?"":e.toLowerCase()}function Bl(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:s,unblockSelector:a,maskAllText:i,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:p=!1,inlineStylesheet:h=!0,maskInputOptions:f={},maskAttributeFn:g,maskTextFn:m,maskInputFn:y,slimDOMOptions:_,dataURLOptions:v={},inlineImages:b=!1,recordCanvas:S=!1,onSerialize:T,onIframeLoad:E,iframeLoadTimeout:w=5e3,onStylesheetLoad:I,stylesheetLoadTimeout:k=5e3,keepIframeSrcFn:C=(()=>!1),newlyAddedElement:R=!1}=t;let{preserveWhiteSpace:x=!0}=t;const A=Ul(e,{doc:n,mirror:r,blockClass:o,blockSelector:s,maskAllText:i,unblockSelector:a,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:g,maskTextFn:m,maskInputFn:y,dataURLOptions:v,inlineImages:b,recordCanvas:S,keepIframeSrcFn:C,newlyAddedElement:R});if(!A)return console.warn(e,"not serialized"),null;let L;L=r.hasNode(e)?r.getId(e):!function(e,t){if(t.comment&&e.type===ol.Comment)return!0;if(e.type===ol.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(jl(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===jl(e.attributes.name)||"icon"===jl(e.attributes.rel)||"apple-touch-icon"===jl(e.attributes.rel)||"shortcut icon"===jl(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&jl(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(jl(e.attributes.property).match(/^(og|twitter|fb):/)||jl(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===jl(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===jl(e.attributes.name)||"googlebot"===jl(e.attributes.name)||"bingbot"===jl(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===jl(e.attributes.name)||"generator"===jl(e.attributes.name)||"framework"===jl(e.attributes.name)||"publisher"===jl(e.attributes.name)||"progid"===jl(e.attributes.name)||jl(e.attributes.property).match(/^article:/)||jl(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===jl(e.attributes.name)||"yandex-verification"===jl(e.attributes.name)||"csrf-token"===jl(e.attributes.name)||"p:domain_verify"===jl(e.attributes.name)||"verify-v1"===jl(e.attributes.name)||"verification"===jl(e.attributes.name)||"shopify-checkout-api-token"===jl(e.attributes.name)))return!0}}return!1}(A,_)&&(x||A.type!==ol.Text||A.isStyle||A.textContent.replace(/^\s+|\s+$/gm,"").length)?bl():vl;const O=Object.assign(A,{id:L});if(r.add(e,O),L===vl)return null;T&&T(e);let N=!p;if(O.type===ol.Element){N=N&&!O.needBlock,delete O.needBlock;const t=e.shadowRoot;t&&al(t)&&(O.isShadowHost=!0)}if((O.type===ol.Document||O.type===ol.Element)&&N){_.headWhitespace&&O.type===ol.Element&&"head"===O.tagName&&(x=!1);const t={doc:n,mirror:r,blockClass:o,blockSelector:s,maskAllText:i,unblockSelector:a,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:p,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:g,maskTextFn:m,maskInputFn:y,slimDOMOptions:_,dataURLOptions:v,inlineImages:b,recordCanvas:S,preserveWhiteSpace:x,onSerialize:T,onIframeLoad:E,iframeLoadTimeout:w,onStylesheetLoad:I,stylesheetLoadTimeout:k,keepIframeSrcFn:C};for(const n of Array.from(e.childNodes)){const e=Bl(n,t);e&&O.childNodes.push(e)}if(function(e){return e.nodeType===e.ELEMENT_NODE}(e)&&e.shadowRoot)for(const n of Array.from(e.shadowRoot.childNodes)){const r=Bl(n,t);r&&(al(e.shadowRoot)&&(r.isShadow=!0),O.childNodes.push(r))}}return e.parentNode&&sl(e.parentNode)&&al(e.parentNode)&&(O.isShadow=!0),O.type===ol.Element&&"iframe"===O.tagName&&function(e,t,n){const r=e.contentWindow;if(!r)return;let o,s=!1;try{o=r.document.readyState}catch(e){return}if("complete"!==o){const r=setTimeout((()=>{s||(t(),s=!0)}),n);return void e.addEventListener("load",(()=>{clearTimeout(r),s=!0,t()}))}const a="about:blank";if(r.location.href!==a||e.src===a||""===e.src)return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}(e,(()=>{const t=e.contentDocument;if(t&&E){const n=Bl(t,{doc:t,mirror:r,blockClass:o,blockSelector:s,unblockSelector:a,maskAllText:i,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:g,maskTextFn:m,maskInputFn:y,slimDOMOptions:_,dataURLOptions:v,inlineImages:b,recordCanvas:S,preserveWhiteSpace:x,onSerialize:T,onIframeLoad:E,iframeLoadTimeout:w,onStylesheetLoad:I,stylesheetLoadTimeout:k,keepIframeSrcFn:C});n&&E(e,n)}}),w),O.type===ol.Element&&"link"===O.tagName&&"stylesheet"===O.attributes.rel&&function(e,t,n){let r,o=!1;try{r=e.sheet}catch(e){return}if(r)return;const s=setTimeout((()=>{o||(t(),o=!0)}),n);e.addEventListener("load",(()=>{clearTimeout(s),o=!0,t()}))}(e,(()=>{if(I){const t=Bl(e,{doc:n,mirror:r,blockClass:o,blockSelector:s,unblockSelector:a,maskAllText:i,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:g,maskTextFn:m,maskInputFn:y,slimDOMOptions:_,dataURLOptions:v,inlineImages:b,recordCanvas:S,preserveWhiteSpace:x,onSerialize:T,onIframeLoad:E,iframeLoadTimeout:w,onStylesheetLoad:I,stylesheetLoadTimeout:k,keepIframeSrcFn:C});t&&I(e,t)}}),k),O}function $l(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}function Gl(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const Wl="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let ql={map:{},getId:()=>(console.error(Wl),-1),getNode:()=>(console.error(Wl),null),removeNodeFromMap(){console.error(Wl)},has:()=>(console.error(Wl),!1),reset(){console.error(Wl)}};function Hl(e,t,n={}){let r=null,o=0;return function(...s){const a=Date.now();o||!1!==n.leading||(o=a);const i=t-(a-o),c=this;i<=0||i>t?(r&&(!function(...e){du("clearTimeout")(...e)}(r),r=null),o=a,e.apply(c,s)):r||!1===n.trailing||(r=pu((()=>{o=!1===n.leading?0:Date.now(),r=null,e.apply(c,s)}),i))}}function Vl(e,t,n,r,o=window){const s=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(e){pu((()=>{n.set.call(this,e)}),0),s&&s.set&&s.set.call(this,e)}}),()=>Vl(e,t,s||{},!0)}function zl(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch(e){return()=>{}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(ql=new Proxy(ql,{get:(e,t,n)=>("map"===t&&console.error(Wl),Reflect.get(e,t,n))}));let Yl=Date.now;function Kl(e){const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:$l([t,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollLeft])||$l([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollLeft])||$l([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollLeft])||0,top:t.scrollingElement?t.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:$l([t,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollTop])||$l([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollTop])||$l([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollTop])||0}}function Xl(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Jl(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Zl(e){if(!e)return null;return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}function Ql(e,t,n,r,o){if(!e)return!1;const s=Zl(e);if(!s)return!1;const a=Ml(t,n);if(!o){const e=r&&s.matches(r);return a(s)&&!e}const i=Pl(s,a);let c=-1;return!(i<0)&&(r&&(c=Pl(s,Ml(null,r))),i>-1&&c<0||i<c)}function eu(e,t){return t.getId(e)===vl}function tu(e,t){if(sl(e))return!1;const n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||tu(e.parentNode,t))}function nu(e){return Boolean(e.changedTouches)}function ru(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function ou(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function su(e){return Boolean($l([e,"optionalAccess",e=>e.shadowRoot]))}/[1-9][0-9]{12}/.test(Date.now().toString())||(Yl=()=>(new Date).getTime());class au{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){return t=this.styleIDMap.get(e),n=()=>-1,null!=t?t:n();var t,n}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let n;return n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function iu(e){let t=null;return $l([e,"access",e=>e.getRootNode,"optionalCall",e=>e(),"optionalAccess",e=>e.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function cu(e){const t=e.ownerDocument;if(!t)return!1;const n=function(e){let t,n=e;for(;t=iu(n);)n=t;return n}(e);return t.contains(n)}function lu(e){const t=e.ownerDocument;return!!t&&(t.contains(e)||cu(e))}const uu={};function du(e){const t=uu[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const o=t.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(t)}catch(e){}return uu[e]=r.bind(window)}function pu(...e){return du("setTimeout")(...e)}var hu=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(hu||{}),fu=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(fu||{}),gu=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(gu||{}),mu=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(mu||{});function yu(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}function _u(e){return"__ln"in e}class vu{constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let n=0;n<e;n++)t=yu([t,"optionalAccess",e=>e.next])||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&_u(e.previousSibling)){const n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&_u(e.nextSibling)&&e.nextSibling.__ln.previous){const n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;null===t.next&&(this.tail=t),this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const bu=(e,t)=>`${e}@${t}`;class Su{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],t=new Set,n=new vu,r=e=>{let t=e,n=vl;for(;n===vl;)t=t&&t.nextSibling,n=t&&this.mirror.getId(t);return n},o=o=>{if(!o.parentNode||!lu(o))return;const s=sl(o.parentNode)?this.mirror.getId(iu(o)):this.mirror.getId(o.parentNode),a=r(o);if(-1===s||-1===a)return n.addNode(o);const i=Bl(o,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:e=>{ru(e,this.mirror)&&this.iframeManager.addIframe(e),ou(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),su(o)&&this.shadowDomManager.addShadowRoot(o.shadowRoot,this.doc)},onIframeLoad:(e,t)=>{this.iframeManager.attachIframe(e,t),this.shadowDomManager.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)}});i&&(e.push({parentId:s,nextId:a,node:i}),t.add(i.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const e of this.movedSet)Eu(this.removes,e,this.mirror)&&!this.movedSet.has(e.parentNode)||o(e);for(const e of this.addedSet)Iu(this.droppedSet,e)||Eu(this.removes,e,this.mirror)?Iu(this.movedSet,e)?o(e):this.droppedSet.add(e):o(e);let s=null;for(;n.length;){let e=null;if(s){const t=this.mirror.getId(s.value.parentNode),n=r(s.value);-1!==t&&-1!==n&&(e=s)}if(!e){let t=n.tail;for(;t;){const n=t;if(t=t.previous,n){const t=this.mirror.getId(n.value.parentNode);if(-1===r(n.value))continue;if(-1!==t){e=n;break}{const t=n.value;if(t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const r=t.parentNode.host;if(-1!==this.mirror.getId(r)){e=n;break}}}}}}if(!e){for(;n.head;)n.removeNode(n.head.value);break}s=e.previous,n.removeNode(e.value),o(e.value)}const a={texts:this.texts.map((e=>({id:this.mirror.getId(e.node),value:e.value}))).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),attributes:this.attributes.map((e=>{const{attributes:t}=e;if("string"==typeof t.style){const n=JSON.stringify(e.styleDiff),r=JSON.stringify(e._unchangedStyles);n.length<t.style.length&&(n+r).split("var(").length===t.style.split("var(").length&&(t.style=e.styleDiff)}return{id:this.mirror.getId(e.node),attributes:t}})).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),removes:this.removes,adds:e};(a.texts.length||a.attributes.length||a.removes.length||a.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=e=>{if(!eu(e.target,this.mirror))switch(e.type){case"characterData":{const t=e.target.textContent;Ql(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||t===e.oldValue||this.texts.push({value:Fl(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&t?this.maskTextFn?this.maskTextFn(t,Zl(e.target)):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const t=e.target;let n=e.attributeName,r=e.target.getAttribute(n);if("value"===n){const n=gl(t),o=t.tagName;r=ml(t,o,n);const s=ul({maskInputOptions:this.maskInputOptions,tagName:o,type:n});r=dl({isMasked:Fl(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,s),element:t,value:r,maskInputFn:this.maskInputFn})}if(Ql(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||r===e.oldValue)return;let o=this.attributeMap.get(e.target);if("IFRAME"===t.tagName&&"src"===n&&!this.keepIframeSrcFn(r)){if(t.contentDocument)return;n="rr_src"}if(o||(o={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(o),this.attributeMap.set(e.target,o)),"type"===n&&"INPUT"===t.tagName&&"password"===(e.oldValue||"").toLowerCase()&&t.setAttribute("data-rr-is-password","true"),!Dl(t.tagName,n)&&(o.attributes[n]=Nl(this.doc,pl(t.tagName),pl(n),r,t,this.maskAttributeFn),"style"===n)){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(e){this.unattachedDoc=this.doc}const n=this.unattachedDoc.createElement("span");e.oldValue&&n.setAttribute("style",e.oldValue);for(const e of Array.from(t.style)){const r=t.style.getPropertyValue(e),s=t.style.getPropertyPriority(e);r!==n.style.getPropertyValue(e)||s!==n.style.getPropertyPriority(e)?o.styleDiff[e]=""===s?r:[r,s]:o._unchangedStyles[e]=[r,s]}for(const e of Array.from(n.style))""===t.style.getPropertyValue(e)&&(o.styleDiff[e]=!1)}break}case"childList":if(Ql(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;e.addedNodes.forEach((t=>this.genAdds(t,e.target))),e.removedNodes.forEach((t=>{const n=this.mirror.getId(t),r=sl(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);Ql(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||eu(t,this.mirror)||!function(e,t){return-1!==t.getId(e)}(t,this.mirror)||(this.addedSet.has(t)?(Tu(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&-1===n||tu(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[bu(n,r)]?Tu(this.movedSet,t):this.removes.push({parentId:r,id:n,isShadow:!(!sl(e.target)||!al(e.target))||void 0})),this.mapRemoves.push(t))}))}},this.genAdds=(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!this.addedSet.has(e)&&!this.movedSet.has(e)){if(this.mirror.hasNode(e)){if(eu(e,this.mirror))return;this.movedSet.add(e);let n=null;t&&this.mirror.hasNode(t)&&(n=this.mirror.getId(t)),n&&-1!==n&&(this.movedMap[bu(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);Ql(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(e.childNodes.forEach((e=>this.genAdds(e))),su(e)&&e.shadowRoot.childNodes.forEach((t=>{this.processedNodeManager.add(t,this),this.genAdds(t,e)})))}}}init(e){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach((t=>{this[t]=e[t]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function Tu(e,t){e.delete(t),t.childNodes.forEach((t=>Tu(e,t)))}function Eu(e,t,n){return 0!==e.length&&wu(e,t,n)}function wu(e,t,n){const{parentNode:r}=t;if(!r)return!1;const o=n.getId(r);return!!e.some((e=>e.id===o))||wu(e,r,n)}function Iu(e,t){return 0!==e.size&&ku(e,t)}function ku(e,t){const{parentNode:n}=t;return!!n&&(!!e.has(n)||ku(e,n))}let Cu;const Ru=e=>{if(!Cu)return e;return(...t)=>{try{return e(...t)}catch(e){if(Cu&&!0===Cu(e))return()=>{};throw e}}};function xu(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}const Au=[];function Lu(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(e){}return e&&e.target}function Ou(e,t){const n=new Su;Au.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver;const o=xu([window,"optionalAccess",e=>e.Zone,"optionalAccess",e=>e.__symbol__,"optionalCall",e=>e("MutationObserver")]);o&&window[o]&&(r=window[o]);const s=new r(Ru((t=>{e.onMutation&&!1===e.onMutation(t)||n.processMutations.bind(n)(t)})));return s.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),s}function Nu({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,sampling:a}){if(!1===a.mouseInteraction)return()=>{};const i=!0===a.mouseInteraction||void 0===a.mouseInteraction?{}:a.mouseInteraction,c=[];let l=null;return Object.keys(gu).filter((e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==i[e])).forEach((a=>{let i=pl(a);const u=(t=>a=>{const i=Lu(a);if(Ql(i,r,o,s,!0))return;let c=null,u=t;if("pointerType"in a){switch(a.pointerType){case"mouse":c=mu.Mouse;break;case"touch":c=mu.Touch;break;case"pen":c=mu.Pen}c===mu.Touch?gu[t]===gu.MouseDown?u="TouchStart":gu[t]===gu.MouseUp&&(u="TouchEnd"):mu.Pen}else nu(a)&&(c=mu.Touch);null!==c?(l=c,(u.startsWith("Touch")&&c===mu.Touch||u.startsWith("Mouse")&&c===mu.Mouse)&&(c=null)):gu[t]===gu.Click&&(c=l,l=null);const d=nu(a)?a.changedTouches[0]:a;if(!d)return;const p=n.getId(i),{clientX:h,clientY:f}=d;Ru(e)({type:gu[u],id:p,x:h,y:f,...null!==c&&{pointerType:c}})})(a);if(window.PointerEvent)switch(gu[a]){case gu.MouseDown:case gu.MouseUp:i=i.replace("mouse","pointer");break;case gu.TouchStart:case gu.TouchEnd:return}c.push(Gl(i,u,t))})),Ru((()=>{c.forEach((e=>e()))}))}function Du({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,sampling:a}){return Gl("scroll",Ru(Hl(Ru((a=>{const i=Lu(a);if(!i||Ql(i,r,o,s,!0))return;const c=n.getId(i);if(i===t&&t.defaultView){const n=Kl(t.defaultView);e({id:c,x:n.left,y:n.top})}else e({id:c,x:i.scrollLeft,y:i.scrollTop})})),a.scroll||100)),t)}const Pu=["INPUT","TEXTAREA","SELECT"],Mu=new WeakMap;function Fu({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,ignoreClass:a,ignoreSelector:i,maskInputOptions:c,maskInputFn:l,sampling:u,userTriggeredOnInput:d,maskTextClass:p,unmaskTextClass:h,maskTextSelector:f,unmaskTextSelector:g}){function m(e){let n=Lu(e);const u=e.isTrusted,m=n&&hl(n.tagName);if("OPTION"===m&&(n=n.parentElement),!n||!m||Pu.indexOf(m)<0||Ql(n,r,o,s,!0))return;const _=n;if(_.classList.contains(a)||i&&_.matches(i))return;const v=gl(n);let b=ml(_,m,v),S=!1;const T=ul({maskInputOptions:c,tagName:m,type:v}),E=Fl(n,p,f,h,g,T);"radio"!==v&&"checkbox"!==v||(S=n.checked),b=dl({isMasked:E,element:n,value:b,maskInputFn:l}),y(n,d?{text:b,isChecked:S,userTriggered:u}:{text:b,isChecked:S});const w=n.name;"radio"===v&&w&&S&&t.querySelectorAll(`input[type="radio"][name="${w}"]`).forEach((e=>{if(e!==n){const t=dl({isMasked:E,element:e,value:ml(e,m,v),maskInputFn:l});y(e,d?{text:t,isChecked:!S,userTriggered:!1}:{text:t,isChecked:!S})}}))}function y(t,r){const o=Mu.get(t);if(!o||o.text!==r.text||o.isChecked!==r.isChecked){Mu.set(t,r);const o=n.getId(t);Ru(e)({...r,id:o})}}const _=("last"===u.input?["change"]:["input","change"]).map((e=>Gl(e,Ru(m),t))),v=t.defaultView;if(!v)return()=>{_.forEach((e=>e()))};const b=v.Object.getOwnPropertyDescriptor(v.HTMLInputElement.prototype,"value"),S=[[v.HTMLInputElement.prototype,"value"],[v.HTMLInputElement.prototype,"checked"],[v.HTMLSelectElement.prototype,"value"],[v.HTMLTextAreaElement.prototype,"value"],[v.HTMLSelectElement.prototype,"selectedIndex"],[v.HTMLOptionElement.prototype,"selected"]];return b&&b.set&&_.push(...S.map((e=>Vl(e[0],e[1],{set(){Ru(m)({target:this,isTrusted:!1})}},!1,v)))),Ru((()=>{_.forEach((e=>e()))}))}function Uu(e){return function(e,t){if(Gu("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||Gu("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||Gu("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||Gu("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){const n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else if(e.parentStyleSheet){const n=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(n)}return t}(e,[])}function ju(e,t,n){let r,o;return e?(e.ownerNode?r=t.getId(e.ownerNode):o=n.getId(e),{styleId:o,id:r}):{}}function Bu({mirror:e,stylesheetManager:t},n){let r=null;r="#document"===n.nodeName?e.getId(n):e.getId(n.host);const o="#document"===n.nodeName?xu([n,"access",e=>e.defaultView,"optionalAccess",e=>e.Document]):xu([n,"access",e=>e.ownerDocument,"optionalAccess",e=>e.defaultView,"optionalAccess",e=>e.ShadowRoot]),s=xu([o,"optionalAccess",e=>e.prototype])?Object.getOwnPropertyDescriptor(xu([o,"optionalAccess",e=>e.prototype]),"adoptedStyleSheets"):void 0;return null!==r&&-1!==r&&o&&s?(Object.defineProperty(n,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get(){return xu([s,"access",e=>e.get,"optionalAccess",e=>e.call,"call",e=>e(this)])},set(e){const n=xu([s,"access",e=>e.set,"optionalAccess",e=>e.call,"call",t=>t(this,e)]);if(null!==r&&-1!==r)try{t.adoptStyleSheets(e,r)}catch(e){}return n}}),Ru((()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get:s.get,set:s.set})}))):()=>{}}function $u(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};const r=Ou(e,e.doc),o=function({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(!1===t.mousemove)return()=>{};const o="number"==typeof t.mousemove?t.mousemove:50,s="number"==typeof t.mousemoveCallback?t.mousemoveCallback:500;let a,i=[];const c=Hl(Ru((t=>{const n=Date.now()-a;e(i.map((e=>(e.timeOffset-=n,e))),t),i=[],a=null})),s),l=Ru(Hl(Ru((e=>{const t=Lu(e),{clientX:n,clientY:o}=nu(e)?e.changedTouches[0]:e;a||(a=Yl()),i.push({x:n,y:o,id:r.getId(t),timeOffset:Yl()-a}),c("undefined"!=typeof DragEvent&&e instanceof DragEvent?fu.Drag:e instanceof MouseEvent?fu.MouseMove:fu.TouchMove)})),o,{trailing:!1})),u=[Gl("mousemove",l,n),Gl("touchmove",l,n),Gl("drag",l,n)];return Ru((()=>{u.forEach((e=>e()))}))}(e),s=Nu(e),a=Du(e),i=function({viewportResizeCb:e},{win:t}){let n=-1,r=-1;return Gl("resize",Ru(Hl(Ru((()=>{const t=Xl(),o=Jl();n===t&&r===o||(e({width:Number(o),height:Number(t)}),n=t,r=o)})),200)),t)}(e,{win:n}),c=Fu(e),l=function({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:o,sampling:s,doc:a}){const i=Ru((a=>Hl(Ru((s=>{const i=Lu(s);if(!i||Ql(i,t,n,r,!0))return;const{currentTime:c,volume:l,muted:u,playbackRate:d}=i;e({type:a,id:o.getId(i),currentTime:c,volume:l,muted:u,playbackRate:d})})),s.media||500))),c=[Gl("play",i(0),a),Gl("pause",i(1),a),Gl("seeked",i(2),a),Gl("volumechange",i(3),a),Gl("ratechange",i(4),a)];return Ru((()=>{c.forEach((e=>e()))}))}(e),u=function({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const o=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(o,{apply:Ru(((r,o,s)=>{const[a,i]=s,{id:c,styleId:l}=ju(o,t,n.styleMirror);return(c&&-1!==c||l&&-1!==l)&&e({id:c,styleId:l,adds:[{rule:a,index:i}]}),r.apply(o,s)}))});const s=r.CSSStyleSheet.prototype.deleteRule;let a,i;r.CSSStyleSheet.prototype.deleteRule=new Proxy(s,{apply:Ru(((r,o,s)=>{const[a]=s,{id:i,styleId:c}=ju(o,t,n.styleMirror);return(i&&-1!==i||c&&-1!==c)&&e({id:i,styleId:c,removes:[{index:a}]}),r.apply(o,s)}))}),r.CSSStyleSheet.prototype.replace&&(a=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(a,{apply:Ru(((r,o,s)=>{const[a]=s,{id:i,styleId:c}=ju(o,t,n.styleMirror);return(i&&-1!==i||c&&-1!==c)&&e({id:i,styleId:c,replace:a}),r.apply(o,s)}))})),r.CSSStyleSheet.prototype.replaceSync&&(i=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(i,{apply:Ru(((r,o,s)=>{const[a]=s,{id:i,styleId:c}=ju(o,t,n.styleMirror);return(i&&-1!==i||c&&-1!==c)&&e({id:i,styleId:c,replaceSync:a}),r.apply(o,s)}))}));const c={};Wu("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(Wu("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),Wu("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),Wu("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const l={};return Object.entries(c).forEach((([r,o])=>{l[r]={insertRule:o.prototype.insertRule,deleteRule:o.prototype.deleteRule},o.prototype.insertRule=new Proxy(l[r].insertRule,{apply:Ru(((r,o,s)=>{const[a,i]=s,{id:c,styleId:l}=ju(o.parentStyleSheet,t,n.styleMirror);return(c&&-1!==c||l&&-1!==l)&&e({id:c,styleId:l,adds:[{rule:a,index:[...Uu(o),i||0]}]}),r.apply(o,s)}))}),o.prototype.deleteRule=new Proxy(l[r].deleteRule,{apply:Ru(((r,o,s)=>{const[a]=s,{id:i,styleId:c}=ju(o.parentStyleSheet,t,n.styleMirror);return(i&&-1!==i||c&&-1!==c)&&e({id:i,styleId:c,removes:[{index:[...Uu(o),a]}]}),r.apply(o,s)}))})})),Ru((()=>{r.CSSStyleSheet.prototype.insertRule=o,r.CSSStyleSheet.prototype.deleteRule=s,a&&(r.CSSStyleSheet.prototype.replace=a),i&&(r.CSSStyleSheet.prototype.replaceSync=i),Object.entries(c).forEach((([e,t])=>{t.prototype.insertRule=l[e].insertRule,t.prototype.deleteRule=l[e].deleteRule}))}))}(e,{win:n}),d=Bu(e,e.doc),p=function({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:o}){const s=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=new Proxy(s,{apply:Ru(((o,a,i)=>{const[c,l,u]=i;if(n.has(c))return s.apply(a,[c,l,u]);const{id:d,styleId:p}=ju(xu([a,"access",e=>e.parentRule,"optionalAccess",e=>e.parentStyleSheet]),t,r.styleMirror);return(d&&-1!==d||p&&-1!==p)&&e({id:d,styleId:p,set:{property:c,value:l,priority:u},index:Uu(a.parentRule)}),o.apply(a,i)}))});const a=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=new Proxy(a,{apply:Ru(((o,s,i)=>{const[c]=i;if(n.has(c))return a.apply(s,[c]);const{id:l,styleId:u}=ju(xu([s,"access",e=>e.parentRule,"optionalAccess",e=>e.parentStyleSheet]),t,r.styleMirror);return(l&&-1!==l||u&&-1!==u)&&e({id:l,styleId:u,remove:{property:c},index:Uu(s.parentRule)}),o.apply(s,i)}))}),Ru((()=>{o.CSSStyleDeclaration.prototype.setProperty=s,o.CSSStyleDeclaration.prototype.removeProperty=a}))}(e,{win:n}),h=e.collectFonts?function({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],o=new WeakMap,s=n.FontFace;n.FontFace=function(e,t,n){const r=new s(e,t,n);return o.set(r,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),r};const a=zl(t.fonts,"add",(function(t){return function(n){return pu(Ru((()=>{const t=o.get(n);t&&(e(t),o.delete(n))})),0),t.apply(this,[n])}}));return r.push((()=>{n.FontFace=s})),r.push(a),Ru((()=>{r.forEach((e=>e()))}))}(e):()=>{},f=function(e){const{doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,selectionCb:a}=e;let i=!0;const c=Ru((()=>{const e=t.getSelection();if(!e||i&&xu([e,"optionalAccess",e=>e.isCollapsed]))return;i=e.isCollapsed||!1;const c=[],l=e.rangeCount||0;for(let t=0;t<l;t++){const a=e.getRangeAt(t),{startContainer:i,startOffset:l,endContainer:u,endOffset:d}=a;Ql(i,r,o,s,!0)||Ql(u,r,o,s,!0)||c.push({start:n.getId(i),startOffset:l,end:n.getId(u),endOffset:d})}a({ranges:c})}));return c(),Gl("selectionchange",c)}(e),g=function({doc:e,customElementCb:t}){const n=e.defaultView;return n&&n.customElements?zl(n.customElements,"define",(function(e){return function(n,r,o){try{t({define:{name:n}})}catch(e){}return e.apply(this,[n,r,o])}})):()=>{}}(e),m=[];for(const t of e.plugins)m.push(t.observer(t.callback,n,t.options));return Ru((()=>{Au.forEach((e=>e.reset())),r.disconnect(),o(),s(),a(),i(),c(),l(),u(),d(),p(),h(),f(),g(),m.forEach((e=>e()))}))}function Gu(e){return void 0!==window[e]}function Wu(e){return Boolean(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class qu{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,t,n,r){const o=n||this.getIdToRemoteIdMap(e),s=r||this.getRemoteIdToIdMap(e);let a=o.get(t);return a||(a=this.generateIdFn(),o.set(t,a),s.set(a,t)),a}getIds(e,t){const n=this.getIdToRemoteIdMap(e),r=this.getRemoteIdToIdMap(e);return t.map((t=>this.getId(e,t,n,r)))}getRemoteId(e,t,n){const r=n||this.getRemoteIdToIdMap(e);if("number"!=typeof t)return t;const o=r.get(t);return o||-1}getRemoteIds(e,t){const n=this.getRemoteIdToIdMap(e);return t.map((t=>this.getRemoteId(e,t,n)))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}function Hu(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}class Vu{constructor(){this.crossOriginIframeMirror=new qu(bl),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class zu{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new qu(bl),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new qu(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),Hu([this,"access",e=>e.loadListener,"optionalCall",t=>t(e)]),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){const t=e;if("rrweb"!==t.data.type||t.origin!==t.data.origin)return;if(!e.source)return;const n=this.crossOriginIframeMap.get(e.source);if(!n)return;const r=this.transformCrossOriginEvent(n,t.data.event);r&&this.wrappedEmit(r,t.data.isCheckout)}transformCrossOriginEvent(e,t){switch(t.type){case hu.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);const n=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,n),this.patchRootIdOnNode(t.data.node,n),{timestamp:t.timestamp,type:hu.IncrementalSnapshot,data:{source:fu.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case hu.Meta:case hu.Load:case hu.DomContentLoaded:return!1;case hu.Plugin:return t;case hu.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case hu.IncrementalSnapshot:switch(t.data.source){case fu.Mutation:return t.data.adds.forEach((t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e);const n=this.crossOriginIframeRootIdMap.get(e);n&&this.patchRootIdOnNode(t.node,n)})),t.data.removes.forEach((t=>{this.replaceIds(t,e,["parentId","id"])})),t.data.attributes.forEach((t=>{this.replaceIds(t,e,["id"])})),t.data.texts.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case fu.Drag:case fu.TouchMove:case fu.MouseMove:return t.data.positions.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case fu.ViewportResize:return!1;case fu.MediaInteraction:case fu.MouseInteraction:case fu.Scroll:case fu.CanvasMutation:case fu.Input:return this.replaceIds(t.data,e,["id"]),t;case fu.StyleSheetRule:case fu.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case fu.Font:return t;case fu.Selection:return t.data.ranges.forEach((t=>{this.replaceIds(t,e,["start","end"])})),t;case fu.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),Hu([t,"access",e=>e.data,"access",e=>e.styles,"optionalAccess",e=>e.forEach,"call",t=>t((t=>{this.replaceStyleIds(t,e,["styleId"])}))]),t}}return!1}replace(e,t,n,r){for(const o of r)(Array.isArray(t[o])||"number"==typeof t[o])&&(Array.isArray(t[o])?t[o]=e.getIds(n,t[o]):t[o]=e.getId(n,t[o]));return t}replaceIds(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}replaceStyleIds(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach((e=>{this.replaceIdOnNode(e,t)}))}patchRootIdOnNode(e,t){e.type===ol.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach((e=>{this.patchRootIdOnNode(e,t)}))}}class Yu{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class Ku{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!al(e))return;if(this.shadowDoms.has(e))return;this.shadowDoms.add(e);const n=Ou({...this.bypassOptions,doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push((()=>n.disconnect())),this.restoreHandlers.push(Du({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),pu((()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(Bu({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))}),0)}observeAttachShadow(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,t){const n=this;this.restoreHandlers.push(zl(e.prototype,"attachShadow",(function(e){return function(r){const o=e.call(this,r);return this.shadowRoot&&lu(this)&&n.addShadowRoot(this.shadowRoot,t),o}})))}reset(){this.restoreHandlers.forEach((e=>{try{e()}catch(e){}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}class Xu{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}}class Ju{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new au,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0===e.length)return;const n={id:t,styleIds:[]},r=[];for(const t of e){let e;this.styleMirror.has(t)?e=this.styleMirror.getId(t):(e=this.styleMirror.add(t),r.push({styleId:e,rules:Array.from(t.rules||CSSRule,((e,t)=>({rule:cl(e),index:t})))})),n.styleIds.push(e)}r.length>0&&(n.styles=r),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class Zu{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){!function(...e){du("requestAnimationFrame")(...e)}((()=>{this.clear(),this.loop&&this.periodicallyClear()}))}inOtherBuffer(e,t){const n=this.nodeMap.get(e);return n&&Array.from(n).some((e=>e!==t))}add(e,t){this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}let Qu,ed;const td=new ll;function nd(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:o="rr-block",blockSelector:s=null,unblockSelector:a=null,ignoreClass:i="rr-ignore",ignoreSelector:c=null,maskAllText:l=!1,maskTextClass:u="rr-mask",unmaskTextClass:d=null,maskTextSelector:p=null,unmaskTextSelector:h=null,inlineStylesheet:f=!0,maskAllInputs:g,maskInputOptions:m,slimDOMOptions:y,maskAttributeFn:_,maskInputFn:v,maskTextFn:b,maxCanvasSize:S=null,packFn:T,sampling:E={},dataURLOptions:w={},mousemoveWait:I,recordCanvas:k=!1,recordCrossOriginIframes:C=!1,recordAfter:R=("DOMContentLoaded"===e.recordAfter?e.recordAfter:"load"),userTriggeredOnInput:x=!1,collectFonts:A=!1,inlineImages:L=!1,plugins:O,keepIframeSrcFn:N=(()=>!1),ignoreCSSAttributes:D=new Set([]),errorHandler:P,onMutation:M,getCanvasManager:F}=e;Cu=P;const U=!C||window.parent===window;let j=!1;if(!U)try{window.parent.document&&(j=!1)}catch(e){j=!0}if(U&&!t)throw new Error("emit function is required");void 0!==I&&void 0===E.mousemove&&(E.mousemove=I),td.reset();const B=!0===g?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:void 0!==m?m:{},$=!0===y||"all"===y?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===y,headMetaDescKeywords:"all"===y}:y||{};let G;!function(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let t=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do{if(this===t)return!0}while(t=t&&t.parentNode);return!1})}();let W=0;const q=e=>{for(const t of O||[])t.eventProcessor&&(e=t.eventProcessor(e));return T&&!j&&(e=T(e)),e};Qu=(e,o)=>{const s=e;if(s.timestamp=Yl(),!nr([Au,"access",e=>e[0],"optionalAccess",e=>e.isFrozen,"call",e=>e()])||s.type===hu.FullSnapshot||s.type===hu.IncrementalSnapshot&&s.data.source===fu.Mutation||Au.forEach((e=>e.unfreeze())),U)nr([t,"optionalCall",e=>e(q(s),o)]);else if(j){const e={type:"rrweb",event:q(s),origin:window.location.origin,isCheckout:o};window.parent.postMessage(e,"*")}if(s.type===hu.FullSnapshot)G=s,W=0;else if(s.type===hu.IncrementalSnapshot){if(s.data.source===fu.Mutation&&s.data.isAttachIframe)return;W++;const e=r&&W>=r,t=n&&G&&s.timestamp-G.timestamp>n;(e||t)&&Q(!0)}};const H=e=>{Qu({type:hu.IncrementalSnapshot,data:{source:fu.Mutation,...e}})},V=e=>Qu({type:hu.IncrementalSnapshot,data:{source:fu.Scroll,...e}}),z=e=>Qu({type:hu.IncrementalSnapshot,data:{source:fu.CanvasMutation,...e}}),Y=new Ju({mutationCb:H,adoptedStyleSheetCb:e=>Qu({type:hu.IncrementalSnapshot,data:{source:fu.AdoptedStyleSheet,...e}})}),K="boolean"==typeof __RRWEB_EXCLUDE_IFRAME__&&__RRWEB_EXCLUDE_IFRAME__?new Vu:new zu({mirror:td,mutationCb:H,stylesheetManager:Y,recordCrossOriginIframes:C,wrappedEmit:Qu});for(const e of O||[])e.getMirror&&e.getMirror({nodeMirror:td,crossOriginIframeMirror:K.crossOriginIframeMirror,crossOriginIframeStyleMirror:K.crossOriginIframeStyleMirror});const X=new Zu,J=function(e,t){try{return e?e(t):new Xu}catch(e){return console.warn("Unable to initialize CanvasManager"),new Xu}}(F,{mirror:td,win:window,mutationCb:e=>Qu({type:hu.IncrementalSnapshot,data:{source:fu.CanvasMutation,...e}}),recordCanvas:k,blockClass:o,blockSelector:s,unblockSelector:a,maxCanvasSize:S,sampling:E.canvas,dataURLOptions:w,errorHandler:P}),Z="boolean"==typeof __RRWEB_EXCLUDE_SHADOW_DOM__&&__RRWEB_EXCLUDE_SHADOW_DOM__?new Yu:new Ku({mutationCb:H,scrollCb:V,bypassOptions:{onMutation:M,blockClass:o,blockSelector:s,unblockSelector:a,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,inlineStylesheet:f,maskInputOptions:B,dataURLOptions:w,maskAttributeFn:_,maskTextFn:b,maskInputFn:v,recordCanvas:k,inlineImages:L,sampling:E,slimDOMOptions:$,iframeManager:K,stylesheetManager:Y,canvasManager:J,keepIframeSrcFn:N,processedNodeManager:X},mirror:td}),Q=(e=!1)=>{Qu({type:hu.Meta,data:{href:window.location.href,width:Jl(),height:Xl()}},e),Y.reset(),Z.init(),Au.forEach((e=>e.lock()));const t=function(e,t){const{mirror:n=new ll,blockClass:r="rr-block",blockSelector:o=null,unblockSelector:s=null,maskAllText:a=!1,maskTextClass:i="rr-mask",unmaskTextClass:c=null,maskTextSelector:l=null,unmaskTextSelector:u=null,inlineStylesheet:d=!0,inlineImages:p=!1,recordCanvas:h=!1,maskAllInputs:f=!1,maskAttributeFn:g,maskTextFn:m,maskInputFn:y,slimDOM:_=!1,dataURLOptions:v,preserveWhiteSpace:b,onSerialize:S,onIframeLoad:T,iframeLoadTimeout:E,onStylesheetLoad:w,stylesheetLoadTimeout:I,keepIframeSrcFn:k=(()=>!1)}=t||{};return Bl(e,{doc:e,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,maskAllText:a,maskTextClass:i,unmaskTextClass:c,maskTextSelector:l,unmaskTextSelector:u,skipChild:!1,inlineStylesheet:d,maskInputOptions:!0===f?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===f?{}:f,maskAttributeFn:g,maskTextFn:m,maskInputFn:y,slimDOMOptions:!0===_||"all"===_?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===_,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===_?{}:_,dataURLOptions:v,inlineImages:p,recordCanvas:h,preserveWhiteSpace:b,onSerialize:S,onIframeLoad:T,iframeLoadTimeout:E,onStylesheetLoad:w,stylesheetLoadTimeout:I,keepIframeSrcFn:k,newlyAddedElement:!1})}(document,{mirror:td,blockClass:o,blockSelector:s,unblockSelector:a,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,inlineStylesheet:f,maskAllInputs:B,maskAttributeFn:_,maskInputFn:v,maskTextFn:b,slimDOM:$,dataURLOptions:w,recordCanvas:k,inlineImages:L,onSerialize:e=>{ru(e,td)&&K.addIframe(e),ou(e,td)&&Y.trackLinkElement(e),su(e)&&Z.addShadowRoot(e.shadowRoot,document)},onIframeLoad:(e,t)=>{K.attachIframe(e,t),Z.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{Y.attachLinkElement(e,t)},keepIframeSrcFn:N});if(!t)return console.warn("Failed to snapshot the document");Qu({type:hu.FullSnapshot,data:{node:t,initialOffset:Kl(window)}}),Au.forEach((e=>e.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Y.adoptStyleSheets(document.adoptedStyleSheets,td.getId(document))};ed=Q;try{const e=[],t=e=>Ru($u)({onMutation:M,mutationCb:H,mousemoveCb:(e,t)=>Qu({type:hu.IncrementalSnapshot,data:{source:t,positions:e}}),mouseInteractionCb:e=>Qu({type:hu.IncrementalSnapshot,data:{source:fu.MouseInteraction,...e}}),scrollCb:V,viewportResizeCb:e=>Qu({type:hu.IncrementalSnapshot,data:{source:fu.ViewportResize,...e}}),inputCb:e=>Qu({type:hu.IncrementalSnapshot,data:{source:fu.Input,...e}}),mediaInteractionCb:e=>Qu({type:hu.IncrementalSnapshot,data:{source:fu.MediaInteraction,...e}}),styleSheetRuleCb:e=>Qu({type:hu.IncrementalSnapshot,data:{source:fu.StyleSheetRule,...e}}),styleDeclarationCb:e=>Qu({type:hu.IncrementalSnapshot,data:{source:fu.StyleDeclaration,...e}}),canvasMutationCb:z,fontCb:e=>Qu({type:hu.IncrementalSnapshot,data:{source:fu.Font,...e}}),selectionCb:e=>{Qu({type:hu.IncrementalSnapshot,data:{source:fu.Selection,...e}})},customElementCb:e=>{Qu({type:hu.IncrementalSnapshot,data:{source:fu.CustomElement,...e}})},blockClass:o,ignoreClass:i,ignoreSelector:c,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,maskInputOptions:B,inlineStylesheet:f,sampling:E,recordCanvas:k,inlineImages:L,userTriggeredOnInput:x,collectFonts:A,doc:e,maskAttributeFn:_,maskInputFn:v,maskTextFn:b,keepIframeSrcFn:N,blockSelector:s,unblockSelector:a,slimDOMOptions:$,dataURLOptions:w,mirror:td,iframeManager:K,stylesheetManager:Y,shadowDomManager:Z,processedNodeManager:X,canvasManager:J,ignoreCSSAttributes:D,plugins:nr([O,"optionalAccess",e=>e.filter,"call",e=>e((e=>e.observer)),"optionalAccess",e=>e.map,"call",e=>e((e=>({observer:e.observer,options:e.options,callback:t=>Qu({type:hu.Plugin,data:{plugin:e.name,payload:t}})})))])||[]},{});K.addLoadListener((n=>{try{e.push(t(n.contentDocument))}catch(e){console.warn(e)}}));const n=()=>{Q(),e.push(t(document))};return"interactive"===document.readyState||"complete"===document.readyState?n():(e.push(Gl("DOMContentLoaded",(()=>{Qu({type:hu.DomContentLoaded,data:{}}),"DOMContentLoaded"===R&&n()}))),e.push(Gl("load",(()=>{Qu({type:hu.Load,data:{}}),"load"===R&&n()}),window))),()=>{e.forEach((e=>e())),X.destroy(),ed=void 0,Cu=void 0}}catch(e){console.warn(e)}}nd.mirror=td,nd.takeFullSnapshot=function(e){if(!ed)throw new Error("please take full snapshot after start recording");ed(e)};const rd=3;function od(e){return e>9999999999?e:1e3*e}function sd(e){return e>9999999999?e/1e3:e}function ad(e,t){"sentry.transaction"!==t.category&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate((()=>(e.throttledAddEvent({type:hu.Custom,timestamp:1e3*(t.timestamp||0),data:{tag:"breadcrumb",payload:nn(t,10,1e3)}}),"console"===t.category))))}const id="button,a";function cd(e){return e.closest(id)||e}function ld(e){const t=ud(e);return t&&t instanceof Element?cd(t):t}function ud(e){return function(e){return"object"==typeof e&&!!e&&"target"in e}(e)?e.target:e}let dd;function pd(e){return dd||(dd=[],Ve(Kc,"open",(function(e){return function(...t){if(dd)try{dd.forEach((e=>e()))}catch(e){}return e.apply(Kc,t)}}))),dd.push(e),()=>{const t=dd?dd.indexOf(e):-1;t>-1&&dd.splice(t,1)}}class hd{constructor(e,t,n=ad){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=t.timeout/1e3,this._threshold=t.threshold/1e3,this._scollTimeout=t.scrollTimeout/1e3,this._replay=e,this._ignoreSelector=t.ignoreSelector,this._addBreadcrumbEvent=n}addListeners(){const e=pd((()=>{this._lastMutation=gd()}));this._teardown=()=>{e(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(e,t){if(function(e,t){if(!fd.includes(e.tagName))return!0;if("INPUT"===e.tagName&&!["submit","button"].includes(e.getAttribute("type")||""))return!0;if("A"===e.tagName&&(e.hasAttribute("download")||e.hasAttribute("target")&&"_self"!==e.getAttribute("target")))return!0;if(t&&e.matches(t))return!0;return!1}(t,this._ignoreSelector)||!function(e){return!(!e.data||"number"!=typeof e.data.nodeId||!e.timestamp)}(e))return;const n={timestamp:sd(e.timestamp),clickBreadcrumb:e,clickCount:0,node:t};this._clicks.some((e=>e.node===n.node&&Math.abs(e.timestamp-n.timestamp)<1))||(this._clicks.push(n),1===this._clicks.length&&this._scheduleCheckClicks())}registerMutation(e=Date.now()){this._lastMutation=sd(e)}registerScroll(e=Date.now()){this._lastScroll=sd(e)}registerClick(e){const t=cd(e);this._handleMultiClick(t)}_handleMultiClick(e){this._getClicks(e).forEach((e=>{e.clickCount++}))}_getClicks(e){return this._clicks.filter((t=>t.node===e))}_checkClicks(){const e=[],t=gd();this._clicks.forEach((n=>{!n.mutationAfter&&this._lastMutation&&(n.mutationAfter=n.timestamp<=this._lastMutation?this._lastMutation-n.timestamp:void 0),!n.scrollAfter&&this._lastScroll&&(n.scrollAfter=n.timestamp<=this._lastScroll?this._lastScroll-n.timestamp:void 0),n.timestamp+this._timeout<=t&&e.push(n)}));for(const t of e){const e=this._clicks.indexOf(t);e>-1&&(this._generateBreadcrumbs(t),this._clicks.splice(e,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(e){const t=this._replay,n=e.scrollAfter&&e.scrollAfter<=this._scollTimeout,r=e.mutationAfter&&e.mutationAfter<=this._threshold,o=!n&&!r,{clickCount:s,clickBreadcrumb:a}=e;if(o){const n=1e3*Math.min(e.mutationAfter||this._timeout,this._timeout),r=n<1e3*this._timeout?"mutation":"timeout",o={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.slowClickDetected",data:{...a.data,url:Kc.location.href,route:t.getCurrentRoute(),timeAfterClickMs:n,endReason:r,clickCount:s||1}};this._addBreadcrumbEvent(t,o)}else if(s>1){const e={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.multiClick",data:{...a.data,url:Kc.location.href,route:t.getCurrentRoute(),clickCount:s,metric:!0}};this._addBreadcrumbEvent(t,e)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=setTimeout((()=>this._checkClicks()),1e3)}}const fd=["A","BUTTON","INPUT"];function gd(){return Date.now()/1e3}function md(e,t){try{if(!function(e){return e.type===rd}(t))return;const{source:n}=t.data;if(n===fu.Mutation&&e.registerMutation(t.timestamp),n===fu.Scroll&&e.registerScroll(t.timestamp),function(e){return e.data.source===fu.MouseInteraction}(t)){const{type:n,id:r}=t.data,o=nd.mirror.getNode(r);o instanceof HTMLElement&&n===gu.Click&&e.registerClick(o)}}catch(e){}}function yd(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var _d;!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(_d||(_d={}));const vd=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function bd(e){const t={};for(const n in e)if(vd.has(n)){let r=n;"data-testid"!==n&&"data-test-id"!==n||(r="testId"),t[r]=e[n]}return t}const Sd=e=>t=>{if(!e.isEnabled())return;const n=function(e){const{target:t,message:n}=function(e){const t="click"===e.name;let n,r=null;try{r=t?ld(e.event):ud(e.event),n=Ae(r,{maxStringLength:200})||"<unknown>"}catch(e){n="<unknown>"}return{target:r,message:n}}(e);return yd({category:`ui.${e.name}`,...Td(t,n)})}(t);if(!n)return;const r="click"===t.name,o=r?t.event:void 0;var s,a,i;!(r&&e.clickDetector&&o&&o.target)||o.altKey||o.metaKey||o.ctrlKey||o.shiftKey||(s=e.clickDetector,a=n,i=ld(t.event),s.handleClick(a,i)),ad(e,n)};function Td(e,t){const n=nd.mirror.getId(e),r=n&&nd.mirror.getNode(n),o=r&&nd.mirror.getMeta(r),s=o&&function(e){return e.type===_d.Element}(o)?o:null;return{message:t,data:s?{nodeId:n,node:{id:n,tagName:s.tagName,textContent:Array.from(s.childNodes).map((e=>e.type===_d.Text&&e.textContent)).filter(Boolean).map((e=>e.trim())).join(""),attributes:bd(s.attributes)}}:{}}}function Ed(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=function(e){const{metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:s,target:a}=e;if(!a||function(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable}(a)||!s)return null;const i=t||r||o,c=1===s.length;if(!i&&c)return null;const l=Ae(a,{maxStringLength:200})||"<unknown>",u=Td(a,l);return yd({category:"ui.keyDown",message:l,data:{...u.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:s}})}(t);n&&ad(e,n)}const wd={resource:function(e){const{entryType:t,initiatorType:n,name:r,responseEnd:o,startTime:s,decodedBodySize:a,encodedBodySize:i,responseStatus:c,transferSize:l}=e;if(["fetch","xmlhttprequest"].includes(n))return null;return{type:`${t}.${n}`,start:kd(s),end:kd(o),name:r,data:{size:l,statusCode:c,decodedBodySize:a,encodedBodySize:i}}},paint:function(e){const{duration:t,entryType:n,name:r,startTime:o}=e,s=kd(o);return{type:n,name:r,start:s,end:s+t,data:void 0}},navigation:function(e){const{entryType:t,name:n,decodedBodySize:r,duration:o,domComplete:s,encodedBodySize:a,domContentLoadedEventStart:i,domContentLoadedEventEnd:c,domInteractive:l,loadEventStart:u,loadEventEnd:d,redirectCount:p,startTime:h,transferSize:f,type:g}=e;if(0===o)return null;return{type:`${t}.${g}`,start:kd(h),end:kd(s),name:n,data:{size:f,decodedBodySize:r,encodedBodySize:a,duration:o,domInteractive:l,domContentLoadedEventStart:i,domContentLoadedEventEnd:c,loadEventStart:u,loadEventEnd:d,domComplete:s,redirectCount:p}}}};function Id(e){return wd[e.entryType]?wd[e.entryType](e):null}function kd(e){return((xn||Kc.performance.timeOrigin)+e)/1e3}function Cd(e){function t(t){e.performanceEntries.includes(t)||e.performanceEntries.push(t)}function n({entries:e}){e.forEach(t)}const r=[];return["navigation","paint","resource"].forEach((e=>{r.push($a(e,n))})),r.push(Ba((({metric:t})=>{e.replayPerformanceEntries.push(function(e){const t=e.entries,n=t[t.length-1],r=n?n.element:void 0,o=e.value,s=kd(o);return{type:"largest-contentful-paint",name:"largest-contentful-paint",start:s,end:s,data:{value:o,size:o,nodeId:r?nd.mirror.getId(r):void 0}}}(t))}))),()=>{r.forEach((e=>e()))}}const Rd="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,xd='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,a=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),s=a.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(a,n),O(a,s-8,r.d()),O(a,s-4,e),a}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(G)return G.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(let r=0,e=t.length;r<e;r++)n+=t[r].length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function Ad(e,t){Rd&&(je.info(e),t&&Od(e))}function Ld(e,t){Rd&&(je.info(e),t&&setTimeout((()=>{Od(e)}),0))}function Od(e){Ir({category:"console",data:{logger:"replay"},level:"info",message:e},{level:"info"})}class Nd extends Error{constructor(){super("Event buffer exceeded maximum size of 20000000.")}}class Dd{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(e){const t=JSON.stringify(e).length;if(this._totalSize+=t,this._totalSize>tl)throw new Nd;this.events.push(e)}finish(){return new Promise((e=>{const t=this.events;this.clear(),e(JSON.stringify(t))}))}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const e=this.events.map((e=>e.timestamp)).sort()[0];return e?od(e):null}}class Pd{constructor(e){this._worker=e,this._id=0}ensureReady(){return this._ensureReadyPromise||(this._ensureReadyPromise=new Promise(((e,t)=>{this._worker.addEventListener("message",(({data:n})=>{n.success?e():t()}),{once:!0}),this._worker.addEventListener("error",(e=>{t(e)}),{once:!0})}))),this._ensureReadyPromise}destroy(){Ad("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(e,t){const n=this._getAndIncrementId();return new Promise(((r,o)=>{const s=({data:t})=>{const a=t;if(a.method===e&&a.id===n){if(this._worker.removeEventListener("message",s),!a.success)return Rd&&je.error("[Replay]",a.response),void o(new Error("Error in compression worker"));r(a.response)}};this._worker.addEventListener("message",s),this._worker.postMessage({id:n,method:e,arg:t})}))}_getAndIncrementId(){return this._id++}}class Md{constructor(e){this._worker=new Pd(e),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(e){const t=od(e.timestamp);(!this._earliestTimestamp||t<this._earliestTimestamp)&&(this._earliestTimestamp=t);const n=JSON.stringify(e);return this._totalSize+=n.length,this._totalSize>tl?Promise.reject(new Nd):this._sendEventToWorker(n)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,(e=>{Rd&&je.warn('[Replay] Sending "clear" message to worker failed',e)}))}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(e){return this._worker.postMessage("addEvent",e)}async _finishRequest(){const e=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,e}}class Fd{constructor(e){this._fallback=new Dd,this._compression=new Md(e),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(e){this._used.hasCheckout=e}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(e){return this._used.addEvent(e)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(e){return void Ad("[Replay] Failed to load the compression worker, falling back to simple buffer")}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:e,hasCheckout:t}=this._fallback,n=[];for(const t of e)n.push(this._compression.addEvent(t));this._compression.hasCheckout=t,this._used=this._compression;try{await Promise.all(n)}catch(e){Rd&&je.warn("[Replay] Failed to add events when switching buffers.",e)}}}function Ud({useCompression:e,workerUrl:t}){if(e&&window.Worker){const e=function(e){try{const t=e||function(){if("undefined"==typeof __SENTRY_EXCLUDE_REPLAY_WORKER__||!__SENTRY_EXCLUDE_REPLAY_WORKER__)return function(){const e=new Blob([xd]);return URL.createObjectURL(e)}();return""}();if(!t)return;Ad("[Replay] Using compression worker"+(e?` from ${e}`:""));const n=new Worker(t);return new Fd(n)}catch(e){Ad("[Replay] Failed to create compression worker")}}(t);if(e)return e}return Ad("[Replay] Using simple buffer"),new Dd}function jd(){try{return"sessionStorage"in Kc&&!!Kc.sessionStorage}catch(e){return!1}}function Bd(e){!function(){if(!jd())return;try{Kc.sessionStorage.removeItem(Xc)}catch(e){}}(),e.session=void 0}function $d(e){return void 0!==e&&Math.random()<e}function Gd(e){const t=Date.now();return{id:e.id||ft(),started:e.started||t,lastActivity:e.lastActivity||t,segmentId:e.segmentId||0,sampled:e.sampled,previousSessionId:e.previousSessionId}}function Wd(e){if(jd())try{Kc.sessionStorage.setItem(Xc,JSON.stringify(e))}catch(e){}}function qd({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){const o=function(e,t){return $d(e)?"session":!!t&&"buffer"}(e,t),s=Gd({sampled:o,previousSessionId:r});return n&&Wd(s),s}function Hd(e,t,n=+new Date){return null===e||void 0===t||t<0||0!==t&&e+t<=n}function Vd(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return Hd(e.started,t,r)||Hd(e.lastActivity,n,r)}function zd(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!!Vd(e,{sessionIdleExpire:t,maxReplayDuration:n})&&("buffer"!==e.sampled||0!==e.segmentId)}function Yd({traceInternals:e,sessionIdleExpire:t,maxReplayDuration:n,previousSessionId:r},o){const s=o.stickySession&&function(e){if(!jd())return null;try{const t=Kc.sessionStorage.getItem(Xc);if(!t)return null;const n=JSON.parse(t);return Ld("[Replay] Loading existing session",e),Gd(n)}catch(e){return null}}(e);return s?zd(s,{sessionIdleExpire:t,maxReplayDuration:n})?(Ld("[Replay] Session in sessionStorage is expired, creating new one..."),qd(o,{previousSessionId:s.id})):s:(Ld("[Replay] Creating new session",e),qd(o,{previousSessionId:r}))}function Kd(e,t,n){return!!Jd(e,t)&&(Xd(e,t,n),!0)}async function Xd(e,t,n){if(!e.eventBuffer)return null;try{n&&"buffer"===e.recordingMode&&e.eventBuffer.clear(),n&&(e.eventBuffer.hasCheckout=!0);const r=function(e,t){try{if("function"==typeof t&&function(e){return e.type===hu.Custom}(e))return t(e)}catch(e){return Rd&&je.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",e),null}return e}(t,e.getOptions().beforeAddRecordingEvent);if(!r)return;return await e.eventBuffer.addEvent(r)}catch(t){const n=t&&t instanceof Nd?"addEventSizeExceeded":"addEvent";Rd&&je.error(t),await e.stop({reason:n});const r=Rr();r&&r.recordDroppedEvent("internal_sdk_error","replay")}}function Jd(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=od(t.timestamp);return!(n+e.timeouts.sessionIdlePause<Date.now())&&(!(n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration)||(Ad(`[Replay] Skipping event with timestamp ${n} because it is after maxReplayDuration`,e.getOptions()._experiments.traceInternals),!1))}function Zd(e){return!e.type}function Qd(e){return"transaction"===e.type}function ep(e){return"feedback"===e.type}function tp(e){const t=function(){const e=Rr();if(!e)return!1;const t=e.getTransport();if(!t)return!1;return t.send.__sentry__baseTransport__||!1}();return(n,r)=>{if(!e.isEnabled()||!Zd(n)&&!Qd(n))return;const o=r&&r.statusCode;t&&(!o||o<200||o>=300)||(Qd(n)?function(e,t){const n=e.getContext();t.contexts&&t.contexts.trace&&t.contexts.trace.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}(e,n):function(e,t){const n=e.getContext();t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id);if("buffer"!==e.recordingMode||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:r}=e.getOptions();if("function"==typeof r&&!r(t))return;setTimeout((()=>{e.sendBufferedReplayOrFlush()}))}(e,n))}}function np(e){return t=>{e.isEnabled()&&Zd(t)&&function(e,t){const n=t.exception&&t.exception.values&&t.exception.values[0].value;if("string"!=typeof n)return;if(n.match(/reactjs\.org\/docs\/error-decoder\.html\?invariant=(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i)){ad(e,yd({category:"replay.hydrate-error"}))}}(e,t)}}function rp(e,t=!1){const n=t?tp(e):void 0;return Object.assign(((t,r)=>{if(!e.isEnabled())return t;if(function(e){return"replay_event"===e.type}(t))return delete t.breadcrumbs,t;if(!Zd(t)&&!Qd(t)&&!ep(t))return t;if(!e.checkAndHandleExpiredSession())return t;if(ep(t))return e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),function(e,t){e.triggerUserActivity(),e.addUpdate((()=>!t.timestamp||(e.throttledAddEvent({type:hu.Custom,timestamp:1e3*t.timestamp,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1)))}(e,t),t;if(function(e,t){return!(e.type||!e.exception||!e.exception.values||!e.exception.values.length||!t.originalException||!t.originalException.__rrweb__)}(t,r)&&!e.getOptions()._experiments.captureExceptions)return Rd&&je.log("[Replay] Ignoring error from rrweb internals",t),null;const o=function(e,t){return"buffer"===e.recordingMode&&t.message!==Zc&&!(!t.exception||t.type)&&$d(e.getOptions().errorSampleRate)}(e,t);return(o||"session"===e.recordingMode)&&(t.tags={...t.tags,replayId:e.getSessionId()}),n&&n(t,{statusCode:200}),t}),{id:"Replay"})}function op(e,t){return t.map((({type:t,start:n,end:r,name:o,data:s})=>{const a=e.throttledAddEvent({type:hu.Custom,timestamp:n,data:{tag:"performanceSpan",payload:{op:t,description:o,startTimestamp:n,endTimestamp:r,data:s}}});return"string"==typeof a?Promise.resolve(null):a}))}function sp(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}(t);null!==n&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate((()=>(op(e,[n]),!1))))}}function ap(e,t){e.isEnabled()&&null!==t&&(function(e,t){return(!Rd||!e.getOptions()._experiments.traceInternals)&&ms(t,Rr())}(e,t.name)||e.addUpdate((()=>(op(e,[t]),!0))))}function ip(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{startTimestamp:t,endTimestamp:n,xhr:r}=e,o=r[Kt];if(!t||!n||!o)return null;const{method:s,url:a,status_code:i}=o;return void 0===a?null:{type:"resource.xhr",name:a,start:t/1e3,end:n/1e3,data:{method:s,statusCode:i}}}(t);ap(e,n)}}function cp(e,t){if(e)try{if("string"==typeof e)return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=mp(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch(e){}}function lp(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function up(e){try{if("string"==typeof e)return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[mp(e)];if(!e)return[void 0]}catch(t){return Rd&&je.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return Rd&&je.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function dp(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function pp(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:r,url:o,method:s,statusCode:a,request:i,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:o,data:Qe({method:s,statusCode:a,request:i,response:c})}}function hp(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function fp(e,t,n){if(!t&&0===Object.keys(e).length)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const r={headers:e,size:t},{body:o,warnings:s}=function(e){if(!e||"string"!=typeof e)return{body:e};const t=e.length>Qc,n=function(e){const t=e[0],n=e[e.length-1];return"["===t&&"]"===n||"{"===t&&"}"===n}(e);if(t){const t=e.slice(0,Qc);return n?{body:t,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${t}â¦`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch(e){}return{body:e}}(n);return r.body=o,s&&s.length>0&&(r._meta={warnings:s}),r}function gp(e,t){return Object.keys(e).reduce(((n,r)=>{const o=r.toLowerCase();return t.includes(o)&&e[r]&&(n[o]=e[r]),n}),{})}function mp(e){return new URLSearchParams(e).toString()}function yp(e,t){const n=function(e,t=Kc.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(Kc.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const r=n.href;if(!e.endsWith("/")&&r.endsWith("/"))return r.slice(0,-1);return r}(e);return ve(n,t)}async function _p(e,t,n){try{const r=await async function(e,t,n){const r=Date.now(),{startTimestamp:o=r,endTimestamp:s=r}=t,{url:a,method:i,status_code:c=0,request_body_size:l,response_body_size:u}=e.data,d=yp(a,n.networkDetailAllowUrls)&&!yp(a,n.networkDetailDenyUrls),p=d?function({networkCaptureBodies:e,networkRequestHeaders:t},n,r){const o=n?function(e,t){if(1===e.length&&"string"!=typeof e[0])return Sp(e[0],t);if(2===e.length)return Sp(e[1],t);return{}}(n,t):{};if(!e)return fp(o,r,void 0);const s=vp(n),[a,i]=up(s),c=fp(o,r,a);if(i)return dp(c,i);return c}(n,t.input,l):hp(l),h=await async function(e,{networkCaptureBodies:t,textEncoder:n,networkResponseHeaders:r},o,s){if(!e&&void 0!==s)return hp(s);const a=o?bp(o.headers,r):{};if(!o||!t&&void 0!==s)return fp(a,s,void 0);const[i,c]=await async function(e){const t=function(e){try{return e.clone()}catch(e){Rd&&je.warn("[Replay] Failed to clone response body",e)}}(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{const e=await function(e){return new Promise(((t,n)=>{const r=setTimeout((()=>n(new Error("Timeout while trying to read response body"))),500);(async function(e){return await e.text()})(e).then((e=>t(e)),(e=>n(e))).finally((()=>clearTimeout(r)))}))}(t);return[e]}catch(e){return Rd&&je.warn("[Replay] Failed to get text body from response",e),[void 0,"BODY_PARSE_ERROR"]}}(o),l=function(e,{networkCaptureBodies:t,textEncoder:n,responseBodySize:r,captureDetails:o,headers:s}){try{const a=e&&e.length&&void 0===r?cp(e,n):r;return o?fp(s,a,t?e:void 0):hp(a)}catch(e){return Rd&&je.warn("[Replay] Failed to serialize response body",e),fp(s,r,void 0)}}(i,{networkCaptureBodies:t,textEncoder:n,responseBodySize:s,captureDetails:e,headers:a});if(c)return dp(l,c);return l}(d,n,t.response,u);return{startTimestamp:o,endTimestamp:s,url:a,method:i,statusCode:c,request:p,response:h}}(e,t,n),o=pp("resource.fetch",r);ap(n.replay,o)}catch(e){Rd&&je.error("[Replay] Failed to capture fetch breadcrumb",e)}}function vp(e=[]){if(2===e.length&&"object"==typeof e[1])return e[1].body}function bp(e,t){const n={};return t.forEach((t=>{e.get(t)&&(n[t]=e.get(t))})),n}function Sp(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?bp(n,t):Array.isArray(n)?{}:gp(n,t):{}}async function Tp(e,t,n){try{const r=function(e,t,n){const r=Date.now(),{startTimestamp:o=r,endTimestamp:s=r,input:a,xhr:i}=t,{url:c,method:l,status_code:u=0,request_body_size:d,response_body_size:p}=e.data;if(!c)return null;if(!i||!yp(c,n.networkDetailAllowUrls)||yp(c,n.networkDetailDenyUrls)){return{startTimestamp:o,endTimestamp:s,url:c,method:l,statusCode:u,request:hp(d),response:hp(p)}}const h=i[Kt],f=h?gp(h.request_headers,n.networkRequestHeaders):{},g=gp(function(e){const t=e.getAllResponseHeaders();if(!t)return{};return t.split("\r\n").reduce(((e,t)=>{const[n,r]=t.split(": ");return e[n.toLowerCase()]=r,e}),{})}(i),n.networkResponseHeaders),[m,y]=n.networkCaptureBodies?up(a):[void 0],[_,v]=n.networkCaptureBodies?function(e){const t=[];try{return[e.responseText]}catch(e){t.push(e)}try{return function(e,t){try{if("string"==typeof e)return[e];if(e instanceof Document)return[e.body.outerHTML];if("json"===t&&e&&"object"==typeof e)return[JSON.stringify(e)];if(!e)return[void 0]}catch(t){return Rd&&je.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return Rd&&je.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}(e.response,e.responseType)}catch(e){t.push(e)}return Rd&&je.warn("[Replay] Failed to get xhr response body",...t),[void 0]}(i):[void 0],b=fp(f,d,m),S=fp(g,p,_);return{startTimestamp:o,endTimestamp:s,url:c,method:l,statusCode:u,request:y?dp(b,y):b,response:v?dp(S,v):S}}(e,t,n),o=pp("resource.xhr",r);ap(n.replay,o)}catch(e){Rd&&je.error("[Replay] Failed to capture xhr breadcrumb",e)}}function Ep(e,t,n){const{xhr:r,input:o}=t;if(!r)return;const s=cp(o,n.textEncoder),a=r.getResponseHeader("content-length")?lp(r.getResponseHeader("content-length")):function(e,t,n){try{return cp("json"===t&&e&&"object"==typeof e?JSON.stringify(e):e,n)}catch(e){return}}(r.response,r.responseType,n.textEncoder);void 0!==s&&(e.data.request_body_size=s),void 0!==a&&(e.data.response_body_size=a)}function wp(e){const t=Rr();try{const n=new TextEncoder,{networkDetailAllowUrls:r,networkDetailDenyUrls:o,networkCaptureBodies:s,networkRequestHeaders:a,networkResponseHeaders:i}=e.getOptions(),c={replay:e,textEncoder:n,networkDetailAllowUrls:r,networkDetailDenyUrls:o,networkCaptureBodies:s,networkRequestHeaders:a,networkResponseHeaders:i};t&&t.on?t.on("beforeAddBreadcrumb",((e,t)=>function(e,t,n){if(!t.data)return;try{(function(e){return"xhr"===e.category})(t)&&function(e){return e&&e.xhr}(n)&&(Ep(t,n,e),Tp(t,n,e)),function(e){return"fetch"===e.category}(t)&&function(e){return e&&e.response}(n)&&(!function(e,t,n){const{input:r,response:o}=t,s=cp(r?vp(r):void 0,n.textEncoder),a=o?lp(o.headers.get("content-length")):void 0;void 0!==s&&(e.data.request_body_size=s),void 0!==a&&(e.data.response_body_size=a)}(t,n,e),_p(t,n,e))}catch(e){Rd&&je.warn("Error when enriching network breadcrumb")}}(c,e,t))):(Nt(function(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{startTimestamp:t,endTimestamp:n,fetchData:r,response:o}=e;if(!n)return null;const{method:s,url:a}=r;return{type:"resource.fetch",start:t/1e3,end:n/1e3,name:a,data:{method:s,statusCode:o?o.status:void 0}}}(t);ap(e,n)}}(e)),Xt(ip(e)))}catch(e){}}let Ip=null;const kp=e=>t=>{if(!e.isEnabled())return;const n=function(e){const t=e.getLastBreadcrumb&&e.getLastBreadcrumb();if(Ip===t||!t)return null;if(Ip=t,!function(e){return!!e.category}(t)||["fetch","xhr","sentry.event","sentry.transaction"].includes(t.category)||t.category.startsWith("ui."))return null;if("console"===t.category)return function(e){const t=e.data&&e.data.arguments;if(!Array.isArray(t)||0===t.length)return yd(e);let n=!1;const r=t.map((e=>{if(!e)return e;if("string"==typeof e)return e.length>el?(n=!0,`${e.slice(0,el)}â¦`):e;if("object"==typeof e)try{const t=nn(e,7);return JSON.stringify(t).length>el?(n=!0,`${JSON.stringify(t,null,2).slice(0,el)}â¦`):t}catch(e){}return e}));return yd({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}(t);return yd(t)}(t);n&&ad(e,n)};function Cp(e){return!(!e||!e.on)}function Rp(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,o=Date.now()/1e3;return{type:"memory",name:"memory",start:o,end:o,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function xp(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession())return void(Rd&&je.warn("[Replay] Received replay event after session expired."));const o=r||!t;t=!0,e.clickDetector&&md(e.clickDetector,n),e.addUpdate((()=>{if("buffer"===e.recordingMode&&o&&e.setInitialState(),!Kd(e,n,o))return!0;if(!o)return!1;if(function(e,t){if(!t||!e.session||0!==e.session.segmentId)return;Kd(e,function(e){const t=e.getOptions();return{type:hu.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:!!e.eventBuffer&&"worker"===e.eventBuffer.type,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}(e),!1)}(e,o),e.session&&e.session.previousSessionId)return!0;if("buffer"===e.recordingMode&&e.session&&e.eventBuffer){const t=e.eventBuffer.getEarliestTimestamp();t&&(Ad(`[Replay] Updating session start time to earliest event in buffer to ${new Date(t)}`,e.getOptions()._experiments.traceInternals),e.session.started=t,e.getOptions().stickySession&&Wd(e.session))}return"session"===e.recordingMode&&e.flush(),!0}))}}async function Ap({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:o,session:s}){const a=function({recordingData:e,headers:t}){let n;const r=`${JSON.stringify(t)}\n`;if("string"==typeof e)n=`${r}${e}`;else{const t=(new TextEncoder).encode(r);n=new Uint8Array(t.length+e.length),n.set(t),n.set(e,t.length)}return n}({recordingData:e,headers:{segment_id:n}}),{urls:i,errorIds:c,traceIds:l,initialTimestamp:u}=r,d=Rr(),p=xr(),h=d&&d.getTransport(),f=d&&d.getDsn();if(!(d&&h&&f&&s.sampled))return;const g={type:Jc,replay_start_timestamp:u/1e3,timestamp:o/1e3,error_ids:c,trace_ids:l,urls:i,replay_id:t,segment_id:n,replay_type:s.sampled},m=await async function({client:e,scope:t,replayId:n,event:r}){const o={event_id:n,integrations:"object"!=typeof e._integrations||null===e._integrations||Array.isArray(e._integrations)?void 0:Object.keys(e._integrations)};e.emit&&e.emit("preprocessEvent",r,o);const s=await _r(e.getOptions(),r,o,t,e,Xr());if(!s)return null;s.platform=s.platform||"javascript";const a=e.getSdkMetadata&&e.getSdkMetadata(),{name:i,version:c}=a&&a.sdk||{};return s.sdk={...s.sdk,name:i||"sentry.javascript.unknown",version:c||"0.0.0"},s}({scope:p,client:d,replayId:t,event:g});if(!m)return d.recordDroppedEvent("event_processor","replay",g),void Ad("An event processor returned `null`, will not send event.");delete m.sdkProcessingMetadata;const y=function(e,t,n,r){return $n(Xn(e,Kn(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:"string"==typeof t?(new TextEncoder).encode(t).length:t.length},t]])}(m,a,f,d.getOptions().tunnel);let _;try{_=await h.send(y)}catch(e){const t=new Error(Zc);try{t.cause=e}catch(e){}throw t}if(!_)return _;if("number"==typeof _.statusCode&&(_.statusCode<200||_.statusCode>=300))throw new Lp(_.statusCode);const v=er({},_);if(Qn(v,"replay"))throw new Op(v);return _}class Lp extends Error{constructor(e){super(`Transport returned status code ${e}`)}}class Op extends Error{constructor(e){super("Rate limit hit"),this.rateLimits=e}}async function Np(e,t={count:0,interval:5e3}){const{recordingData:n,options:r}=e;if(n.length)try{return await Ap(e),!0}catch(n){if(n instanceof Lp||n instanceof Op)throw n;if(kr("Replays",{_retryCount:t.count}),Rd&&r._experiments&&r._experiments.captureExceptions&&Tr(n),t.count>=3){const e=new Error(`${Zc} - max retries exceeded`);try{e.cause=n}catch(e){}throw e}return t.interval*=++t.count,new Promise(((n,r)=>{setTimeout((async()=>{try{await Np(e,t),n(!0)}catch(e){r(e)}}),t.interval)}))}}const Dp="__THROTTLED";function Pp(e,t,n){const r=new Map;let o=!1;return(...s)=>{const a=Math.floor(Date.now()/1e3);if((e=>{const t=e-n;r.forEach(((e,n)=>{n<t&&r.delete(n)}))})(a),[...r.values()].reduce(((e,t)=>e+t),0)>=t){const e=o;return o=!0,e?"__SKIPPED":Dp}o=!1;const i=r.get(a)||0;return r.set(a,i+1),e(...s)}}class Mp{constructor({options:e,recordingOptions:t}){Mp.prototype.__init.call(this),Mp.prototype.__init2.call(this),Mp.prototype.__init3.call(this),Mp.prototype.__init4.call(this),Mp.prototype.__init5.call(this),Mp.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:3e5,sessionIdleExpire:9e5},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=t,this._options=e,this._debouncedFlush=function(e,t,n){let r,o,s;const a=n&&n.maxWait?Math.max(n.maxWait,t):0;function i(){return c(),r=e(),r}function c(){void 0!==o&&clearTimeout(o),void 0!==s&&clearTimeout(s),o=s=void 0}function l(){return o&&clearTimeout(o),o=setTimeout(i,t),a&&void 0===s&&(s=setTimeout(i,a)),r}return l.cancel=c,l.flush=function(){return void 0!==o||void 0!==s?i():r},l}((()=>this._flush()),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=Pp(((e,t)=>function(e,t,n){return Jd(e,t)?Xd(e,t,n):Promise.resolve(null)}(this,e,t)),300,5);const{slowClickTimeout:n,slowClickIgnoreSelectors:r}=this.getOptions(),o=n?{threshold:Math.min(3e3,n),timeout:n,scrollTimeout:300,ignoreSelector:r?r.join(","):""}:void 0;o&&(this.clickDetector=new hd(this,o))}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return Boolean(this._canvas)}getOptions(){return this._options}initializeSampling(e){const{errorSampleRate:t,sessionSampleRate:n}=this._options;t<=0&&n<=0||(this._initializeSessionForSampling(e),this.session?!1!==this.session.sampled&&(this.recordingMode="buffer"===this.session.sampled&&0===this.session.segmentId?"buffer":"session",Ld(`[Replay] Starting replay in ${this.recordingMode} mode`,this._options._experiments.traceInternals),this._initializeRecording()):this._handleException(new Error("Unable to initialize and create session")))}start(){if(this._isEnabled&&"session"===this.recordingMode)throw new Error("Replay recording is already in progress");if(this._isEnabled&&"buffer"===this.recordingMode)throw new Error("Replay buffering is in progress, call `flush()` to save the replay");Ld("[Replay] Starting replay in session mode",this._options._experiments.traceInternals),this._updateUserActivity();const e=Yd({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=e,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw new Error("Replay recording is already in progress");Ld("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals);const e=Yd({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=e,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const e=this._canvas;this._stopRecording=nd({...this._recordingOptions,..."buffer"===this.recordingMode&&{checkoutEveryNms:6e4},emit:xp(this),onMutation:this._onMutationHandler,...e?{recordCanvas:e.recordCanvas,getCanvasManager:e.getCanvasManager,sampling:e.sampling,dataURLOptions:e.dataURLOptions}:{}})}catch(e){this._handleException(e)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(e){return this._handleException(e),!1}}async stop({forceFlush:e=!1,reason:t}={}){if(this._isEnabled){this._isEnabled=!1;try{Ad("[Replay] Stopping Replay"+(t?` triggered by ${t}`:""),this._options._experiments.traceInternals),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),e&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,Bd(this)}catch(e){this._handleException(e)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),Ad("[Replay] Pausing replay",this._options._experiments.traceInternals))}resume(){this._isPaused&&this._checkSession()&&(this._isPaused=!1,this.startRecording(),Ad("[Replay] Resuming replay",this._options._experiments.traceInternals))}async sendBufferedReplayOrFlush({continueRecording:e=!0}={}){if("session"===this.recordingMode)return this.flushImmediate();const t=Date.now();Ad("[Replay] Converting buffer to session",this._options._experiments.traceInternals),await this.flushImmediate();const n=this.stopRecording();e&&n&&"session"!==this.recordingMode&&(this.recordingMode="session",this.session&&(this._updateUserActivity(t),this._updateSessionActivity(t),this._maybeSaveSession()),this.startRecording())}addUpdate(e){const t=e();"buffer"!==this.recordingMode&&!0!==t&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),this._stopRecording)this.checkAndHandleExpiredSession(),this._updateSessionActivity();else{if(!this._checkSession())return;this.resume()}}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return"buffer"===this.recordingMode?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(!(this._lastActivity&&Hd(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&"session"===this.session.sampled))return!!this._checkSession();this.pause()}setInitialState(){const e=`${Kc.location.pathname}${Kc.location.hash}${Kc.location.search}`,t=`${Kc.location.origin}${e}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=t,this._context.initialTimestamp=Date.now(),this._context.urls.push(t)}throttledAddEvent(e,t){const n=this._throttledAddEvent(e,t);if(n===Dp){const e=yd({category:"replay.throttled"});this.addUpdate((()=>!Kd(this,{type:5,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e,metric:!0}})))}return n}getCurrentRoute(){const e=this.lastTransaction||xr().getTransaction(),t=(e&&mr(e).data||{})[So];if(e&&t&&["route","custom"].includes(t))return mr(e).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=Ud({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_handleException(e){Rd&&je.error("[Replay]",e),Rd&&this._options._experiments&&this._options._experiments.captureExceptions&&Tr(e)}_initializeSessionForSampling(e){const t=this._options.errorSampleRate>0,n=Yd({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:e},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:t});this.session=n}_checkSession(){if(!this.session)return!1;const e=this.session;return!zd(e,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})||(this._refreshSession(e),!1)}async _refreshSession(e){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(e.id))}_addListeners(){try{Kc.document.addEventListener("visibilitychange",this._handleVisibilityChange),Kc.addEventListener("blur",this._handleWindowBlur),Kc.addEventListener("focus",this._handleWindowFocus),Kc.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(!function(e){const t=xr(),n=Rr();t.addScopeListener(kp(e)),kt(Sd(e)),Vt(sp(e)),wp(e);const r=rp(e,!Cp(n));n&&n.addEventProcessor?n.addEventProcessor(r):rs(r),Cp(n)&&(n.on("beforeSendEvent",np(e)),n.on("afterSendEvent",tp(e)),n.on("createDsc",(t=>{const n=e.getSessionId();n&&e.isEnabled()&&"session"===e.recordingMode&&e.checkAndHandleExpiredSession()&&(t.replay_id=n)})),n.on("startTransaction",(t=>{e.lastTransaction=t})),n.on("finishTransaction",(t=>{e.lastTransaction=t})),n.on("beforeSendFeedback",((t,n)=>{const r=e.getSessionId();n&&n.includeReplay&&e.isEnabled()&&r&&t.contexts&&t.contexts.feedback&&(t.contexts.feedback.replay_id=r)})))}(this),this._hasInitializedCoreListeners=!0)}catch(e){this._handleException(e)}this._performanceCleanupCallback=Cd(this)}_removeListeners(){try{Kc.document.removeEventListener("visibilitychange",this._handleVisibilityChange),Kc.removeEventListener("blur",this._handleWindowBlur),Kc.removeEventListener("focus",this._handleWindowFocus),Kc.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(e){this._handleException(e)}}__init(){this._handleVisibilityChange=()=>{"visible"===Kc.document.visibilityState?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const e=yd({category:"ui.blur"});this._doChangeToBackgroundTasks(e)}}__init3(){this._handleWindowFocus=()=>{const e=yd({category:"ui.focus"});this._doChangeToForegroundTasks(e)}}__init4(){this._handleKeyboardEvent=e=>{Ed(this,e)}}_doChangeToBackgroundTasks(e){if(!this.session)return;Vd(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(e&&this._createCustomBreadcrumb(e),this.conditionalFlush())}_doChangeToForegroundTasks(e){if(!this.session)return;this.checkAndHandleExpiredSession()?e&&this._createCustomBreadcrumb(e):Ad("[Replay] Document has become active, but session has expired")}_updateUserActivity(e=Date.now()){this._lastActivity=e}_updateSessionActivity(e=Date.now()){this.session&&(this.session.lastActivity=e,this._maybeSaveSession())}_createCustomBreadcrumb(e){this.addUpdate((()=>{this.throttledAddEvent({type:hu.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})}))}_addPerformanceEntries(){const e=(t=this.performanceEntries,t.map(Id).filter(Boolean)).concat(this.replayPerformanceEntries);var t;return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(op(this,e))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:e,eventBuffer:t}=this;if(!e||!t)return;if(e.segmentId)return;const n=t.getEarliestTimestamp();n&&n<this._context.initialTimestamp&&(this._context.initialTimestamp=n)}_popEventContext(){const e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),e}async _runFlush(){const e=this.getSessionId();if(this.session&&this.eventBuffer&&e){if(await this._addPerformanceEntries(),this.eventBuffer&&this.eventBuffer.hasEvents&&(await async function(e){try{return Promise.all(op(e,[Rp(Kc.performance.memory)]))}catch(e){return[]}}(this),this.eventBuffer&&e===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const t=Date.now();if(t-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const n=this._popEventContext(),r=this.session.segmentId++;this._maybeSaveSession();const o=await this.eventBuffer.finish();await Np({replayId:e,recordingData:o,segmentId:r,eventContext:n,session:this.session,options:this.getOptions(),timestamp:t})}catch(e){this._handleException(e),this.stop({reason:"sendReplay"});const t=Rr();t&&t.recordDroppedEvent("send_error","replay")}}else Rd&&je.error("[Replay] No session or eventBuffer found to flush.")}__init5(){this._flush=async({force:e=!1}={})=>{if(!this._isEnabled&&!e)return;if(!this.checkAndHandleExpiredSession())return void(Rd&&je.error("[Replay] Attempting to finish replay event after session expired."));if(!this.session)return;const t=this.session.started,n=Date.now()-t;this._debouncedFlush.cancel();const r=n<this._options.minReplayDuration,o=n>this._options.maxReplayDuration+5e3;if(r||o)return Ad(`[Replay] Session duration (${Math.floor(n/1e3)}s) is too ${r?"short":"long"}, not sending replay.`,this._options._experiments.traceInternals),void(r&&this._debouncedFlush());const s=this.eventBuffer;if(s&&0===this.session.segmentId&&!s.hasCheckout&&Ad("[Replay] Flushing initial segment without checkout.",this._options._experiments.traceInternals),!this._flushLock)return this._flushLock=this._runFlush(),await this._flushLock,void(this._flushLock=void 0);try{await this._flushLock}catch(e){Rd&&je.error(e)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&Wd(this.session)}__init6(){this._onMutationHandler=e=>{const t=e.length,n=this._options.mutationLimit,r=n&&t>n;if(t>this._options.mutationBreadcrumbLimit||r){const e=yd({category:"replay.mutations",data:{count:t,limit:r}});this._createCustomBreadcrumb(e)}return!r||(this.stop({reason:"mutationLimit",forceFlush:"session"===this.recordingMode}),!1)}}}function Fp(e,t,n,r){const o=[...e,..."string"==typeof r?r.split(","):[],...t];return void 0!==n&&("string"==typeof n&&o.push(`.${n}`),Ue((()=>{console.warn("[Replay] You are using a deprecated configuration item for privacy. Read the documentation on how to use the new privacy configuration.")}))),o.join(",")}const Up='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',jp=["content-length","content-type","accept"];let Bp=!1;class $p{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:e=5e3,flushMaxDelay:t=5500,minReplayDuration:n=4999,maxReplayDuration:r=36e5,stickySession:o=!0,useCompression:s=!0,workerUrl:a,_experiments:i={},sessionSampleRate:c,errorSampleRate:l,maskAllText:u=!0,maskAllInputs:d=!0,blockAllMedia:p=!0,mutationBreadcrumbLimit:h=750,mutationLimit:f=1e4,slowClickTimeout:g=7e3,slowClickIgnoreSelectors:m=[],networkDetailAllowUrls:y=[],networkDetailDenyUrls:_=[],networkCaptureBodies:v=!0,networkRequestHeaders:b=[],networkResponseHeaders:S=[],mask:T=[],maskAttributes:E=["title","placeholder"],unmask:w=[],block:I=[],unblock:k=[],ignore:C=[],maskFn:R,beforeAddRecordingEvent:x,beforeErrorSampling:A,blockClass:L,blockSelector:O,maskInputOptions:N,maskTextClass:D,maskTextSelector:P,ignoreClass:M}={}){this.name=$p.id;const F=function({mask:e,unmask:t,block:n,unblock:r,ignore:o,blockClass:s,blockSelector:a,maskTextClass:i,maskTextSelector:c,ignoreClass:l}){const u={maskTextSelector:Fp(e,[".sentry-mask","[data-sentry-mask]"],i,c),unmaskTextSelector:Fp(t,[".sentry-unmask","[data-sentry-unmask]"]),blockSelector:Fp(n,[".sentry-block","[data-sentry-block]",'base[href="/"]'],s,a),unblockSelector:Fp(r,[".sentry-unblock","[data-sentry-unblock]"]),ignoreSelector:Fp(o,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'],l)};return s instanceof RegExp&&(u.blockClass=s),i instanceof RegExp&&(u.maskTextClass=i),u}({mask:T,unmask:w,block:I,unblock:k,ignore:C,blockClass:L,blockSelector:O,maskTextClass:D,maskTextSelector:P,ignoreClass:M});if(this._recordingOptions={maskAllInputs:d,maskAllText:u,maskInputOptions:{...N||{},password:!0},maskTextFn:R,maskInputFn:R,maskAttributeFn:(e,t,n)=>function({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:o,value:s}){return r?o.unmaskTextSelector&&e.matches(o.unmaskTextSelector)?s:n.includes(t)||"value"===t&&"INPUT"===e.tagName&&["submit","button"].includes(e.getAttribute("type")||"")?s.replace(/[\S]/g,"*"):s:s}({maskAttributes:E,maskAllText:u,privacyOptions:F,key:e,value:t,el:n}),...F,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:e=>{try{e.__rrweb__=!0}catch(e){}}},this._initialOptions={flushMinDelay:e,flushMaxDelay:t,minReplayDuration:Math.min(n,15e3),maxReplayDuration:Math.min(r,nl),stickySession:o,sessionSampleRate:c,errorSampleRate:l,useCompression:s,workerUrl:a,blockAllMedia:p,maskAllInputs:d,maskAllText:u,mutationBreadcrumbLimit:h,mutationLimit:f,slowClickTimeout:g,slowClickIgnoreSelectors:m,networkDetailAllowUrls:y,networkDetailDenyUrls:_,networkCaptureBodies:v,networkRequestHeaders:Gp(b),networkResponseHeaders:Gp(S),beforeAddRecordingEvent:x,beforeErrorSampling:A,_experiments:i},"number"==typeof c&&(console.warn(`[Replay] You are passing \`sessionSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysSessionSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysSessionSampleRate: ${c} })`),this._initialOptions.sessionSampleRate=c),"number"==typeof l&&(console.warn(`[Replay] You are passing \`errorSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysOnErrorSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysOnErrorSampleRate: ${l} })`),this._initialOptions.errorSampleRate=l),this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${Up}`:Up),this._isInitialized&&tn())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Bp}set _isInitialized(e){Bp=e}setupOnce(){tn()&&(this._setup(),setTimeout((()=>this._initialize())))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:"session"===this._replay.recordingMode}):Promise.resolve()}flush(e){return this._replay&&this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(e):Promise.resolve()}getReplayId(){if(this._replay&&this._replay.isEnabled())return this._replay.getSessionId()}_initialize(){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(),this._replay.initializeSampling())}_setup(){const e=function(e){const t=Rr(),n=t&&t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...Qe(e)};if(!n)return Ue((()=>{console.warn("SDK client is not available.")})),r;null==e.sessionSampleRate&&null==e.errorSampleRate&&null==n.replaysSessionSampleRate&&null==n.replaysOnErrorSampleRate&&Ue((()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}));"number"==typeof n.replaysSessionSampleRate&&(r.sessionSampleRate=n.replaysSessionSampleRate);"number"==typeof n.replaysOnErrorSampleRate&&(r.errorSampleRate=n.replaysOnErrorSampleRate);return r}(this._initialOptions);this._replay=new Mp({options:e,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(){try{const e=Rr().getIntegrationByName("ReplayCanvas");if(!e)return;this._replay._canvas=e.getOptions()}catch(e){}}}function Gp(e){return[...jp,...e.map((e=>e.toLowerCase()))]}var Wp;function qp(e,t,n=1/0,r=0){return e?e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:qp(e.parentNode,t,n,r+1):-1}function Hp(e,t){return n=>{const r=n;if(null===r)return!1;try{if(e)if("string"==typeof e){if(r.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}(r,e))return!0;return!(!t||!r.matches(t))}catch(e){return!1}}}$p.__initStatic(),function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(Wp||(Wp={}));const Vp="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let zp={map:{},getId:()=>(console.error(Vp),-1),getNode:()=>(console.error(Vp),null),removeNodeFromMap(){console.error(Vp)},has:()=>(console.error(Vp),!1),reset(){console.error(Vp)}};function Yp(e,t,n,r,o=window){const s=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(e){eh((()=>{n.set.call(this,e)}),0),s&&s.set&&s.set.call(this,e)}}),()=>Yp(e,t,s||{},!0)}function Kp(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch(e){return()=>{}}}function Xp(e,t,n,r,o){if(!e)return!1;const s=function(e){return e?e.nodeType===e.ELEMENT_NODE?e:e.parentElement:null}(e);if(!s)return!1;const a=Hp(t,n);if(!o){const e=r&&s.matches(r);return a(s)&&!e}const i=qp(s,a);let c=-1;return!(i<0)&&(r&&(c=qp(s,Hp(null,r))),i>-1&&c<0||i<c)}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(zp=new Proxy(zp,{get:(e,t,n)=>("map"===t&&console.error(Vp),Reflect.get(e,t,n))})),/[1-9][0-9]{12}/.test(Date.now().toString());const Jp={};function Zp(e){const t=Jp[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const o=t.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(t)}catch(e){}return Jp[e]=r.bind(window)}function Qp(...e){return Zp("requestAnimationFrame")(...e)}function eh(...e){return Zp("setTimeout")(...e)}var th=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(th||{});let nh;function rh(e){nh=e}const oh=e=>{if(!nh)return e;return(...t)=>{try{return e(...t)}catch(e){if(nh&&!0===nh(e))return()=>{};throw e}}};for(var sh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ah="undefined"==typeof Uint8Array?[]:new Uint8Array(256),ih=0;ih<64;ih++)ah[sh.charCodeAt(ih)]=ih;const ch=new Map;const lh=(e,t,n)=>{if(!e||!ph(e,t)&&"object"!=typeof e)return;const r=function(e,t){let n=ch.get(e);return n||(n=new Map,ch.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}(n,e.constructor.name);let o=r.indexOf(e);return-1===o&&(o=r.length,r.push(e)),o};function uh(e,t,n){if(e instanceof Array)return e.map((e=>uh(e,t,n)));if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray){return{rr_type:e.constructor.name,args:[Object.values(e)]}}if(e instanceof ArrayBuffer){const t=e.constructor.name,n=function(e){var t,n=new Uint8Array(e),r=n.length,o="";for(t=0;t<r;t+=3)o+=sh[n[t]>>2],o+=sh[(3&n[t])<<4|n[t+1]>>4],o+=sh[(15&n[t+1])<<2|n[t+2]>>6],o+=sh[63&n[t+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o}(e);return{rr_type:t,base64:n}}if(e instanceof DataView){return{rr_type:e.constructor.name,args:[uh(e.buffer,t,n),e.byteOffset,e.byteLength]}}if(e instanceof HTMLImageElement){const t=e.constructor.name,{src:n}=e;return{rr_type:t,src:n}}if(e instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:e.toDataURL()}}if(e instanceof ImageData){return{rr_type:e.constructor.name,args:[uh(e.data,t,n),e.width,e.height]}}if(ph(e,t)||"object"==typeof e){return{rr_type:e.constructor.name,index:lh(e,t,n)}}return e}const dh=(e,t,n)=>e.map((e=>uh(e,t,n))),ph=(e,t)=>{const n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((e=>"function"==typeof t[e]));return Boolean(n.find((n=>e instanceof t[n])))};function hh(e,t,n,r,o){const s=[];try{const a=Kp(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(s,...a){if(!Xp(this,t,n,r,!0)){const e=function(e){return"experimental-webgl"===e?"webgl":e}(s);if("__context"in this||(this.__context=e),o&&["webgl","webgl2"].includes(e))if(a[0]&&"object"==typeof a[0]){const e=a[0];e.preserveDrawingBuffer||(e.preserveDrawingBuffer=!0)}else a.splice(0,1,{preserveDrawingBuffer:!0})}return e.apply(this,[s,...a])}}));s.push(a)}catch(e){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{s.forEach((e=>e()))}}function fh(e,t,n,r,o,s,a,i){const c=[],l=Object.getOwnPropertyNames(e);for(const a of l)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(a))try{if("function"!=typeof e[a])continue;const l=Kp(e,a,(function(e){return function(...c){const l=e.apply(this,c);if(lh(l,i,this),"tagName"in this.canvas&&!Xp(this.canvas,r,o,s,!0)){const e=dh(c,i,this),r={type:t,property:a,args:e};n(this.canvas,r)}return l}}));c.push(l)}catch(r){const o=Yp(e,a,{set(e){n(this.canvas,{type:t,property:a,args:[e],setter:!0})}});c.push(o)}return c}class gh{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(e,t)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)};const{sampling:t="all",win:n,blockClass:r,blockSelector:o,unblockSelector:s,maxCanvasSize:a,recordCanvas:i,dataURLOptions:c,errorHandler:l}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,this.options=e,l&&rh(l),e.enableManualSnapshot||oh((()=>{i&&"all"===t&&this.initCanvasMutationObserver(n,r,o,s),i&&"number"==typeof t&&this.initCanvasFPSObserver(t,n,r,o,s,a,{dataURLOptions:c})}))()}initCanvasFPSObserver(e,t,n,r,o,s,a){const i=hh(t,n,r,o,!0),c=this.takeSnapshot(!1,e,t,n,r,o,s,a.dataURLOptions);this.resetObservers=()=>{i(),cancelAnimationFrame(c)}}initCanvasMutationObserver(e,t,n,r){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const o=hh(e,t,n,r,!1),s=function(e,t,n,r,o){const s=[],a=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const i of a)try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[i])continue;const a=Kp(t.CanvasRenderingContext2D.prototype,i,(function(s){return function(...a){return Xp(this.canvas,n,r,o,!0)||eh((()=>{const n=dh(a,t,this);e(this.canvas,{type:th["2D"],property:i,args:n})}),0),s.apply(this,a)}}));s.push(a)}catch(n){const r=Yp(t.CanvasRenderingContext2D.prototype,i,{set(t){e(this.canvas,{type:th["2D"],property:i,args:[t],setter:!0})}});s.push(r)}return()=>{s.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,r),a=function(e,t,n,r,o,s){const a=[];return a.push(...fh(t.WebGLRenderingContext.prototype,th.WebGL,e,n,r,o,0,t)),void 0!==t.WebGL2RenderingContext&&a.push(...fh(t.WebGL2RenderingContext.prototype,th.WebGL2,e,n,r,o,0,t)),()=>{a.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,r,this.mirror);this.resetObservers=()=>{o(),s(),a()}}snapshot(e){const{options:t}=this,n=this.takeSnapshot(!0,"all"===t.sampling?2:t.sampling||2,t.win,t.blockClass,t.blockSelector,t.unblockSelector,t.maxCanvasSize,t.dataURLOptions,e);this.resetObservers=()=>{cancelAnimationFrame(n)}}takeSnapshot(e,t,n,r,o,s,a,i,c){const l=new Map,u=new Worker(function(){const e=new Blob(['for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};']);return URL.createObjectURL(e)}());u.onmessage=e=>{const t=e.data,{id:n}=t;if(l.set(n,!1),!("base64"in t))return;const{base64:r,type:o,width:s,height:a}=t;this.mutationCb({id:n,type:th["2D"],commands:[{property:"clearRect",args:[0,0,s,a]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:r}],type:o}]},0,0,s,a]}]})};const d=1e3/t;let p,h=0;const f=t=>{h&&t-h<d||(h=t,(e=>{if(e)return[e];const t=[];return n.document.querySelectorAll("canvas").forEach((e=>{Xp(e,r,o,s,!0)||t.push(e)})),t})(c).forEach((t=>{const n=this.mirror.getId(t);if(!l.get(n)&&t.width&&t.height){if(l.set(n,!0),!e&&["webgl","webgl2"].includes(t.__context)){const e=t.getContext(t.__context);!1===nr([e,"optionalAccess",e=>e.getContextAttributes,"call",e=>e(),"optionalAccess",e=>e.preserveDrawingBuffer])&&e.clear(e.COLOR_BUFFER_BIT)}createImageBitmap(t).then((e=>{u.postMessage({id:n,bitmap:e,width:t.width,height:t.height,dataURLOptions:i,maxCanvasSize:a},[e])})).catch((e=>{oh((()=>{throw e}))()}))}}))),p=Qp(f)};return p=Qp(f),p}startPendingCanvasMutationFlusher(){Qp((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){const e=t=>{this.rafStamps.latestId=t,Qp(e)};Qp(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((e,t)=>{const n=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,n)})),Qp((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(e);if(!n||-1===t)return;const r=n.map((e=>{const{type:t,...n}=e;return n})),{type:o}=n[0];this.mutationCb({id:t,type:o,commands:r}),this.pendingCanvasMutations.delete(e)}}const mh={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},yh="ReplayCanvas",_h=1280,vh=(e={})=>{const[t,n]=e.maxCanvasSize||[],r={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot,maxCanvasSize:[t?Math.min(t,_h):_h,n?Math.min(n,_h):_h]};let o;const s=new Promise((e=>o=e));return{name:yh,setupOnce(){},getOptions(){const{quality:e,enableManualSnapshot:t,maxCanvasSize:n}=r;return{enableManualSnapshot:t,recordCanvas:!0,getCanvasManager:e=>{const r=new gh({...e,enableManualSnapshot:t,maxCanvasSize:n,errorHandler:e=>{try{"object"==typeof e&&(e.__rrweb__=!0)}catch(e){}}});return o(r),r},...mh[e||"medium"]||mh.medium}},async snapshot(e){(await s).snapshot(e)}}},bh=Yo(yh,vh),Sh=Ie,Th="#ffffff",Eh="inherit",wh="rgba(108, 95, 199, 1)",Ih={fontFamily:"system-ui, 'Helvetica Neue', Arial, sans-serif",fontSize:"14px",background:Th,backgroundHover:"#f6f6f7",foreground:"#2b2233",border:"1.5px solid rgba(41, 35, 47, 0.13)",borderRadius:"25px",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",success:"#268d75",error:"#df3338",submitBackground:"rgba(88, 74, 192, 1)",submitBackgroundHover:wh,submitBorder:wh,submitOutlineFocus:"#29232f",submitForeground:Th,submitForegroundHover:Th,cancelBackground:"transparent",cancelBackgroundHover:"var(--background-hover)",cancelBorder:"var(--border)",cancelOutlineFocus:"var(--input-outline-focus)",cancelForeground:"var(--foreground)",cancelForegroundHover:"var(--foreground)",inputBackground:Eh,inputForeground:Eh,inputBorder:"var(--border)",inputOutlineFocus:wh,formBorderRadius:"20px",formContentBorderRadius:"6px"},kh=Ih,Ch={...Ih,background:"#29232f",backgroundHover:"#352f3b",foreground:"#ebe6ef",border:"1.5px solid rgba(235, 230, 239, 0.15)",success:"#2da98c",error:"#f55459"},Rh="widget",xh="api";async function Ah({feedback:{message:e,email:t,name:n,source:r,url:o}},{includeReplay:s=!0}={}){const a=Rr(),i=a&&a.getTransport(),c=a&&a.getDsn();if(!a||!i||!c)return;const l={contexts:{feedback:{contact_email:t,name:n,message:e,url:o,source:r}},type:"feedback"};return Cr((async e=>{e.clearBreadcrumbs(),[xh,Rh].includes(String(r))&&e.setLevel("info");const t=await async function({client:e,scope:t,event:n}){const r={};e.emit&&e.emit("preprocessEvent",n,r);const o=await _r(e.getOptions(),n,r,t,e,Xr());return null===o?(e.recordDroppedEvent("event_processor","feedback",n),null):(o.platform=o.platform||"javascript",o)}({scope:e,client:a,event:l});if(!t)return;a.emit&&a.emit("beforeSendFeedback",t,{includeReplay:Boolean(s)});const n=jo(t,c,a.getOptions()._metadata,a.getOptions().tunnel);let o;try{o=await i.send(n)}catch(e){const t=new Error("Unable to send Feedback");try{t.cause=e}catch(e){}throw t}if(o){if("number"==typeof o.statusCode&&(o.statusCode<200||o.statusCode>=300))throw new Error("Unable to send Feedback");return o}}))}function Lh({name:e,email:t,message:n,source:r=xh,url:o=Oe()},s={}){if(!n)throw new Error("Unable to submit feedback with empty message");return Ah({feedback:{name:e,email:t,message:n,url:o,source:r}},s)}const Oh="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function Nh(e,t){return{...e,...t,themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function Dh(e){return`\n  --background: ${e.background};\n  --background-hover: ${e.backgroundHover};\n  --foreground: ${e.foreground};\n  --error: ${e.error};\n  --success: ${e.success};\n  --border: ${e.border};\n  --border-radius: ${e.borderRadius};\n  --box-shadow: ${e.boxShadow};\n\n  --submit-background: ${e.submitBackground};\n  --submit-background-hover: ${e.submitBackgroundHover};\n  --submit-border: ${e.submitBorder};\n  --submit-outline-focus: ${e.submitOutlineFocus};\n  --submit-foreground: ${e.submitForeground};\n  --submit-foreground-hover: ${e.submitForegroundHover};\n\n  --cancel-background: ${e.cancelBackground};\n  --cancel-background-hover: ${e.cancelBackgroundHover};\n  --cancel-border: ${e.cancelBorder};\n  --cancel-outline-focus: ${e.cancelOutlineFocus};\n  --cancel-foreground: ${e.cancelForeground};\n  --cancel-foreground-hover: ${e.cancelForegroundHover};\n\n  --input-background: ${e.inputBackground};\n  --input-foreground: ${e.inputForeground};\n  --input-border: ${e.inputBorder};\n  --input-outline-focus: ${e.inputOutlineFocus};\n\n  --form-border-radius: ${e.formBorderRadius};\n  --form-content-border-radius: ${e.formContentBorderRadius};\n  `}function Ph({id:e,colorScheme:t,themeDark:n,themeLight:r}){try{const o=Sh.document,s=o.createElement("div");s.id=e;const a=s.attachShadow({mode:"open"});return a.appendChild(function(e,t,n){const r=e.createElement("style");return r.textContent=`\n:host {\n  --bottom: 1rem;\n  --right: 1rem;\n  --top: auto;\n  --left: auto;\n  --z-index: 100000;\n  --font-family: ${n.light.fontFamily};\n  --font-size: ${n.light.fontSize};\n\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n  z-index: var(--z-index);\n\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n\n  ${Dh("dark"===t?n.dark:n.light)}\n}\n\n${"system"===t?`\n@media (prefers-color-scheme: dark) {\n  :host {\n    ${Dh(n.dark)}\n  }\n}`:""}\n}`,r}(o,t,{dark:n,light:r})),a.appendChild(function(e){const t=e.createElement("style");return t.textContent="\n.dialog {\n  line-height: 25px;\n  background-color: rgba(0, 0, 0, 0.05);\n  border: none;\n  position: fixed;\n  inset: 0;\n  z-index: 10000;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: 1;\n  transition: opacity 0.2s ease-in-out;\n}\n\n.dialog:not([open]) {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n.dialog:not([open]) .dialog__content {\n  transform: translate(0, -16px) scale(0.98);\n}\n\n.dialog__content {\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n\n  border: var(--border);\n  border-radius: var(--form-border-radius);\n  background-color: var(--background);\n  color: var(--foreground);\n\n  width: 320px;\n  max-width: 100%;\n  max-height: calc(100% - 2rem);\n  display: flex;\n  flex-direction: column;\n  box-shadow: var(--box-shadow);\n  transition: transform 0.2s ease-in-out;\n  transform: translate(0, 0) scale(1);\n}\n\n.dialog__header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-size: 20px;\n  font-weight: 600;\n  padding: 24px 24px 0 24px;\n  margin: 0;\n  margin-bottom: 16px;\n}\n\n.brand-link {\n  display: inline-flex;\n}\n\n.error {\n  color: var(--error);\n  margin-bottom: 16px;\n}\n\n.form {\n  display: grid;\n  overflow: auto;\n  flex-direction: column;\n  gap: 16px;\n  padding: 0 24px 24px;\n}\n\n.form__error-container {\n  color: var(--error);\n}\n\n.form__error-container--hidden {\n  display: none;\n}\n\n.form__label {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  margin: 0px;\n}\n\n.form__label__text {\n  display: grid;\n  gap: 4px;\n  align-items: center;\n  grid-auto-flow: column;\n  grid-auto-columns: max-content;\n}\n\n.form__label__text--required {\n  font-size: 0.85em;\n}\n\n.form__input {\n  line-height: inherit;\n  background-color: var(--input-background);\n  box-sizing: border-box;\n  border: var(--input-border);\n  border-radius: var(--form-content-border-radius);\n  color: var(--input-foreground);\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 500;\n  padding: 6px 12px;\n}\n\n.form__input::placeholder {\n  color: var(--input-foreground);\n  opacity: 0.65;\n}\n\n.form__input:focus-visible {\n  outline: 1px auto var(--input-outline-focus);\n}\n\n.form__input--textarea {\n  font-family: inherit;\n  resize: vertical;\n}\n\n.btn-group {\n  display: grid;\n  gap: 8px;\n  margin-top: 8px;\n}\n\n.btn {\n  line-height: inherit;\n  border: var(--cancel-border);\n  border-radius: var(--form-content-border-radius);\n  cursor: pointer;\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 600;\n  padding: 6px 16px;\n}\n.btn[disabled] {\n  opacity: 0.6;\n  pointer-events: none;\n}\n\n.btn--primary {\n  background-color: var(--submit-background);\n  border-color: var(--submit-border);\n  color: var(--submit-foreground);\n}\n.btn--primary:hover {\n  background-color: var(--submit-background-hover);\n  color: var(--submit-foreground-hover);\n}\n.btn--primary:focus-visible {\n  outline: 1px auto var(--submit-outline-focus);\n}\n\n.btn--default {\n  background-color: var(--cancel-background);\n  color: var(--cancel-foreground);\n  font-weight: 500;\n}\n.btn--default:hover {\n  background-color: var(--cancel-background-hover);\n  color: var(--cancel-foreground-hover);\n}\n.btn--default:focus-visible {\n  outline: 1px auto var(--cancel-outline-focus);\n}\n\n.success-message {\n  background-color: var(--background);\n  border: var(--border);\n  border-radius: var(--border-radius);\n  box-shadow: var(--box-shadow);\n  font-weight: 600;\n  color: var(--success);\n  padding: 12px 24px;\n  line-height: 25px;\n  display: grid;\n  align-items: center;\n  grid-auto-flow: column;\n  gap: 6px;\n  cursor: default;\n}\n\n.success-icon path {\n  fill: var(--success);\n}\n",t}(o)),{shadow:a,host:s}}catch(e){throw je.warn("[Feedback] Browser does not support shadow DOM API"),new Error("Browser does not support shadow DOM API.")}}async function Mh(e,t,n){if(!e)return;e.hideError();try{return await Lh({...t,source:Rh},n)}catch(t){Oh&&je.error(t),e&&e.showError("There was a problem submitting feedback, please wait and try again.")}}function Fh(e,t){return Object.entries(t).forEach((([t,n])=>{e.setAttributeNS(null,t,n)})),e}const Uh=20,jh="http://www.w3.org/2000/svg";function Bh(e,t,...n){const r=Sh.document.createElement(e);t&&Object.entries(t).forEach((([e,t])=>{"className"===e&&"string"==typeof t?r.setAttribute("class",t):"boolean"==typeof t&&t?r.setAttribute(e,""):"string"==typeof t?r.setAttribute(e,t):e.startsWith("on")&&"function"==typeof t&&r.addEventListener(e.substring(2).toLowerCase(),t)}));for(const e of n)$h(r,e);return r}function $h(e,t){const n=Sh.document;if(null!=t)if(Array.isArray(t))for(const n of t)$h(e,n);else!1===t||("string"==typeof t?e.appendChild(n.createTextNode(t)):t instanceof Node?e.appendChild(t):e.appendChild(n.createTextNode(String(t))))}function Gh({buttonLabel:e,onClick:t}){const n=Bh("button",{type:"button",className:"widget__actor","aria-label":e,"aria-hidden":"false"},function(){const e=e=>Sh.document.createElementNS(jh,e),t=Fh(e("svg"),{class:"feedback-icon",width:`${Uh}`,height:`${Uh}`,viewBox:`0 0 ${Uh} ${Uh}`,fill:"none"}),n=Fh(e("g"),{clipPath:"url(#clip0_57_80)"}),r=Fh(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(r);const o=e("defs"),s=Fh(e("clipPath"),{id:"clip0_57_80"}),a=Fh(e("rect"),{width:`${Uh}`,height:`${Uh}`,fill:"white"});return s.appendChild(a),o.appendChild(s),t.appendChild(o).appendChild(s).appendChild(a),{get el(){return t}}}().el,e?Bh("span",{className:"widget__actor__text"},e):null);return n.addEventListener("click",(function(e){t&&t(e)})),{get el(){return n},show:()=>{n.classList.remove("widget__actor--hidden"),n.setAttribute("aria-hidden","false")},hide:()=>{n.classList.add("widget__actor--hidden"),n.setAttribute("aria-hidden","true")}}}function Wh(e,t){const n=e.get(t);return"string"==typeof n?n.trim():""}function qh({nameLabel:e,namePlaceholder:t,emailLabel:n,emailPlaceholder:r,messageLabel:o,messagePlaceholder:s,isRequiredLabel:a,cancelButtonLabel:i,submitButtonLabel:c,showName:l,showEmail:u,isNameRequired:d,isEmailRequired:p,defaultName:h,defaultEmail:f,onCancel:g,onSubmit:m}){const{el:y}=function({label:e}){return{el:Bh("button",{type:"submit",className:"btn btn--primary","aria-label":e},e)}}({label:c});const _=Bh("div",{className:"form__error-container form__error-container--hidden","aria-hidden":"true"});const v=Bh("input",{id:"name",type:l?"text":"hidden","aria-hidden":l?"false":"true",name:"name",required:d,className:"form__input",placeholder:t,value:h}),b=Bh("input",{id:"email",type:u?"text":"hidden","aria-hidden":u?"false":"true",name:"email",required:p,className:"form__input",placeholder:r,value:f}),S=Bh("textarea",{id:"message",autoFocus:"true",rows:"5",name:"message",required:!0,className:"form__input form__input--textarea",placeholder:s}),T=Bh("button",{type:"button",className:"btn btn--default","aria-label":i,onClick:e=>{g&&g(e)}},i),E=Bh("form",{className:"form",onSubmit:function(e){if(e.preventDefault(),e.target instanceof HTMLFormElement)try{if(m){const t=new FormData(e.target),n={name:Wh(t,"name"),email:Wh(t,"email"),message:Wh(t,"message")};m(n)}}catch(e){}}},[_,l&&Bh("label",{htmlFor:"name",className:"form__label"},[Bh("span",{className:"form__label__text"},e,d&&Bh("span",{className:"form__label__text--required"},` ${a}`)),v]),!l&&v,u&&Bh("label",{htmlFor:"email",className:"form__label"},[Bh("span",{className:"form__label__text"},n,p&&Bh("span",{className:"form__label__text--required"},` ${a}`)),b]),!u&&b,Bh("label",{htmlFor:"message",className:"form__label"},[Bh("span",{className:"form__label__text"},o,Bh("span",{className:"form__label__text--required"},` ${a}`)),S]),Bh("div",{className:"btn-group"},[y,T])]);return{get el(){return E},showError:function(e){_.textContent=e,_.classList.remove("form__error-container--hidden"),_.setAttribute("aria-hidden","false")},hideError:function(){_.textContent="",_.classList.add("form__error-container--hidden"),_.setAttribute("aria-hidden","true")}}}const Hh="http://www.w3.org/2000/svg";function Vh({formTitle:e,showBranding:t,showName:n,showEmail:r,isNameRequired:o,isEmailRequired:s,colorScheme:a,defaultName:i,defaultEmail:c,onClosed:l,onCancel:u,onSubmit:d,...p}){let h=null;function f(){h&&(h.open=!1)}const{el:g,showError:m,hideError:y}=qh({showEmail:r,showName:n,isEmailRequired:s,isNameRequired:o,defaultName:i,defaultEmail:c,onSubmit:d,onCancel:u,...p});return h=Bh("dialog",{className:"dialog",open:!0,onClick:function(){f(),l&&l()}},Bh("div",{className:"dialog__content",onClick:e=>{e.stopPropagation()}},Bh("h2",{className:"dialog__header"},e,t&&Bh("a",{className:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer"},function({colorScheme:e}){const t=e=>Sh.document.createElementNS(Hh,e),n=Fh(t("svg"),{class:"sentry-logo",width:"32",height:"30",viewBox:"0 0 72 66",fill:"none"}),r=Fh(t("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});n.append(r);const o=t("defs"),s=t("style");return s.textContent=`\n    path {\n      fill: ${"dark"===e?"#fff":"#362d59"};\n    }`,"system"===e&&(s.textContent+="\n    @media (prefers-color-scheme: dark) {\n      path: {\n        fill: '#fff';\n      }\n    }\n    "),o.append(s),n.append(o),{get el(){return n}}}({colorScheme:a}).el)),g)),{get el(){return h},showError:m,hideError:y,open:function(){h&&(h.open=!0)},close:f,checkIsOpen:function(){return h&&!0===h.open||!1}}}const zh=16,Yh=17,Kh="http://www.w3.org/2000/svg";function Xh({message:e,onRemove:t}){function n(){r&&(r.remove(),t&&t())}const r=Bh("div",{className:"success-message",onClick:n},function(){const e=e=>Sh.document.createElementNS(Kh,e),t=Fh(e("svg"),{class:"success-icon",width:`${zh}`,height:`${Yh}`,viewBox:`0 0 ${zh} ${Yh}`,fill:"none"}),n=Fh(e("g"),{clipPath:"url(#clip0_57_156)"}),r=Fh(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),o=Fh(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(o,r);const s=e("defs"),a=Fh(e("clipPath"),{id:"clip0_57_156"}),i=Fh(e("rect"),{width:`${zh}`,height:`${zh}`,fill:"white",transform:"translate(0 0.5)"});return a.appendChild(i),s.appendChild(a),t.appendChild(s).appendChild(a).appendChild(i),{get el(){return t}}}().el,e);return{el:r,remove:n}}function Jh({shadow:e,options:{shouldCreateActor:t=!0,...n},attachTo:r}){let o,s,a=!1;async function i(t){if(!s)return;const r=[];if(n.isNameRequired&&!t.name&&r.push(n.nameLabel),n.isEmailRequired&&!t.email&&r.push(n.emailLabel),t.message||r.push(n.messageLabel),r.length>0)return void s.showError(`Please enter in the following required fields: ${r.join(", ")}`);await Mh(s,t)?(h(),function(){if(e)try{const t=Xh({message:n.successMessageText,onRemove:()=>{r&&clearTimeout(r),l()}});if(!t.el)throw new Error("Unable to show success message");e.appendChild(t.el);const r=setTimeout((()=>{t&&t.remove()}),5e3)}catch(e){je.error(e)}}(),n.onSubmitSuccess&&n.onSubmitSuccess()):n.onSubmitError&&n.onSubmitError()}function c(){const e=Rr(),t=e&&e.getIntegrationByName&&e.getIntegrationByName("Replay");t&&t.flush().catch((e=>{Oh&&je.error(e)}))}function l(){o&&o.show()}function u(){o&&o.hide()}function d(){try{if(s)return s.open(),a=!0,n.onFormOpen&&n.onFormOpen(),void c();const t=n.useSentryUser,r=xr(),o=r&&r.getUser();if(s=Vh({colorScheme:n.colorScheme,showBranding:n.showBranding,showName:n.showName||n.isNameRequired,showEmail:n.showEmail||n.isEmailRequired,isNameRequired:n.isNameRequired,isEmailRequired:n.isEmailRequired,formTitle:n.formTitle,cancelButtonLabel:n.cancelButtonLabel,submitButtonLabel:n.submitButtonLabel,emailLabel:n.emailLabel,emailPlaceholder:n.emailPlaceholder,messageLabel:n.messageLabel,messagePlaceholder:n.messagePlaceholder,nameLabel:n.nameLabel,namePlaceholder:n.namePlaceholder,isRequiredLabel:n.isRequiredLabel,defaultName:t&&o&&o[t.name]||"",defaultEmail:t&&o&&o[t.email]||"",onClosed:()=>{l(),a=!1,n.onFormClose&&n.onFormClose()},onCancel:()=>{p(),l()},onSubmit:i}),!s.el)throw new Error("Unable to open Feedback dialog");e.appendChild(s.el),u(),n.onFormOpen&&n.onFormOpen(),c()}catch(e){je.error(e)}}function p(){s&&(s.close(),a=!1,n.onFormClose&&n.onFormClose())}function h(){if(s){p();const e=s.el;e&&e.remove(),s=void 0}}function f(){a||d(),u()}return r?r.addEventListener("click",f):t&&(o=Gh({buttonLabel:n.buttonLabel,onClick:f}),o.el&&e.appendChild(o.el)),{get actor(){return o},get dialog(){return s},showActor:l,hideActor:u,removeActor:function(){o&&o.el&&o.el.remove()},openDialog:d,closeDialog:p,removeDialog:h}}const Zh=Sh.document;class Qh{static __initStatic(){this.id="Feedback"}constructor({autoInject:e=!0,id:t="sentry-feedback",isEmailRequired:n=!1,isNameRequired:r=!1,showBranding:o=!0,showEmail:s=!0,showName:a=!0,useSentryUser:i={email:"email",name:"username"},themeDark:c,themeLight:l,colorScheme:u="system",buttonLabel:d="Report a Bug",cancelButtonLabel:p="Cancel",submitButtonLabel:h="Send Bug Report",formTitle:f="Report a Bug",emailPlaceholder:g="your.email@example.org",emailLabel:m="Email",messagePlaceholder:y="What's the bug? What did you expect?",messageLabel:_="Description",namePlaceholder:v="Your Name",nameLabel:b="Name",isRequiredLabel:S="(required)",successMessageText:T="Thank you for your report!",onFormClose:E,onFormOpen:w,onSubmitError:I,onSubmitSuccess:k}={}){this.name=Qh.id,this._host=null,this._shadow=null,this._widget=null,this._widgets=new Set,this._hasInsertedActorStyles=!1,this.options={autoInject:e,showBranding:o,id:t,isEmailRequired:n,isNameRequired:r,showEmail:s,showName:a,useSentryUser:i,colorScheme:u,themeDark:{...Ch,...c},themeLight:{...kh,...l},buttonLabel:d,cancelButtonLabel:p,submitButtonLabel:h,formTitle:f,emailLabel:m,emailPlaceholder:g,messageLabel:_,messagePlaceholder:y,nameLabel:b,namePlaceholder:v,isRequiredLabel:S,successMessageText:T,onFormClose:E,onFormOpen:w,onSubmitError:I,onSubmitSuccess:k}}setupOnce(){if(tn())try{this._cleanupWidgetIfExists();const{autoInject:e}=this.options;if(!e)return;this._createWidget(this.options)}catch(e){Oh&&je.error(e)}}openDialog(){this._widget||this._createWidget({...this.options,shouldCreateActor:!1}),this._widget&&this._widget.openDialog()}closeDialog(){this._widget&&this._widget.closeDialog()}attachTo(e,t){try{const n=Nh(this.options,t||{});return this._ensureShadowHost(n,(({shadow:t})=>{const r="string"==typeof e?Zh.querySelector(e):"function"==typeof e.addEventListener?e:null;if(!r)return Oh&&je.error("[Feedback] Unable to attach to target element"),null;const o=Jh({shadow:t,options:n,attachTo:r});return this._widgets.add(o),this._widget||(this._widget=o),o}))}catch(e){return Oh&&je.error(e),null}}createWidget(e){try{return this._createWidget(Nh(this.options,e||{}))}catch(e){return Oh&&je.error(e),null}}removeWidget(e){if(!e)return!1;try{if(this._widgets.has(e))return e.removeActor(),e.removeDialog(),this._widgets.delete(e),this._widget===e&&(this._widget=null),!0}catch(e){Oh&&je.error(e)}return!1}getWidget(){return this._widget}remove(){this._host&&this._host.remove(),this._initialize()}_initialize(){this._host=null,this._shadow=null,this._widget=null,this._widgets=new Set,this._hasInsertedActorStyles=!1}_cleanupWidgetIfExists(){this._host&&this.remove();const e=Zh.querySelector(`#${this.options.id}`);e&&e.remove()}_createWidget(e){return this._ensureShadowHost(e,(({shadow:t})=>{const n=Jh({shadow:t,options:e});return!this._hasInsertedActorStyles&&n.actor&&(t.appendChild(function(e){const t=e.createElement("style");return t.textContent="\n.widget__actor {\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n  z-index: var(--z-index);\n\n  line-height: 16px;\n\n  display: flex;\n  align-items: center;\n  gap: 8px;\n\n  border-radius: var(--border-radius);\n  cursor: pointer;\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 600;\n  padding: 16px;\n  text-decoration: none;\n  z-index: 9000;\n\n  color: var(--foreground);\n  background-color: var(--background);\n  border: var(--border);\n  box-shadow: var(--box-shadow);\n  opacity: 1;\n  transition: opacity 0.1s ease-in-out;\n}\n\n.widget__actor:hover {\n  background-color: var(--background-hover);\n}\n\n.widget__actor svg {\n  width: 16px;\n  height: 16px;\n}\n\n.widget__actor--hidden {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n\n.widget__actor__text {\n}\n\n@media (max-width: 600px) {\n  .widget__actor__text {\n    display: none;\n  }\n}\n\n.feedback-icon path {\n  fill: var(--foreground);\n}\n",t}(Zh)),this._hasInsertedActorStyles=!0),this._widgets.add(n),this._widget||(this._widget=n),n}))}_ensureShadowHost(e,t){let n=!1;if(!this._shadow||!this._host){const{id:t,colorScheme:r,themeLight:o,themeDark:s}=e,{shadow:a,host:i}=Ph({id:t,colorScheme:r,themeLight:o,themeDark:s});this._shadow=a,this._host=i,n=!0}this._host.dataset.sentryFeedbackColorscheme=e.colorScheme;const r=t({shadow:this._shadow,host:this._host});return n&&Zh.body.appendChild(this._host),r}}Qh.__initStatic();const ef="CaptureConsole",tf=(e={})=>{const t=e.levels||Me;return{name:ef,setupOnce(){},setup(e){"console"in Ie&&pt((({args:n,level:r})=>{Rr()===e&&t.includes(r)&&function(e,t){const n={level:In(t),extra:{arguments:e}};Cr((r=>{if(r.addEventProcessor((e=>(e.logger="console",_t(e,{handled:!1,type:"console"}),e))),"assert"===t&&!1===e[0]){const t=`Assertion failed: ${_e(e.slice(1)," ")||"console.assert"}`;return r.setExtra("arguments",e.slice(1)),void Er(t,n)}const o=e.find((e=>e instanceof Error));if("error"===t&&o)return void Tr(o,n);Er(_e(e," "),n)}))}(n,r)}))}}};Yo(ef,tf);const nf="Debug",rf=(e={})=>{const t={debugger:!1,stringify:!1,...e};return{name:nf,setupOnce(){},setup(e){e.on&&e.on("beforeSendEvent",((e,n)=>{t.debugger,Ue((()=>{t.stringify?(console.log(JSON.stringify(e,null,2)),n&&Object.keys(n).length&&console.log(JSON.stringify(n,null,2))):(console.log(e),n&&Object.keys(n).length&&console.log(n))}))}))}}};Yo(nf,rf);const of="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,sf="Dedupe",af=()=>{let e;return{name:sf,setupOnce(){},processEvent(t){if(t.type)return t;try{if(function(e,t){if(!t)return!1;if(function(e,t){const n=e.message,r=t.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!lf(e,t))return!1;if(!cf(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const n=uf(t),r=uf(e);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!lf(e,t))return!1;if(!cf(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return of&&je.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}};function cf(e,t){let n=df(e),r=df(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let e=0;e<r.length;e++){const t=r[e],o=n[e];if(t.filename!==o.filename||t.lineno!==o.lineno||t.colno!==o.colno||t.function!==o.function)return!1}return!0}function lf(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(e){return!1}}function uf(e){return e.exception&&e.exception.values&&e.exception.values[0]}function df(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}Yo(sf,af);const pf="ExtraErrorData",hf=(e={})=>{const t=e.depth||3,n=e.captureErrorCause||!1;return{name:pf,setupOnce(){},processEvent:(e,r)=>function(e,t={},n,r){if(!t.originalException||!ne(t.originalException))return e;const o=t.originalException.name||t.originalException.constructor.name,s=function(e,t){try{const n=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],r={};for(const t of Object.keys(e)){if(-1!==n.indexOf(t))continue;const o=e[t];r[t]=ne(o)?o.toString():o}if(t&&void 0!==e.cause&&(r.cause=ne(e.cause)?e.cause.toString():e.cause),"function"==typeof e.toJSON){const t=e.toJSON();for(const e of Object.keys(t)){const n=t[e];r[e]=ne(n)?n.toString():n}}return r}catch(e){of&&je.error("Unable to extract extra data from the Error object:",e)}return null}(t.originalException,r);if(s){const t={...e.contexts},r=nn(s,n);return le(r)&&(ze(r,"__sentry_skip_normalization__",!0),t[o]=r),{...e,contexts:t}}return e}(e,r,t,n)}};Yo(pf,hf);var ff="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function gf(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var mf={exports:{}};
/*!
      localForage -- Offline Storage, Improved
      Version 1.10.0
      https://localforage.github.io/localForage
      (c) 2013-2017 Mozilla, Apache License 2.0
  */!function(e,t){e.exports=function e(t,n,r){function o(a,i){if(!n[a]){if(!t[a]){if(!i&&gf)return gf(a);if(s)return s(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};t[a][0].call(l.exports,(function(e){var n=t[a][1][e];return o(n||e)}),l,l.exports,e,t,n,r)}return n[a].exports}for(var s=gf,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){(function(e){var n,r,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var s=0,a=new o(u),i=e.document.createTextNode("");a.observe(i,{characterData:!0}),n=function(){i.data=s=++s%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var c=new e.MessageChannel;c.port1.onmessage=u,n=function(){c.port2.postMessage(0)}}var l=[];function u(){var e,t;r=!0;for(var n=l.length;n;){for(t=l,l=[],e=-1;++e<n;)t[e]();n=l.length}r=!1}function d(e){1!==l.push(e)||r||n()}t.exports=d}).call(this,void 0!==ff?ff:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){var r=e(1);function o(){}var s={},a=["REJECTED"],i=["FULFILLED"],c=["PENDING"];function l(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==o&&h(this,e)}function u(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){r((function(){var r;try{r=t(n)}catch(t){return s.reject(e,t)}r===e?s.reject(e,new TypeError("Cannot resolve promise with itself")):s.resolve(e,r)}))}function p(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function h(e,t){var n=!1;function r(t){n||(n=!0,s.reject(e,t))}function o(t){n||(n=!0,s.resolve(e,t))}function a(){t(o,r)}var i=f(a);"error"===i.status&&r(i.value)}function f(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}function g(e){return e instanceof this?e:s.resolve(new this(o),e)}function m(e){var t=new this(o);return s.reject(t,e)}function y(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=new Array(n),i=0,c=-1,l=new this(o);++c<n;)u(e[c],c);return l;function u(e,o){function c(e){a[o]=e,++i!==n||r||(r=!0,s.resolve(l,a))}t.resolve(e).then(c,(function(e){r||(r=!0,s.reject(l,e))}))}}function _(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=-1,i=new this(o);++a<n;)c(e[a]);return i;function c(e){t.resolve(e).then((function(e){r||(r=!0,s.resolve(i,e))}),(function(e){r||(r=!0,s.reject(i,e))}))}}t.exports=l,l.prototype.catch=function(e){return this.then(null,e)},l.prototype.then=function(e,t){if("function"!=typeof e&&this.state===i||"function"!=typeof t&&this.state===a)return this;var n=new this.constructor(o);return this.state!==c?d(n,this.state===i?e:t,this.outcome):this.queue.push(new u(n,e,t)),n},u.prototype.callFulfilled=function(e){s.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){s.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},s.resolve=function(e,t){var n=f(p,t);if("error"===n.status)return s.reject(e,n.value);var r=n.value;if(r)h(e,r);else{e.state=i,e.outcome=t;for(var o=-1,a=e.queue.length;++o<a;)e.queue[o].callFulfilled(t)}return e},s.reject=function(e,t){e.state=a,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},l.resolve=g,l.reject=m,l.all=y,l.race=_},{1:1}],3:[function(e,t,n){(function(t){"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==ff?ff:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}var a=s();function i(){try{if(!a||!a.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}function c(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var l=Promise;function u(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function d(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function p(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function h(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var f="local-forage-detect-blob-support",g=void 0,m={},y=Object.prototype.toString,_="readonly",v="readwrite";function b(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=0;o<t;o++)r[o]=e.charCodeAt(o);return n}function S(e){return new l((function(t){var n=e.transaction(f,v),r=c([""]);n.objectStore(f).put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}function T(e){return"boolean"==typeof g?l.resolve(g):S(e).then((function(e){return g=e}))}function E(e){var t=m[e.name],n={};n.promise=new l((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function w(e){var t=m[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function I(e,t){var n=m[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function k(e,t){return new l((function(n,r){if(m[e.name]=m[e.name]||M(),e.db){if(!t)return n(e.db);E(e),e.db.close()}var o=[e.name];t&&o.push(e.version);var s=a.open.apply(a,o);t&&(s.onupgradeneeded=function(t){var n=s.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(f)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),s.onerror=function(e){e.preventDefault(),r(s.error)},s.onsuccess=function(){var t=s.result;t.onversionchange=function(e){e.target.close()},n(t),w(e)}}))}function C(e){return k(e,!1)}function R(e){return k(e,!0)}function x(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,o=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||n){if(n){var s=e.db.version+1;s>e.version&&(e.version=s)}return!0}return!1}function A(e){return new l((function(t,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)}))}function L(e){return c([b(atob(e.data))],{type:e.type})}function O(e){return e&&e.__local_forage_encoded_blob}function N(e){var t=this,n=t._initReady().then((function(){var e=m[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return d(n,e,e),n}function D(e){E(e);for(var t=m[e.name],n=t.forages,r=0;r<n.length;r++){var o=n[r];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return e.db=null,C(e).then((function(t){return e.db=t,x(e)?R(e):t})).then((function(r){e.db=t.db=r;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=r})).catch((function(t){throw I(e,t),t}))}function P(e,t,n,r){void 0===r&&(r=1);try{var o=e.db.transaction(e.storeName,t);n(null,o)}catch(o){if(r>0&&(!e.db||"InvalidStateError"===o.name||"NotFoundError"===o.name))return l.resolve().then((function(){if(!e.db||"NotFoundError"===o.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),R(e)})).then((function(){return D(e).then((function(){P(e,t,n,r-1)}))})).catch(n);n(o)}}function M(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function F(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];var o=m[n.name];o||(o=M(),m[n.name]=o),o.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=N);var s=[];function a(){return l.resolve()}for(var i=0;i<o.forages.length;i++){var c=o.forages[i];c!==t&&s.push(c._initReady().catch(a))}var u=o.forages.slice(0);return l.all(s).then((function(){return n.db=o.db,C(n)})).then((function(e){return n.db=e,x(n,t._defaultConfig.version)?R(n):e})).then((function(e){n.db=o.db=e,t._dbInfo=n;for(var r=0;r<u.length;r++){var s=u[r];s!==t&&(s._dbInfo.db=n.db,s._dbInfo.version=n.version)}}))}function U(e,t){var n=this;e=p(e);var r=new l((function(t,r){n.ready().then((function(){P(n._dbInfo,_,(function(o,s){if(o)return r(o);try{var a=s.objectStore(n._dbInfo.storeName).get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),O(e)&&(e=L(e)),t(e)},a.onerror=function(){r(a.error)}}catch(e){r(e)}}))})).catch(r)}));return u(r,t),r}function j(e,t){var n=this,r=new l((function(t,r){n.ready().then((function(){P(n._dbInfo,_,(function(o,s){if(o)return r(o);try{var a=s.objectStore(n._dbInfo.storeName).openCursor(),i=1;a.onsuccess=function(){var n=a.result;if(n){var r=n.value;O(r)&&(r=L(r));var o=e(r,n.key,i++);void 0!==o?t(o):n.continue()}else t()},a.onerror=function(){r(a.error)}}catch(e){r(e)}}))})).catch(r)}));return u(r,t),r}function B(e,t,n){var r=this;e=p(e);var o=new l((function(n,o){var s;r.ready().then((function(){return s=r._dbInfo,"[object Blob]"===y.call(t)?T(s.db).then((function(e){return e?t:A(t)})):t})).then((function(t){P(r._dbInfo,v,(function(s,a){if(s)return o(s);try{var i=a.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var c=i.put(t,e);a.oncomplete=function(){void 0===t&&(t=null),n(t)},a.onabort=a.onerror=function(){var e=c.error?c.error:c.transaction.error;o(e)}}catch(e){o(e)}}))})).catch(o)}));return u(o,n),o}function $(e,t){var n=this;e=p(e);var r=new l((function(t,r){n.ready().then((function(){P(n._dbInfo,v,(function(o,s){if(o)return r(o);try{var a=s.objectStore(n._dbInfo.storeName).delete(e);s.oncomplete=function(){t()},s.onerror=function(){r(a.error)},s.onabort=function(){var e=a.error?a.error:a.transaction.error;r(e)}}catch(e){r(e)}}))})).catch(r)}));return u(r,t),r}function G(e){var t=this,n=new l((function(e,n){t.ready().then((function(){P(t._dbInfo,v,(function(r,o){if(r)return n(r);try{var s=o.objectStore(t._dbInfo.storeName).clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=s.error?s.error:s.transaction.error;n(e)}}catch(e){n(e)}}))})).catch(n)}));return u(n,e),n}function W(e){var t=this,n=new l((function(e,n){t.ready().then((function(){P(t._dbInfo,_,(function(r,o){if(r)return n(r);try{var s=o.objectStore(t._dbInfo.storeName).count();s.onsuccess=function(){e(s.result)},s.onerror=function(){n(s.error)}}catch(e){n(e)}}))})).catch(n)}));return u(n,e),n}function q(e,t){var n=this,r=new l((function(t,r){e<0?t(null):n.ready().then((function(){P(n._dbInfo,_,(function(o,s){if(o)return r(o);try{var a=s.objectStore(n._dbInfo.storeName),i=!1,c=a.openKeyCursor();c.onsuccess=function(){var n=c.result;n?0===e||i?t(n.key):(i=!0,n.advance(e)):t(null)},c.onerror=function(){r(c.error)}}catch(e){r(e)}}))})).catch(r)}));return u(r,t),r}function H(e){var t=this,n=new l((function(e,n){t.ready().then((function(){P(t._dbInfo,_,(function(r,o){if(r)return n(r);try{var s=o.objectStore(t._dbInfo.storeName).openKeyCursor(),a=[];s.onsuccess=function(){var t=s.result;t?(a.push(t.key),t.continue()):e(a)},s.onerror=function(){n(s.error)}}catch(e){n(e)}}))})).catch(n)}));return u(n,e),n}function V(e,t){t=h.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,o=this;if(e.name){var s=e.name===n.name&&o._dbInfo.db?l.resolve(o._dbInfo.db):C(e).then((function(t){var n=m[e.name],r=n.forages;n.db=t;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=t;return t}));r=e.storeName?s.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;E(e);var r=m[e.name],o=r.forages;t.close();for(var s=0;s<o.length;s++){var i=o[s];i._dbInfo.db=null,i._dbInfo.version=n}var c=new l((function(t,r){var o=a.open(e.name,n);o.onerror=function(e){o.result.close(),r(e)},o.onupgradeneeded=function(){o.result.deleteObjectStore(e.storeName)},o.onsuccess=function(){var e=o.result;e.close(),t(e)}}));return c.then((function(e){r.db=e;for(var t=0;t<o.length;t++){var n=o[t];n._dbInfo.db=e,w(n._dbInfo)}})).catch((function(t){throw(I(e,t)||l.resolve()).catch((function(){})),t}))}})):s.then((function(t){E(e);var n=m[e.name],r=n.forages;t.close();for(var o=0;o<r.length;o++)r[o]._dbInfo.db=null;var s=new l((function(t,n){var r=a.deleteDatabase(e.name);r.onerror=function(){var e=r.result;e&&e.close(),n(r.error)},r.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}}));return s.then((function(e){n.db=e;for(var t=0;t<r.length;t++)w(r[t]._dbInfo)})).catch((function(t){throw(I(e,t)||l.resolve()).catch((function(){})),t}))}))}else r=l.reject("Invalid arguments");return u(r,t),r}var z={_driver:"asyncStorage",_initStorage:F,_support:i(),iterate:j,getItem:U,setItem:B,removeItem:$,clear:G,length:W,key:q,keys:H,dropInstance:V};function Y(){return"function"==typeof openDatabase}var K="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",X="~~local_forage_type~",J=/^~~local_forage_type~([^~]+)~/,Z="__lfsc__:",Q=Z.length,ee="arbf",te="blob",ne="si08",re="ui08",oe="uic8",se="si16",ae="si32",ie="ur16",ce="ui32",le="fl32",ue="fl64",de=Q+ee.length,pe=Object.prototype.toString;function he(e){var t,n,r,o,s,a=.75*e.length,i=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var l=new ArrayBuffer(a),u=new Uint8Array(l);for(t=0;t<i;t+=4)n=K.indexOf(e[t]),r=K.indexOf(e[t+1]),o=K.indexOf(e[t+2]),s=K.indexOf(e[t+3]),u[c++]=n<<2|r>>4,u[c++]=(15&r)<<4|o>>2,u[c++]=(3&o)<<6|63&s;return l}function fe(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=K[n[t]>>2],r+=K[(3&n[t])<<4|n[t+1]>>4],r+=K[(15&n[t+1])<<2|n[t+2]>>6],r+=K[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}function ge(e,t){var n="";if(e&&(n=pe.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===pe.call(e.buffer))){var r,o=Z;e instanceof ArrayBuffer?(r=e,o+=ee):(r=e.buffer,"[object Int8Array]"===n?o+=ne:"[object Uint8Array]"===n?o+=re:"[object Uint8ClampedArray]"===n?o+=oe:"[object Int16Array]"===n?o+=se:"[object Uint16Array]"===n?o+=ie:"[object Int32Array]"===n?o+=ae:"[object Uint32Array]"===n?o+=ce:"[object Float32Array]"===n?o+=le:"[object Float64Array]"===n?o+=ue:t(new Error("Failed to get type for BinaryArray"))),t(o+fe(r))}else if("[object Blob]"===n){var s=new FileReader;s.onload=function(){var n=X+e.type+"~"+fe(this.result);t(Z+te+n)},s.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(n){console.error("Couldn't convert value into a JSON string: ",e),t(null,n)}}function me(e){if(e.substring(0,Q)!==Z)return JSON.parse(e);var t,n=e.substring(de),r=e.substring(Q,de);if(r===te&&J.test(n)){var o=n.match(J);t=o[1],n=n.substring(o[0].length)}var s=he(n);switch(r){case ee:return s;case te:return c([s],{type:t});case ne:return new Int8Array(s);case re:return new Uint8Array(s);case oe:return new Uint8ClampedArray(s);case se:return new Int16Array(s);case ie:return new Uint16Array(s);case ae:return new Int32Array(s);case ce:return new Uint32Array(s);case le:return new Float32Array(s);case ue:return new Float64Array(s);default:throw new Error("Unkown type: "+r)}}var ye={serialize:ge,deserialize:me,stringToBuffer:he,bufferToString:fe};function _e(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function ve(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var o=new l((function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return r(e)}n.db.transaction((function(o){_e(o,n,(function(){t._dbInfo=n,e()}),(function(e,t){r(t)}))}),r)}));return n.serializer=ye,o}function be(e,t,n,r,o,s){e.executeSql(n,r,o,(function(e,a){a.code===a.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,i){i.rows.length?s(e,a):_e(e,t,(function(){e.executeSql(n,r,o,s)}),s)}),s):s(e,a)}),s)}function Se(e,t){var n=this;e=p(e);var r=new l((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){be(n,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=o.serializer.deserialize(r)),t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return u(r,t),r}function Te(e,t){var n=this,r=new l((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){be(n,o,"SELECT * FROM "+o.storeName,[],(function(n,r){for(var s=r.rows,a=s.length,i=0;i<a;i++){var c=s.item(i),l=c.value;if(l&&(l=o.serializer.deserialize(l)),void 0!==(l=e(l,c.key,i+1)))return void t(l)}t()}),(function(e,t){r(t)}))}))})).catch(r)}));return u(r,t),r}function Ee(e,t,n,r){var o=this;e=p(e);var s=new l((function(s,a){o.ready().then((function(){void 0===t&&(t=null);var i=t,c=o._dbInfo;c.serializer.serialize(t,(function(t,l){l?a(l):c.db.transaction((function(n){be(n,c,"INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){s(i)}),(function(e,t){a(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void s(Ee.apply(o,[e,i,n,r-1]));a(t)}}))}))})).catch(a)}));return u(s,n),s}function we(e,t,n){return Ee.apply(this,[e,t,n,1])}function Ie(e,t){var n=this;e=p(e);var r=new l((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){be(n,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){r(t)}))}))})).catch(r)}));return u(r,t),r}function ke(e){var t=this,n=new l((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){be(t,r,"DELETE FROM "+r.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return u(n,e),n}function Ce(e){var t=this,n=new l((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){be(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(t,n){var r=n.rows.item(0).c;e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return u(n,e),n}function Re(e,t){var n=this,r=new l((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){be(n,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return u(r,t),r}function xe(e){var t=this,n=new l((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){be(t,r,"SELECT key FROM "+r.storeName,[],(function(t,n){for(var r=[],o=0;o<n.rows.length;o++)r.push(n.rows.item(o).key);e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return u(n,e),n}function Ae(e){return new l((function(t,n){e.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var o=[],s=0;s<r.rows.length;s++)o.push(r.rows.item(s).name);t({db:e,storeNames:o})}),(function(e,t){n(t)}))}),(function(e){n(e)}))}))}function Le(e,t){t=h.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,o=this;return r=e.name?new l((function(t){var r;r=e.name===n.name?o._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:r,storeNames:[e.storeName]}):t(Ae(r))})).then((function(e){return new l((function(t,n){e.db.transaction((function(r){function o(e){return new l((function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}for(var s=[],a=0,i=e.storeNames.length;a<i;a++)s.push(o(e.storeNames[a]));l.all(s).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):l.reject("Invalid arguments"),u(r,t),r}var Oe={_driver:"webSQLStorage",_initStorage:ve,_support:Y(),iterate:Te,getItem:Se,setItem:we,removeItem:Ie,clear:ke,length:Ce,key:Re,keys:xe,dropInstance:Le};function Ne(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}function De(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function Pe(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}function Me(){return!Pe()||localStorage.length>0}function Fe(e){var t=this,n={};if(e)for(var r in e)n[r]=e[r];return n.keyPrefix=De(e,t._defaultConfig),Me()?(t._dbInfo=n,n.serializer=ye,l.resolve()):l.reject()}function Ue(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}}));return u(n,e),n}function je(e,t){var n=this;e=p(e);var r=n.ready().then((function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r}));return u(r,t),r}function Be(e,t){var n=this,r=n.ready().then((function(){for(var t=n._dbInfo,r=t.keyPrefix,o=r.length,s=localStorage.length,a=1,i=0;i<s;i++){var c=localStorage.key(i);if(0===c.indexOf(r)){var l=localStorage.getItem(c);if(l&&(l=t.serializer.deserialize(l)),void 0!==(l=e(l,c.substring(o),a++)))return l}}}));return u(r,t),r}function $e(e,t){var n=this,r=n.ready().then((function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t}));return u(r,t),r}function Ge(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,r=[],o=0;o<n;o++){var s=localStorage.key(o);0===s.indexOf(e.keyPrefix)&&r.push(s.substring(e.keyPrefix.length))}return r}));return u(n,e),n}function We(e){var t=this.keys().then((function(e){return e.length}));return u(t,e),t}function qe(e,t){var n=this;e=p(e);var r=n.ready().then((function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return u(r,t),r}function He(e,t,n){var r=this;e=p(e);var o=r.ready().then((function(){void 0===t&&(t=null);var n=t;return new l((function(o,s){var a=r._dbInfo;a.serializer.serialize(t,(function(t,r){if(r)s(r);else try{localStorage.setItem(a.keyPrefix+e,t),o(n)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||s(e),s(e)}}))}))}));return u(o,n),o}function Ve(e,t){if(t=h.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,o=this;return r=e.name?new l((function(t){e.storeName?t(De(e,o._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}})):l.reject("Invalid arguments"),u(r,t),r}var ze={_driver:"localStorageWrapper",_initStorage:Fe,_support:Ne(),iterate:Be,getItem:je,setItem:He,removeItem:qe,clear:Ue,length:We,key:$e,keys:Ge,dropInstance:Ve},Ye=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},Ke=function(e,t){for(var n=e.length,r=0;r<n;){if(Ye(e[r],t))return!0;r++}return!1},Xe=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Je={},Ze={},Qe={INDEXEDDB:z,WEBSQL:Oe,LOCALSTORAGE:ze},et=[Qe.INDEXEDDB._driver,Qe.WEBSQL._driver,Qe.LOCALSTORAGE._driver],tt=["dropInstance"],nt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tt),rt={description:"",driver:et.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ot(e,t){e[t]=function(){var n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}function st(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(Xe(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var at=function(){function e(t){for(var n in o(this,e),Qe)if(Qe.hasOwnProperty(n)){var r=Qe[n],s=r._driver;this[n]=s,Je[s]||this.defineDriver(r)}this._defaultConfig=st({},rt),this._config=st({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":r(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new l((function(t,n){try{var r=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(o);for(var s=nt.concat("_initStorage"),a=0,i=s.length;a<i;a++){var c=s[a];if((!Ke(tt,c)||e[c])&&"function"!=typeof e[c])return void n(o)}var d=function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=l.reject(t);return u(n,arguments[arguments.length-1]),n}},n=0,r=tt.length;n<r;n++){var o=tt[n];e[o]||(e[o]=t(o))}};d();var p=function(n){Je[r]&&console.info("Redefining LocalForage driver: "+r),Je[r]=e,Ze[r]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(p,n):p(!!e._support):p(!0)}catch(e){n(e)}}));return d(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=Je[e]?l.resolve(Je[e]):l.reject(new Error("Driver not found."));return d(r,t,n),r},e.prototype.getSerializer=function(e){var t=l.resolve(ye);return d(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return d(n,e,e),n},e.prototype.setDriver=function(e,t,n){var r=this;Xe(e)||(e=[e]);var o=this._getSupportedDrivers(e);function s(){r._config.driver=r.driver()}function a(e){return r._extend(e),s(),r._ready=r._initStorage(r._config),r._ready}function i(e){return function(){var t=0;function n(){for(;t<e.length;){var o=e[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(o).then(a).catch(n)}s();var i=new Error("No available storage method found.");return r._driverSet=l.reject(i),r._driverSet}return n()}}var c=null!==this._driverSet?this._driverSet.catch((function(){return l.resolve()})):l.resolve();return this._driverSet=c.then((function(){var e=o[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then((function(e){r._driver=e._driver,s(),r._wrapLibraryMethodsWithReady(),r._initDriver=i(o)}))})).catch((function(){s();var e=new Error("No available storage method found.");return r._driverSet=l.reject(e),r._driverSet})),d(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!Ze[e]},e.prototype._extend=function(e){st(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=e[n];this.supports(o)&&t.push(o)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=nt.length;e<t;e++)ot(this,nt[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),it=new at;t.exports=it},{3:3}]},{},[4])(4)}(mf);const yf=Ie;class _f{static __initStatic(){this.id="Offline"}constructor(e={}){this.name=_f.id,this.maxStoredEvents=e.maxStoredEvents||30,this.offlineEventStore=mf.exports.createInstance({name:"sentry/offlineEventStore"})}setupOnce(e,t){this.hub=t(),"addEventListener"in yf&&yf.addEventListener("online",(()=>{this._sendEvents().catch((()=>{of&&je.warn("could not send cached events")}))}));const n=e=>this.hub&&this.hub.getIntegration(_f)&&"navigator"in yf&&"onLine"in yf.navigator&&!yf.navigator.onLine?(of&&je.log("Event dropped due to being a offline - caching instead"),this._cacheEvent(e).then((e=>this._enforceMaxEvents())).catch((e=>{of&&je.warn("could not cache event while offline")})),null):e;n.id=this.name,e(n),"navigator"in yf&&"onLine"in yf.navigator&&yf.navigator.onLine&&this._sendEvents().catch((()=>{of&&je.warn("could not send cached events")}))}async _cacheEvent(e){return this.offlineEventStore.setItem(ft(),nn(e))}async _enforceMaxEvents(){const e=[];return this.offlineEventStore.iterate(((t,n,r)=>{e.push({cacheKey:n,event:t})})).then((()=>this._purgeEvents(e.sort(((e,t)=>(t.event.timestamp||0)-(e.event.timestamp||0))).slice(this.maxStoredEvents<e.length?this.maxStoredEvents:e.length).map((e=>e.cacheKey))))).catch((e=>{of&&je.warn("could not enforce max events")}))}async _purgeEvent(e){return this.offlineEventStore.removeItem(e)}async _purgeEvents(e){return Promise.all(e.map((e=>this._purgeEvent(e)))).then()}async _sendEvents(){return this.offlineEventStore.iterate(((e,t,n)=>{this.hub?(this.hub.captureEvent(e),this._purgeEvent(t).catch((e=>{of&&je.warn("could not purge event from cache")}))):of&&je.warn("no hub found - could not send cached event")}))}}_f.__initStatic();const vf=Ie,bf="ReportingObserver",Sf=new WeakMap,Tf=(e={})=>{const t=e.types||["crash","deprecation","intervention"];function n(e){if(Sf.has(Rr()))for(const t of e)Cr((e=>{e.setExtra("url",t.url);const n=`ReportingObserver [${t.type}]`;let r="No details available";if(t.body){const n={};for(const e in t.body)n[e]=t.body[e];if(e.setExtra("body",n),"crash"===t.type){const e=t.body;r=[e.crashId||"",e.reason||""].join(" ").trim()||r}else{r=t.body.message||r}}Er(`${n}: ${r}`)}))}return{name:bf,setupOnce(){if(!("ReportingObserver"in xt))return;new vf.ReportingObserver(n,{buffered:!0,types:t}).observe()},setup(e){Sf.set(e,!0)}}};Yo(bf,Tf);const Ef="RewriteFrames",wf=(e={})=>{const t=e.root,n=e.prefix||"app:///",r=e.iteratee||(e=>{if(!e.filename)return e;const r=/^[a-zA-Z]:\\/.test(e.filename)||e.filename.includes("\\")&&!e.filename.includes("/"),o=/^\//.test(e.filename);if(r||o){const o=r?e.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):e.filename,s=t?function(e,t){e=an(e).slice(1),t=an(t).slice(1);const n=cn(e.split("/")),r=cn(t.split("/")),o=Math.min(n.length,r.length);let s=o;for(let e=0;e<o;e++)if(n[e]!==r[e]){s=e;break}let a=[];for(let e=s;e<n.length;e++)a.push("..");return a=a.concat(r.slice(s)),a.join("/")}(t,o):ln(o);e.filename=`${n}${s}`}return e});return{name:Ef,setupOnce(){},processEvent(e){let t=e;return e.exception&&Array.isArray(e.exception.values)&&(t=function(e){try{return{...e,exception:{...e.exception,values:e.exception.values.map((e=>{return{...e,...e.stacktrace&&{stacktrace:(t=e.stacktrace,{...t,frames:t&&t.frames&&t.frames.map((e=>r(e)))})}};var t}))}}}catch(t){return e}}(t)),t}}};Yo(Ef,wf);const If="SessionTiming",kf=()=>{const e=Date.now();return{name:If,setupOnce(){},processEvent(t){const n=Date.now();return{...t,extra:{...t.extra,"session:start":e,"session:duration":n-e,"session:end":n}}}}};Yo(If,kf);const Cf="Transaction";function Rf(e){return e.module||e.function?`${e.module||"?"}/${e.function||"?"}`:"<unknown>"}Yo(Cf,(()=>({name:Cf,setupOnce(){},processEvent(e){const t=function(e){const t=e.exception&&e.exception.values&&e.exception.values[0];return t&&t.stacktrace&&t.stacktrace.frames||[]}(e);for(let n=t.length-1;n>=0;n--){const r=t[n];if(!0===r.in_app){e.transaction=Rf(r);break}}return e}})));const xf="HttpClient",Af=(e={})=>{const t={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...e};return{name:xf,setupOnce(){},setup(e){!function(e,t){if(!Ot())return;Nt((n=>{if(Rr()!==e)return;const{response:r,args:o}=n,[s,a]=o;r&&function(e,t,n,r){if(Nf(e,n.status,n.url)){const e=function(e,t){if(!t&&e instanceof Request)return e;if(e instanceof Request&&e.bodyUsed)return e;return new Request(e,t)}(t,r);let o,s,a,i;Pf()&&([{headers:o,cookies:a},{headers:s,cookies:i}]=[{cookieHeader:"Cookie",obj:e},{cookieHeader:"Set-Cookie",obj:n}].map((({cookieHeader:e,obj:t})=>{const n=function(e){const t={};return e.forEach(((e,n)=>{t[n]=e})),t}(t.headers);let r;try{const t=n[e]||n[e.toLowerCase()]||void 0;t&&(r=Of(t))}catch(t){of&&je.log(`Could not extract cookies from header ${e}`)}return{headers:n,cookies:r}})));wr(Df({url:e.url,method:e.method,status:n.status,requestHeaders:o,responseHeaders:s,requestCookies:a,responseCookies:i}))}}(t,s,r,a)}))}(e,t),function(e,t){if(!("XMLHttpRequest"in Ie))return;Xt((n=>{if(Rr()!==e)return;const r=n.xhr,o=r[Kt];if(!o)return;const{method:s,request_headers:a}=o;try{!function(e,t,n,r){if(Nf(e,t.status,t.responseURL)){let e,o,s;if(Pf()){try{const e=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;e&&(o=Of(e))}catch(e){of&&je.log("Could not extract cookies from response headers")}try{s=function(e){const t=e.getAllResponseHeaders();if(!t)return{};return t.split("\r\n").reduce(((e,t)=>{const[n,r]=t.split(": ");return e[n]=r,e}),{})}(t)}catch(e){of&&je.log("Could not extract headers from response")}e=r}wr(Df({url:t.responseURL,method:n,status:t.status,requestHeaders:e,responseHeaders:s,responseCookies:o}))}}(t,r,s,a)}catch(e){of&&je.warn("Error while extracting response event form XHR response",e)}}))}(e,t)}}};function Lf(e){if(e){const t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function Of(e){return e.split("; ").reduce(((e,t)=>{const[n,r]=t.split("=");return e[n]=r,e}),{})}function Nf(e,t,n){return function(e,t){return e.some((e=>"number"==typeof e?e===t:t>=e[0]&&t<=e[1]))}(e.failedRequestStatusCodes,t)&&(r=e.failedRequestTargets,o=n,r.some((e=>"string"==typeof e?o.includes(e):e.test(o))))&&!ms(n,Rr());var r,o}function Df(e){const t=`HTTP Client Error with status code: ${e.status}`,n={message:t,exception:{values:[{type:"Error",value:t}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:Lf(e.responseHeaders)}}};return _t(n,{type:"http.client",handled:!1}),n}function Pf(){const e=Rr();return!!e&&Boolean(e.getOptions().sendDefaultPii)}Yo(xf,Af);const Mf=Ie,Ff="ContextLines",Uf=(e={})=>{const t=null!=e.frameContextLines?e.frameContextLines:7;return{name:Ff,setupOnce(){},processEvent:e=>function(e,t){const n=Mf.document,r=Mf.location&&mn(Mf.location.href);if(!n||!r)return e;const o=e.exception&&e.exception.values;if(!o||!o.length)return e;const s=n.documentElement.innerHTML;if(!s)return e;const a=["<!DOCTYPE html>","<html>",...s.split("\n"),"</html>"];return o.forEach((e=>{const n=e.stacktrace;n&&n.frames&&(n.frames=n.frames.map((e=>function(e,t,n,r){if(e.filename!==n||!e.lineno||!t.length)return e;return function(e,t,n=5){if(void 0===t.lineno)return;const r=e.length,o=Math.max(Math.min(r-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,o-n),o).map((e=>ye(e,0))),t.context_line=ye(e[Math.min(r-1,o)],t.colno||0),t.post_context=e.slice(Math.min(o+1,r),o+1+n).map((e=>ye(e,0)))}(t,e,r),e}(e,a,r,t))))})),e}(e,t)}};function jf(e){return new Promise(((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)}))}function Bf(e){return jf(e.getAllKeys())}function $f(e){let t;function n(){return null==t&&(t=function(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=jf(n);return e=>r.then((n=>e(n.transaction(t,"readwrite").objectStore(t))))}(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{insert:async t=>{try{const r=await Hn(t,e.textEncoder);await function(e,t,n){return e((e=>Bf(e).then((r=>{if(!(r.length>=n))return e.put(t,Math.max(...r,0)+1),jf(e.transaction)}))))}(n(),r,e.maxQueueSize||30)}catch(e){}},pop:async()=>{try{const t=await function(e){return e((e=>Bf(e).then((t=>{if(0!==t.length)return jf(e.get(t[0])).then((n=>(e.delete(t[0]),jf(e.transaction).then((()=>n)))))}))))}(n());if(t)return function(e,t,n){let r="string"==typeof e?t.encode(e):e;function o(e){const t=r.subarray(0,e);return r=r.subarray(e+1),t}function s(){let e=r.indexOf(10);return e<0&&(e=r.length),JSON.parse(n.decode(o(e)))}const a=s(),i=[];for(;r.length;){const e=s(),t="number"==typeof e.length?e.length:void 0;i.push([e,t?o(t):s()])}return[a,i]}(t,e.textEncoder||new TextEncoder,e.textDecoder||new TextDecoder)}catch(e){}}}}Yo(Ff,Uf);const Gf=1e6,Wf=String(0),qf="main";let Hf="",Vf="",zf="",Yf=Ai.navigator&&Ai.navigator.userAgent||"",Kf="";const Xf=Ai.navigator&&Ai.navigator.language||Ai.navigator&&Ai.navigator.languages&&Ai.navigator.languages[0]||"";const Jf=Ai.navigator&&Ai.navigator.userAgentData;var Zf;function Qf(e){return function(e){return!("thread_metadata"in e)}(e)?function(e){let t,n=0;const r={samples:[],stacks:[],frames:[],thread_metadata:{[Wf]:{name:qf}}};if(!e.samples.length)return r;const o=e.samples[0].timestamp,s="number"==typeof performance.timeOrigin?performance.timeOrigin:xn||0,a=s-(xn||s);for(let s=0;s<e.samples.length;s++){const i=e.samples[s];if(void 0===i.stackId){void 0===t&&(t=n,r.stacks[t]=[],n++),r.samples[s]={elapsed_since_start_ns:((i.timestamp+a-o)*Gf).toFixed(0),stack_id:t,thread_id:Wf};continue}let c=e.stacks[i.stackId];const l=[];for(;c;){l.push(c.frameId);const t=e.frames[c.frameId];void 0===r.frames[c.frameId]&&(r.frames[c.frameId]={function:t.name,abs_path:"number"==typeof t.resourceId?e.resources[t.resourceId]:void 0,lineno:t.line,colno:t.column}),c=void 0===c.parentId?void 0:e.stacks[c.parentId]}const u={elapsed_since_start_ns:((i.timestamp+a-o)*Gf).toFixed(0),stack_id:n,thread_id:Wf};r.stacks[n]=l,r.samples[s]=u,n++}return r}(e):e}function eg(e,t,n,r){if("transaction"!==r.type)throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(null==n)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);const o=function(e){const t=e&&e.contexts&&e.contexts.trace&&e.contexts.trace.trace_id;return"string"==typeof t&&32!==t.length&&Di&&je.log(`[Profiling] Invalid traceId: ${t} on profiled event`),"string"!=typeof t?"":t}(r),s=Qf(n),a=t||("number"==typeof r.start_timestamp?1e3*r.start_timestamp:Date.now()),i="number"==typeof r.timestamp?1e3*r.timestamp:Date.now();return{event_id:e,timestamp:new Date(a).toISOString(),platform:"javascript",version:"1",release:r.release||"",environment:r.environment||or,runtime:{name:"javascript",version:Ai.navigator.userAgent},os:{name:Hf,version:Vf,build_number:Yf},device:{locale:Xf,model:Kf,manufacturer:Yf,architecture:zf,is_emulator:!1},debug_meta:{images:rg(n.resources)},profile:s,transactions:[{name:r.transaction||"",id:r.event_id||ft(),trace_id:o,active_thread_id:Wf,relative_start_ns:"0",relative_end_ns:(1e6*(i-a)).toFixed(0)}]}}function tg(e){return"pageload"===e.op}"object"==typeof(Zf=Jf)&&null!==Zf&&"getHighEntropyValues"in Zf&&Jf.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then((e=>{if(Hf=e.platform||"",zf=e.architecture||"",Kf=e.model||"",Vf=e.platformVersion||"",e.fullVersionList&&e.fullVersionList.length>0){const t=e.fullVersionList[e.fullVersionList.length-1];Yf=`${t.brand} ${t.version}`}})).catch((e=>{}));const ng=new WeakMap;function rg(e){const t=Ie._sentryDebugIds;if(!t)return[];const n=Rr(),r=n&&n.getOptions(),o=r&&r.stackParser;if(!o)return[];let s;const a=ng.get(o);a?s=a:(s=new Map,ng.set(o,s));const i=Object.keys(t).reduce(((e,n)=>{let r;const a=s.get(n);a?r=a:(r=o(n),s.set(n,r));for(let o=r.length-1;o>=0;o--){const s=r[o],a=s&&s.filename;if(s&&a){e[a]=t[n];break}}return e}),{}),c=[];for(const t of e)t&&i[t]&&c.push({type:"sourcemap",code_file:t,debug_id:i[t]});return c}let og=!1;const sg=3e4;function ag(e){if(og)return Di&&je.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return Di&&je.log("[Profiling] Discarding profile because transaction was not sampled."),!1;const t=Rr(),n=t&&t.getOptions();if(!n)return Di&&je.log("[Profiling] Profiling disabled, no options found."),!1;const r=n.profilesSampleRate;if(!("number"!=typeof(o=r)&&"boolean"!=typeof o||"number"==typeof o&&isNaN(o)?(Di&&je.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(o)} of type ${JSON.stringify(typeof o)}.`),0):!0===o||!1===o||!(o<0||o>1)||(Di&&je.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${o}.`),0)))return Di&&je.warn("[Profiling] Discarding profile because of invalid sample rate."),!1;var o;if(!r)return Di&&je.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1;return!!(!0===r||Math.random()<r)||(Di&&je.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`),!1)}function ig(e,t,n,r){return function(e){return e.samples.length<2?(Di&&je.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):!!e.frames.length||(Di&&je.log("[Profiling] Discarding profile because it contains no frames"),!1)}(n)?eg(e,t,n,r):null}const cg=new Map;function lg(e){const t=cg.get(e);return t&&cg.delete(e),t}function ug(e){let t;tg(e)&&(t=1e3*Rn());const n=function(){const e=Ai.Profiler;if("function"!=typeof e)return void(Di&&je.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object."));const t=Math.floor(sg/10);try{return new e({sampleInterval:10,maxBufferSize:t})}catch(e){Di&&(je.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),je.log("[Profiling] Disabling profiling for current user session.")),og=!0}}();if(!n)return e;Di&&je.log(`[Profiling] started profiling transaction: ${mr(e).description}`);const r=ft();async function o(){return e&&n?n.stop().then((t=>(s&&(Ai.clearTimeout(s),s=void 0),Di&&je.log(`[Profiling] stopped profiling of transaction: ${mr(e).description}`),t?(function(e,t){if(cg.set(e,t),cg.size>30){const e=cg.keys().next().value;cg.delete(e)}}(r,t),null):(Di&&je.log(`[Profiling] profiler returned null profile for: ${mr(e).description}`,"this may indicate an overlapping transaction or a call to stopProfiling with a profile title that was never started"),null)))).catch((e=>(Di&&je.log("[Profiling] error while stopping profiler:",e),null))):null}let s=Ai.setTimeout((()=>{Di&&je.log("[Profiling] max profile duration elapsed, stopping profiling for:",mr(e).description),o()}),sg);const a=e.end.bind(e);return e.end=function(){return e?(o().then((()=>{e.setContext("profile",{profile_id:r,start_timestamp:t}),a()}),(()=>{a()})),e):a()},e}const dg="BrowserProfiling",pg=()=>({name:dg,setupOnce(){},setup(e){const t=xr().getTransaction();t&&tg(t)&&ag(t)&&ug(t),"function"==typeof e.on?(e.on("startTransaction",(e=>{ag(e)&&ug(e)})),e.on("beforeEnvelope",(e=>{if(!cg.size)return;const t=function(e){const t=[];return Wn(e,((e,n)=>{if("transaction"===n)for(let n=1;n<e.length;n++){const r=e[n];r&&r.contexts&&r.contexts.profile&&r.contexts.profile.profile_id&&t.push(e[n])}})),t}(e);if(!t.length)return;const n=[];for(const e of t){const t=e&&e.contexts,r=t&&t.profile&&t.profile.profile_id,o=t&&t.profile&&t.profile.start_timestamp;if("string"!=typeof r){Di&&je.log("[Profiling] cannot find profile for a transaction without a profile context");continue}if(!r){Di&&je.log("[Profiling] cannot find profile for a transaction without a profile context");continue}t&&t.profile&&delete t.profile;const s=lg(r);if(!s){Di&&je.log(`[Profiling] Could not retrieve profile for transaction: ${r}`);continue}const a=ig(r,o,s,e);a&&n.push(a)}!function(e,t){if(!t.length)return e;for(const n of t)e[1].push([{type:"profile"},n])}(e,n)}))):je.warn("[Profiling] Client does not support hooks, profiling will be disabled")}}),hg=Yo(dg,pg);let fg={};Ai.Sentry&&Ai.Sentry.Integrations&&(fg=Ai.Sentry.Integrations);const gg={...fg,...Hs,...Yc};var mg=Object.freeze({__proto__:null,Integrations:gg,FunctionToString:Ms,Hub:Vr,InboundFilters:As,ModuleMetadata:Es,SDK_VERSION:Wr,SEMANTIC_ATTRIBUTE_SENTRY_OP:Eo,SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN:wo,SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE:To,SEMANTIC_ATTRIBUTE_SENTRY_SOURCE:So,Scope:$r,addBreadcrumb:Ir,addEventProcessor:rs,addGlobalEventProcessor:ar,addIntegration:function(e){const t=Rr();t&&t.addIntegration?t.addIntegration(e):rr&&je.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`)},addTracingExtensions:Fo,captureEvent:wr,captureException:Tr,captureMessage:Er,captureSession:Nr,close:async function(e){const t=Rr();return t?t.close(e):(rr&&je.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))},configureScope:function(e){Kr().configureScope(e)},continueTrace:({sentryTrace:e,baggage:t},n)=>{const r=xr(),{traceparentData:o,dynamicSamplingContext:s,propagationContext:a}=function(e,t){const n=Un(e),r=Dn(t),{traceId:o,parentSpanId:s,parentSampled:a}=n||{};return n?{traceparentData:n,dynamicSamplingContext:r||{},propagationContext:{traceId:o||ft(),parentSpanId:s||ft().substring(16),spanId:ft().substring(16),sampled:a,dsc:r||{}}}:{traceparentData:n,dynamicSamplingContext:void 0,propagationContext:{traceId:o||ft(),spanId:ft().substring(16)}}}(e,t);r.setPropagationContext(a),rr&&o&&je.log(`[Tracing] Continuing trace ${o.traceId}.`);const i={...o,metadata:Qe({dynamicSamplingContext:s})};return n?Jr((()=>n(i))):i},createTransport:is,endSession:Lr,extractTraceparentData:to,flush:async function(e){const t=Rr();return t?t.flush(e):(rr&&je.warn("Cannot flush events. No client defined."),Promise.resolve(!1))},functionToStringIntegration:Ps,getActiveSpan:ho,getActiveTransaction:eo,getClient:Rr,getCurrentHub:Kr,getCurrentScope:xr,getHubFromCarrier:Zr,getSpanStatusFromHttpCode:so,inboundFiltersIntegration:xs,isInitialized:function(){return!!Rr()},lastEventId:function(){return Kr().lastEventId()},makeMain:Yr,makeMultiplexedTransport:function(e,t){return n=>{const r=e(n),o=new Map;function s(t,r){const s=r?`${t}:${r}`:t;let a=o.get(s);if(!a){const i=Ge(t);if(!i)return;const c=Wo(i,n.tunnel);a=r?function(e,t){return n=>{const r=e(n);return{...r,send:async e=>{const n=fs(e,["event","transaction","profile","replay_event"]);return n&&(n.release=t),r.send(e)}}}}(e,r)({...n,url:c}):e({...n,url:c}),o.set(s,a)}return[t,a]}return{send:async function(e){const n=t({envelope:e,getEvent:function(t){const n=t&&t.length?t:["event"];return fs(e,n)}}).map((e=>"string"==typeof e?s(e,void 0):s(e.dsn,e.release))).filter((e=>!!e));0===n.length&&n.push(["",r]);return(await Promise.all(n.map((([t,n])=>n.send(function(e,t){return $n(t?{...e[0],dsn:t}:e[0],e[1])}(e,t))))))[0]},flush:async function(e){const t=[await r.flush(e)];for(const[,n]of o)t.push(await n.flush(e));return t.every((e=>e))}}}},metrics:qs,moduleMetadataIntegration:Ts,parameterize:function(e,...t){const n=new String(String.raw(e,...t));return n.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=t,n},setContext:kr,setCurrentClient:ss,setExtra:function(e,t){Kr().setExtra(e,t)},setExtras:function(e){Kr().setExtras(e)},setHttpStatus:io,setMeasurement:Uo,setTag:function(e,t){Kr().setTag(e,t)},setTags:function(e){Kr().setTags(e)},setUser:function(e){Kr().setUser(e)},spanStatusfromHttpCode:ao,startInactiveSpan:po,startSession:Ar,startSpan:uo,startSpanManual:function(e,t){const n=go(e);return Jr((()=>Cr(e.scope,(r=>{const o=Kr(),s=r.getSpan(),a=e.onlyIfParent&&!s?void 0:fo(o,{parentSpan:s,spanContext:n,forceTransaction:e.forceTransaction,scope:r});function i(){a&&a.end()}return co((()=>t(a,i)),(()=>{if(a&&a.isRecording()){const{status:e}=mr(a);e&&"ok"!==e||a.setStatus("internal_error")}}))}))))},startTransaction:function(e,t){return Kr().startTransaction({...e},t)},trace:function(e,t,n=(()=>{}),r=(()=>{})){const o=Kr(),s=xr(),a=s.getSpan(),i=go(e),c=fo(o,{parentSpan:a,spanContext:i,forceTransaction:!1,scope:s});return s.setSpan(c),co((()=>t(c)),(e=>{c&&c.setStatus("internal_error"),n(e,c)}),(()=>{c&&c.end(),s.setSpan(a),r()}))},withActiveSpan:function(e,t){return Cr((n=>(n.setSpan(e),t(n))))},withIsolationScope:function(e){return Jr((()=>e(Xr())))},withScope:Cr,WINDOW:Ai,BrowserClient:Vi,makeFetchTransport:Yi,makeXHRTransport:Xi,chromeStackLineParser:tc,defaultStackLineParsers:dc,defaultStackParser:pc,geckoStackLineParser:oc,opera10StackLineParser:cc,opera11StackLineParser:uc,winjsStackLineParser:ac,eventFromException:Bi,eventFromMessage:$i,exceptionFromError:Pi,createUserFeedbackEnvelope:Hi,captureUserFeedback:function(e){const t=Rr();t&&t.captureUserFeedback(e)},defaultIntegrations:Hc,forceLoad:function(){},getDefaultIntegrations:Vc,init:zc,onLoad:function(e){e()},showReportDialog:(e={},t=Kr())=>{if(!Ai.document)return void(Di&&je.error("Global document not defined in showReportDialog call"));const{client:n,scope:r}=t.getStackTop(),o=e.dsn||n&&n.getDsn();if(!o)return void(Di&&je.error("DSN not configured for showReportDialog call"));r&&(e.user={...r.getUser(),...e.user}),e.eventId||(e.eventId=t.lastEventId());const s=Ai.document.createElement("script");s.async=!0,s.crossOrigin="anonymous",s.src=function(e,t){const n=qe(e);if(!n)return"";const r=`${$o(n)}embed/error-page/`;let o=`dsn=${$e(n)}`;for(const e in t)if("dsn"!==e&&"onClose"!==e)if("user"===e){const e=t.user;if(!e)continue;e.name&&(o+=`&name=${encodeURIComponent(e.name)}`),e.email&&(o+=`&email=${encodeURIComponent(e.email)}`)}else o+=`&${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`;return`${r}?${o}`}(o,e),e.onLoad&&(s.onload=e.onLoad);const{onClose:a}=e;if(a){const e=t=>{if("__sentry_reportdialog_closed__"===t.data)try{a()}finally{Ai.removeEventListener("message",e)}};Ai.addEventListener("message",e)}const i=Ai.document.head||Ai.document.body;i?i.appendChild(s):Di&&je.error("Not injecting report dialog. No injection point found in HTML")},wrap:function(e){return Ni(e)()},Breadcrumbs:yc,breadcrumbsIntegration:mc,Dedupe:bc,GlobalHandlers:Cc,globalHandlersIntegration:kc,HttpContext:Nc,httpContextIntegration:Oc,LinkedErrors:Mc,linkedErrorsIntegration:Pc,TryCatch:Bc,browserApiErrorsIntegration:jc,Replay:$p,getReplay:function(){const e=Rr();return e&&e.getIntegrationByName&&e.getIntegrationByName("Replay")},replayIntegration:e=>new $p(e),ReplayCanvas:bh,replayCanvasIntegration:vh,Feedback:Qh,feedbackIntegration:e=>new Qh(e),sendFeedback:Lh,captureConsoleIntegration:tf,contextLinesIntegration:Uf,debugIntegration:rf,dedupeIntegration:af,extraErrorDataIntegration:hf,httpClientIntegration:Af,reportingObserverIntegration:Tf,rewriteFramesIntegration:wf,sessionTimingIntegration:kf,BrowserTracing:class{constructor(e){this.name="BrowserTracing",this._hasSetTracePropagationTargets=!1,Fo(),Vs&&(this._hasSetTracePropagationTargets=!(!e||!e.tracePropagationTargets&&!e.tracingOrigins)),this.options={...Si,...e},void 0!==this.options._experiments.enableLongTask&&(this.options.enableLongTask=this.options._experiments.enableLongTask),e&&!e.tracePropagationTargets&&e.tracingOrigins&&(this.options.tracePropagationTargets=e.tracingOrigins),this._collectWebVitals=ai(),this._interactionIdToRouteNameMapping={},this.options.enableInp&&li(this._interactionIdToRouteNameMapping,this.options.interactionsSampleRate),this.options.enableLongTask&&ii(),this.options._experiments.enableInteractions&&ci(),this._latestRoute={name:void 0,context:void 0}}setupOnce(e,t){this._getCurrentHub=t;const n=t().getClient(),r=n&&n.getOptions(),{routingInstrumentation:o,startTransactionOnLocationChange:s,startTransactionOnPageLoad:a,markBackgroundTransactions:i,traceFetch:c,traceXHR:l,shouldCreateSpanForRequest:u,enableHTTPTimings:d,_experiments:p}=this.options,h=r&&r.tracePropagationTargets,f=h||this.options.tracePropagationTargets;Vs&&this._hasSetTracePropagationTargets&&h&&je.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used."),o((e=>{const n=this._createRouteTransaction(e);return this.options._experiments.onStartRouteTransaction&&this.options._experiments.onStartRouteTransaction(n,e,t),n}),a,s),i&&ia(),p.enableInteractions&&this._registerInteractionListener(),this.options.enableInp&&this._registerInpInteractionListener(),yi({traceFetch:c,traceXHR:l,tracePropagationTargets:f,shouldCreateSpanForRequest:u,enableHTTPTimings:d})}_createRouteTransaction(e){if(!this._getCurrentHub)return void(Vs&&je.warn(`[Tracing] Did not create ${e.op} transaction because _getCurrentHub is invalid.`));const t=this._getCurrentHub(),{beforeNavigate:n,idleTimeout:r,finalTimeout:o,heartbeatInterval:s}=this.options,a="pageload"===e.op;let i;if(a){const t=a?Ti("sentry-trace"):"",n=a?Ti("baggage"):void 0,{traceId:r,dsc:o,parentSpanId:s,sampled:c}=jn(t,n);i={traceId:r,parentSpanId:s,parentSampled:c,...e,metadata:{...e.metadata,dynamicSamplingContext:o},trimEnd:!0}}else i={trimEnd:!0,...e};const c="function"==typeof n?n(i):i,l=void 0===c?{...i,sampled:!1}:c;l.metadata=l.name!==i.name?{...l.metadata,source:"custom"}:l.metadata,this._latestRoute.name=l.name,this._latestRoute.context=l,!1===l.sampled&&Vs&&je.log(`[Tracing] Will not send ${l.op} transaction because of beforeNavigate.`),Vs&&je.log(`[Tracing] Starting ${l.op} transaction on scope`);const{location:u}=aa,d=Mo(t,l,r,o,!0,{location:u},s,a);return a&&aa.document&&(aa.document.addEventListener("readystatechange",(()=>{["interactive","complete"].includes(aa.document.readyState)&&d.sendAutoFinishSignal()})),["interactive","complete"].includes(aa.document.readyState)&&d.sendAutoFinishSignal()),d.registerBeforeFinishCallback((e=>{this._collectWebVitals(),di(e)})),d}_registerInteractionListener(){let e;const t=()=>{const{idleTimeout:t,finalTimeout:n,heartbeatInterval:r}=this.options,o="ui.action.click",s=eo();if(s&&s.op&&["navigation","pageload"].includes(s.op))return void(Vs&&je.warn(`[Tracing] Did not create ${o} transaction because a pageload or navigation transaction is in progress.`));if(e&&(e.setFinishReason("interactionInterrupted"),e.end(),e=void 0),!this._getCurrentHub)return void(Vs&&je.warn(`[Tracing] Did not create ${o} transaction because _getCurrentHub is invalid.`));if(!this._latestRoute.name)return void(Vs&&je.warn(`[Tracing] Did not create ${o} transaction because _latestRouteName is missing.`));const a=this._getCurrentHub(),{location:i}=aa,c={name:this._latestRoute.name,op:o,trimEnd:!0,data:{[So]:this._latestRoute.context?Ei(this._latestRoute.context):"url"}};e=Mo(a,c,t,n,!0,{location:i},r)};["click"].forEach((e=>{aa.document&&addEventListener(e,t,{once:!1,capture:!0})}))}_registerInpInteractionListener(){const e=({entries:e})=>{const t=Rr(),n=void 0!==t&&void 0!==t.getIntegrationByName?t.getIntegrationByName("Replay"):void 0,r=void 0!==n?n.getReplayId():void 0,o=eo(),s=xr(),a=void 0!==s?s.getUser():void 0;e.forEach((e=>{if(function(e){return"duration"in e}(e)){const t=e.interactionId;if(void 0===t)return;const n=this._interactionIdToRouteNameMapping[t],s=e.duration,i=e.startTime,c=Object.keys(this._interactionIdToRouteNameMapping),l=c.length>0?c.reduce(((e,t)=>this._interactionIdToRouteNameMapping[e].duration<this._interactionIdToRouteNameMapping[t].duration?e:t)):void 0;if("first-input"===e.entryType){if(c.map((e=>this._interactionIdToRouteNameMapping[e])).some((e=>e.duration===s&&e.startTime===i)))return}if(!t)return;if(n)n.duration=Math.max(n.duration,s);else if(c.length<10||void 0===l||s>this._interactionIdToRouteNameMapping[l].duration){const e=this._latestRoute.name,n=this._latestRoute.context;e&&n&&(l&&Object.keys(this._interactionIdToRouteNameMapping).length>=10&&delete this._interactionIdToRouteNameMapping[l],this._interactionIdToRouteNameMapping[t]={routeName:e,duration:s,parentContext:n,user:a,activeTransaction:o,replayId:r,startTime:i})}}}))};$a("event",e),$a("first-input",e)}},browserTracingIntegration:(e={})=>{const t=!!Vs&&!(!e.tracePropagationTargets&&!e.tracingOrigins);Fo(),!e.tracePropagationTargets&&e.tracingOrigins&&(e.tracePropagationTargets=e.tracingOrigins);const n={...wi,...e},r=ai(),o={};n.enableInp&&li(o,n.interactionsSampleRate),n.enableLongTask&&ii(),n._experiments.enableInteractions&&ci();const s={name:void 0,context:void 0};function a(e){const t=Kr(),{beforeStartSpan:o,idleTimeout:a,finalTimeout:i,heartbeatInterval:c}=n,l="pageload"===e.op;let u;if(l){const t=l?Ci("sentry-trace"):"",n=l?Ci("baggage"):void 0,{traceId:r,dsc:o,parentSpanId:s,sampled:a}=jn(t,n);u={traceId:r,parentSpanId:s,parentSampled:a,...e,metadata:{...e.metadata,dynamicSamplingContext:o},trimEnd:!0}}else u={trimEnd:!0,...e};const d=o?o(u):u;d.metadata=d.name!==u.name?{...d.metadata,source:"custom"}:d.metadata,s.name=d.name,s.context=d,!1===d.sampled&&Vs&&je.log(`[Tracing] Will not send ${d.op} transaction because of beforeNavigate.`),Vs&&je.log(`[Tracing] Starting ${d.op} transaction on scope`);const{location:p}=aa,h=Mo(t,d,a,i,!0,{location:p},c,l);return l&&aa.document&&(aa.document.addEventListener("readystatechange",(()=>{["interactive","complete"].includes(aa.document.readyState)&&h.sendAutoFinishSignal()})),["interactive","complete"].includes(aa.document.readyState)&&h.sendAutoFinishSignal()),h.registerBeforeFinishCallback((e=>{r(),di(e)})),h}return{name:"BrowserTracing",setupOnce:()=>{},afterAllSetup(e){const r=e.getOptions(),{markBackgroundSpan:i,traceFetch:c,traceXHR:l,shouldCreateSpanForRequest:u,enableHTTPTimings:d,_experiments:p}=n,h=r&&r.tracePropagationTargets,f=h||n.tracePropagationTargets;let g;Vs&&t&&h&&je.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used.");let m=aa.location&&aa.location.href;if(e.on&&(e.on("startNavigationSpan",(e=>{g&&(Vs&&je.log(`[Tracing] Finishing current transaction with op: ${mr(g).op}`),g.end()),g=a({op:"navigation",...e})})),e.on("startPageLoadSpan",(e=>{g&&(Vs&&je.log(`[Tracing] Finishing current transaction with op: ${mr(g).op}`),g.end()),g=a({op:"pageload",...e})}))),n.instrumentPageLoad&&e.emit&&aa.location){const t={name:aa.location.pathname,startTimestamp:xn?xn/1e3:void 0,origin:"auto.pageload.browser",attributes:{[So]:"url"}};Ii(e,t)}n.instrumentNavigation&&e.emit&&aa.location&&Vt((({to:t,from:n})=>{if(void 0===n&&m&&-1!==m.indexOf(t))m=void 0;else if(n!==t){m=void 0;const t={name:aa.location.pathname,origin:"auto.navigation.browser",attributes:{[So]:"url"}};ki(e,t)}})),i&&ia(),p.enableInteractions&&function(e,t){let n;const r=()=>{const{idleTimeout:r,finalTimeout:o,heartbeatInterval:s}=e,a="ui.action.click",i=eo();if(i&&i.op&&["navigation","pageload"].includes(i.op))return void(Vs&&je.warn(`[Tracing] Did not create ${a} transaction because a pageload or navigation transaction is in progress.`));if(n&&(n.setFinishReason("interactionInterrupted"),n.end(),n=void 0),!t.name)return void(Vs&&je.warn(`[Tracing] Did not create ${a} transaction because _latestRouteName is missing.`));const{location:c}=aa,l={name:t.name,op:a,trimEnd:!0,data:{[So]:t.context?xi(t.context):"url"}};n=Mo(Kr(),l,r,o,!0,{location:c},s)};["click"].forEach((e=>{aa.document&&addEventListener(e,r,{once:!1,capture:!0})}))}(n,s),n.enableInp&&function(e,t){const n=({entries:n})=>{const r=Rr(),o=void 0!==r&&void 0!==r.getIntegrationByName?r.getIntegrationByName("Replay"):void 0,s=void 0!==o?o.getReplayId():void 0,a=eo(),i=xr(),c=void 0!==i?i.getUser():void 0;n.forEach((n=>{if(function(e){return"duration"in e}(n)){const r=n.interactionId;if(void 0===r)return;const o=e[r],i=n.duration,l=n.startTime,u=Object.keys(e),d=u.length>0?u.reduce(((t,n)=>e[t].duration<e[n].duration?t:n)):void 0;if("first-input"===n.entryType){if(u.map((t=>e[t])).some((e=>e.duration===i&&e.startTime===l)))return}if(!r)return;if(o)o.duration=Math.max(o.duration,i);else if(u.length<Ri||void 0===d||i>e[d].duration){const n=t.name,o=t.context;n&&o&&(d&&Object.keys(e).length>=Ri&&delete e[d],e[r]={routeName:n,duration:i,parentContext:o,user:c,activeTransaction:a,replayId:s,startTime:l})}}}))};$a("event",n),$a("first-input",n)}(o,s),yi({traceFetch:c,traceXHR:l,tracePropagationTargets:f,shouldCreateSpanForRequest:u,enableHTTPTimings:d})},options:n}},defaultRequestInstrumentationOptions:mi,instrumentOutgoingRequests:yi,startBrowserTracingNavigationSpan:ki,startBrowserTracingPageLoadSpan:Ii,makeBrowserOfflineTransport:function(e){return function(e){return t=>e({...t,createStore:$f})}(hs(e))},onProfilingStartRouteTransaction:function(e){return e?ag(e)?ug(e):e:(Di&&je.log("[Profiling] Transaction is undefined, skipping profiling"),e)},BrowserProfilingIntegration:hg,browserProfilingIntegration:pg});const yg=()=>{let e=navigator.languages?navigator.languages[0].substr(0,2).toUpperCase():"EN";var t;e="EN"===(t=e)?"EN-GB":"PT"===t?"PT-PT":t;return s.map((e=>e.langCode)).includes(e)?e:"EN"},_g=()=>{const e={};return s.forEach((t=>{let n=t.langCode;["EN-GB","EN-US"].includes(n)&&(n="EN"),["PT-PT","PT-BR"].includes(n)&&(n="PT"),["ZH-HANT"].includes(n)&&(n="ZH"),e[n]=0})),e},vg=e=>e.substring(0,2).toUpperCase();const bg=e=>{let t=s.find((t=>t.langCode.toUpperCase()===e.toUpperCase()));return t||(t=s.find((t=>t.langCode.substring(0,2).toUpperCase()===e.substring(0,2).toUpperCase())),t)};function Sg(e,t){const n=["EN-US","EN-GB","PT-PT","PT-BR","ZH-HANT"].includes(e?.toUpperCase());let r,o=e?.toUpperCase();return n&&(o=e?.toUpperCase().slice(0,2),r=t||function(e){const t=e.split("-");if(2===t.length)return t[0].toLowerCase()+"-"+t[1].toUpperCase();return e}(e?.toUpperCase())),{langCode:o,regionalVariant:r}}const Tg=()=>({settingSchemeVersion:37,blacklistDomains:[],blacklistDomainsForReading:[],blacklistDomainsForWriting:[],languagesForTranslation:s.reduce(((e,t)=>({...e,[t.langCode]:c})),{}),selectedTargetLanguage:yg(),isTargetLanguageConfirmed:!1,deepLProApiKey:{IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.22.2",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.22.2",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.22.2",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.22.2",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.22.2",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.22.2",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.22.2",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.22.2",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.22.2",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.typeform.com/to/MkMfP2Y6",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://s.deepl.com/chrome/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ"},APP_VERSION:"1.22.2",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,SHOW_CUSTOMER_SEGMENTATION_SURVEY:!1,ARABIC_SURVEY:!0}}.DEEPL_PRO_API_KEY,installationId:n(),enableFullPageTranslation:!0,enableInputTranslation:!0,enableInlineTranslation:!0,languagePreferenceForWriting:_g(),languagePreferenceForReading:_g(),languagePreferenceForDeeplWrite:"EN-US",blacklistedPopupWidgets:[],successfulTranslations:0,successfulArabicTranslations:0,isReviewPopupShown:!1,shouldDisplayFeedbackPopup:!1,isInputHighlighterShown:!1,isInlineHighlighterShown:!1,regionalVariant:void 0,isSurveyLinkHidden:!1,isGlossaryEnabled:!1,activeTermbaseId:null,isZendeskOnboarded:!1,isZendeskEnabled:!0,isZendeskOnboardingShown:!1,zendeskFormality:"auto",zendeskSuccessfulTranslations:0,zendeskActiveTermbase:null,isGDocsEnabled:!0,isGDocsOnboardingShown:!1,gDocsSegmentation:G.WORD,gDocsWriteLang:null,isGmailEnabled:!0,wasGmailOnboardingShown:!1,successfulTranslationsGmail:0,wasGmailFeedbackPopupShown:!1,isGSlidesEnabled:!0,isGSlidesOnboardingShown:!1,wasGSlidesFeedbackPopupShown:!1,successfulTranslationsGSlides:0,isWhatsAppWebEnabled:!0,isTwitterEnabled:!0,customizationsActiveStates:{[R.linkedIn]:!0},hasUserSeenAccountCreationNudge:!1,hasUserSeenPostAccountCreationOnboarding:!1,hasUserSeenProCustomerSegmentationSurvey:!1}),Eg={prod:"production",dev:"development",test:"testing"};function wg(){return Eg.prod}function Ig(){return wg()===Eg.dev}const kg={dsn:"https://f7c23f019d154c319e91e8de004727dc@errortracking.deepl.com/12",release:"deepl-browser-extension@1.22.2",environment:wg(),tracesSampleRate:wg()===Eg.prod?.9:1};function Cg(e,t){t.captureException(e)}const Rg={PROTOCOL_ERROR:"PROTOCOL_ERROR",NETWORK_ERROR:"NETWORK_ERROR",FULL_PAGE_SERVER_ERROR:"FULL_PAGE_SERVER_ERROR",USER_UNAUTHORIZED:"-32003",USER_BLOCKED:"429",FORBIDDEN_REQUEST:"403",QUOTA_HAS_BEEN_REACHED:"1045601",TOO_MANY_REQUESTS:"1042902"},xg={ENTRY_NOT_FOUND:"ENTRY_NOT_FOUND",SERVER_ERROR:"SERVER_ERROR"},Ag="INSTALLATION_ERROR",Lg="TRANSLATED_INPUT_NOT_SET",Og="TRANSLATOR_FREE_ACCOUNT_LIMIT_EXCEEDED",Ng="TRANSLATOR_ANONYMOUS_LIMIT_EXCEEDED",Dg="TRANSLATOR_FREE_ANON_WITH_WRITE_PRO",Pg="WRITE_ANON_OR_FREE_LIMIT_EXCEEDED",Mg="WRITE_WITH_PRO_TRANSLATOR_LIMIT_EXCEEDED";class Fg extends Error{constructor(e){super(e),this.name=Rg.PROTOCOL_ERROR,this.message=e}}class Ug extends Error{constructor(e){super(e),this.name=Rg.FULL_PAGE_SERVER_ERROR,this.message=e}}class jg extends Error{constructor(e,t){super(t),this.name=e,this.message=t}}class Bg extends Error{constructor(e,t){super(t),this.name=Og,this.limit=e,this.message=t}}class $g extends Error{constructor(e,t){super(t),this.name=Ng,this.limit=e,this.message=t}}class Gg extends Error{constructor(e,t){super(t),this.name=Pg,this.limit=e,this.message=t}}class Wg extends Error{constructor(e,t){super(t),this.name=Mg,this.limit=e,this.message=t}}class qg extends Error{constructor(e,t){super(t),this.name=Dg,this.limit=e,this.message=t}}class Hg extends Error{constructor(e,t){super(t),this.name=e,this.message=t}}function Vg(e,t){try{Cg(e,t),console.error(e)}catch(e){console.error(e)}return{error:e.name}}function zg(){return{url:"https://s.deepl.com/chrome/statistics"}}function Yg(e){switch(e){case l.manual:return 1;case l.automatic:return 2;case l.inline:return 3;case l.input:return 4;case l.input_alternatives:return 5;default:return 0}}function Kg(e){switch(e){case xg.ENTRY_NOT_FOUND:return 1;case xg.SERVER_ERROR:return 2}}function Xg(e){switch(e){case h.defaultPopup:return f.extensionIcon;case h.fptInjectedPopup:return f.fptAutoInject;default:return 0}}function Jg(e){switch(e){case h.defaultPopup:return g.defaultPopup;case h.fptInjectedPopup:return g.injectedFptPopup;case h.inlineTooltipPopup:return g.inlinePopup;default:return 0}}function Zg(e){return e===m.hintKeyboardShortcut?1:0}function Qg(e){switch(e){case y.inputTranslationTriggerIcon:return 1;case y.inlineTranslationTriggerIcon:return 2;case y.inlineTranslationSettingPopup:return 3;case y.inputTranslationSettingPopup:return 4;case y.settingsPageFPT:return 5;case y.settingsPageReading:return 6;case y.settingsPageWriting:return 7;case y.fptHideModal:return 8;case y.inputTranslationSettingsIcon:return 9;case y.inlineTranslationSettingsIcon:return 10;case y.inputTranslationReadMoreLink:return 11;case y.inlineTranslationReadMoreLink:return 12;case y.fptTranslationReadMoreLink:return 13;case y.extensionHubToggleSwitch:return 14;case y.hubCustomizeShortcut:return 15;case y.hubLoginButton:return 16;case y.hubUpgradeToProLink:return 17;case y.hubTryProLink:return 18;case y.settingsPageCustomizeShortcutButton:return 19;case y.hubFPTEnableCheckbox:return 20;case y.hubFPTDisableCheckbox:return 21;case y.deeplWriteIcon:return 22;case y.hubViewIntegrations:return 23;case y.hubCloseCustomizationsWidget:return 24;case y.gmailOnboardingPopup:return 25;case y.gmailOnboardingIcon:return 26;case y.gmailCharLimitLogin:return 27;case y.gmailFeedbackSurvey:return 28;case y.gslidesFeedbackSurvey:return 29;case y.gslidesCharLimitLogin:return 30;case y.zendeskTryProLink:return 31;case y.settingsPageIntegrations:return 32;case y.onboardingSignUp:return 33;case y.onboardingSkipSignUp:return 34;case y.onboardingLoginLink:return 35;case y.onboardingSeeAllIntegrations:return 36;case y.inputImproveTriggerIcon:return 37;case y.iconToggleInHubTranslator:return 38;case y.iconToggleInHubWrite:return 39;case y.manageIconSettings:return 40;case y.writeLanguageSwitchedInHub:return 41;case y.writeLanguageSwitchedInSettings:return 42;default:return 0}}function em(e){return e===_.triggerTranslation?1:0}function tm(e){switch(e){case v.clickOnShortcutNotifiction:return 60011;case v.clickOnInlineTranslationShowAlternatives:return 60026;case v.clickOnInlineTranslationCloseIcon:return 60027;case v.clickOnLogoutMenuEntry:return 60028;default:return 0}}function nm(e){switch(e){case S.inputTranslation:return 1;case S.inlineTranslation:return 2;case S.fullPageTranslation:return 3;default:return 0}}function rm(e){switch(e){case b.disableEverywhere:return 1;case b.disablePerSite:return 2;case b.enableEverywhere:return 3;case b.enablePerSite:return 4;default:return 0}}function om(e){switch(e){case"top":return T.top;case"right":return T.right;case"bottom":return T.bottom;case"left":return T.left;default:return 0}}function sm(e){switch(e){case X.shortcut_settings:return J.SHORTCUT_SETTINGS;case X.support_article:return J.SUPPORT_ARTICLE;case X.external.whatsapp:return J.EXTERNAL.WHATSAPP;case X.external.twitter:return J.EXTERNAL.TWITTER;case X.external.youtube:return J.EXTERNAL.YOUTUBE;case X.external.facebook:return J.EXTERNAL.FACEBOOK;case X.external.github:return J.EXTERNAL.GITHUB;case X.external.discord:return J.EXTERNAL.DISCORD;case X.external.telegram:return J.EXTERNAL.TELEGRAM;case X.external.reddit:return J.EXTERNAL.REDDIT;case X.external.gmail:return J.EXTERNAL.GMAIL;case X.external.gdocs:return J.EXTERNAL.GDOCS;case X.external.gslides:return J.EXTERNAL.GSLIDES;case X.external.msOffice:return J.EXTERNAL.MSOFFICE;default:return""}}function am(e){switch(e){case E.openPage:return 1;case E.backButton:return 2;case E.nextButton:return 3;case E.navigation:return 4;default:return 0}}function im(e){switch(e){case I.chrome:return w.chrome;case I.edge:return w.edge;case I.firefox:return w.firefox;case I.local:return w.local;default:return w.unspecified}}function cm(e){return k[e]||0}function lm(e){switch(e){case R.default:return 1;case R.gdocs:return 2;case R.whatsappWeb:return 3;case R.twitter:return 4;case R.zendesk:return 5;case R.gmail:return 6;case R.gslides:return 7;case R.linkedIn:return 8;default:return 0}}function um(e){switch(e){case q.simple:return 1;case q.business:return 2;case q.academic:return 3;case q.casual:return 4;case q.enthusiastic:return 5;case q.friendly:return 6;case q.confident:return 7;case q.diplomatic:return 8;default:return 0}}function dm(e){switch(e){case 60026:case 60027:return!0;default:return!1}}function pm(e){switch(e){case A.user:return 1;case A.extension:return 2;default:return 0}}function hm(e){switch(e){case O.translation:return 1;case O.login:return 2;default:return 0}}function fm(e){switch(e){case N.message:return 1;case N.chat:return 2;default:return 0}}function gm(e){switch(e){case P.free:return 1;case P.pro:return 2;case P.none:return 3;default:return 0}}function mm(e){switch(e){case j.READING_VIEW_TRANSLATE:return 1;case j.COMPOSE_VIEW_TRANSLATE:return 2;case j.COMPOSE_VIEW_IMPROVE:return 3;default:return 0}}function ym(e){switch(e){case B.ANONYMOUS_USER_LIMIT_EXCEEDED:return 1;case B.FREE_ACCOUNT_LIMIT_EXCEEDED:return 2;case B.WRITE_ANONYMOUS_USER_LIMIT_EXCEEDED:return 3;case B.WRITE_FREE_ACCOUNT_LIMIT_EXCEEDED:return 4;default:return 0}}function _m(e){switch(e){case x.translate:return 1;case x.write:return 2;default:return 0}}function vm(e){switch(e){case $.LOGIN:return 1;case $.SIGNUP:return 2;case $.PRO_TRIAL:return 3;default:return 0}}function bm(e){switch(e){case G.WORD:return 1;case G.SENTENCE:return 2;default:return 0}}function Sm(e){switch(e){case W.none:return 1;case W.pro:return 2;case W.free:return 3;default:return 0}}async function Tm(e){let t,n,r,o,s,a,i,c,l,d=!1;try{const e=await Yy(["session","installationId"]);n=e.session.id,t=e.installationId}catch(e){console.error(`DAP: Failed to fetch settings. Error: ${e.message}`)}try{const e=await c_();d=!!e.accountId,r=gm(e.translatorServiceType),o=gm(e.apiServiceType),s=gm(e.docTranslatorServiceType),l=gm(e.writeServiceType),i=d?2===r||2===o||2===l||2===s?u.loggedInPro:u.loggedInFree:u.notLoggedIn,c=e.sessionType?Sm(e.sessionType):Sm(W.none)}catch(e){console.error(`DAP: Failed to fetch user information. Error: ${e.message}`)}try{a=await u_()}catch(e){console.error(e)}const p=Y(),h=await p_(),f={eventId:void 0,extensionVersion:"1.22.2",sessionId:n,sessionType:c,installationId:t,browserInstanceId:a,originStore:im(chrome.runtime.id),userInfos:{userType:i,translatorServiceType:r,apiServiceType:o,docTranslatorServiceType:s,writeServiceType:l},userAgent:p.userAgent,platform:p.platform,browser:p.browser,browserVersion:p.browserVersion,browserLang:p.browserLang,clientExperiments:h},g=e?e(f):f;return fetch("https://s.deepl.com/chrome/statistics",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(g),credentials:"omit"}).then((e=>{e.ok||console.log(`DAP ${g.eventId} request failed: ${e}`)}))}async function Em(e){return Tm((t=>({...t,eventId:60001,translationRequestData:{extensionVersion:"1.22.2",domainName:e.domainName,userId:e.installationId,translationTrigger:Yg(e.trigger),translationData:{sourceLang:e.websiteLanguage,targetLang:e.targetLanguage,sourceLength:e.characterCount},...e.translationPerformance&&{translationPerformance:e.translationPerformance},nicheIntegration:lm(e.nicheIntegration||R.default),...e.glossaryTrackingInfo&&{isGlossaryEnabled:e.glossaryTrackingInfo.isGlossaryEnabled,isGlossaryShared:e.glossaryTrackingInfo.isGlossaryShared,didGlossaryChangeTranslation:e.glossaryTrackingInfo.didGlossaryChangeTranslation}}})))}async function wm(e){return Tm((t=>({...t,eventId:60002,errorData:{extensionVersion:"1.22.2",errorCode:e.errorCode,errorMessage:e.errorMessage}})))}async function Im(e){return Tm((t=>({...t,eventId:60003,translationErrorData:{errorData:{extensionVersion:"1.22.2",errorCode:e.errorCode,errorMessage:e.errorMessage},targetLang:e.targetLang,domainName:e.domainName,websiteLanguage:e.websiteLanguage,sourceLength:e.characterCount,translationTrigger:Yg(e.trigger),nicheIntegration:lm(e.nicheIntegration||R.default)}})))}async function km(e){return Tm((t=>({...t,eventId:60004,contentScriptErrorData:{errorData:{extensionVersion:"1.22.2",errorCode:e.errorCode,errorMessage:e.errorMessage},domainName:e.domainName}})))}async function Cm(e){return Tm((t=>({...t,eventId:60005,inputInjectionData:{extensionVersion:"1.22.2",domainName:e.domainName}})))}async function Rm(e){return Tm((t=>({...t,eventId:60007,extensionOpenedData:{extensionVersion:"1.22.2",domainName:e.domainName,extensionOpenedFrom:e.extensionOpenedFrom}})))}async function xm(e){return Tm((t=>({...t,eventId:60008,logoClickedData:{extensionVersion:"1.22.2",logoClickedFrom:e.logoClickedFrom}})))}async function Am(e){return Tm((t=>({...t,eventId:60009,notificationViewedData:{extensionVersion:"1.22.2",notificationType:Zg(e.notificationType)}})))}async function Lm(e){return Tm((t=>({...t,eventId:60010,shortcutUsedData:{shortcutType:em(e.shortcutType),uiLocation:Qg(e.location),shortcut:e.shortcut,nicheIntegration:lm(e.nicheIntegration||R.default)}})))}async function Om(e){const t={eventId:tm(e.uiAction)};return dm(t.eventId)&&(t.payload={nicheIntegration:lm(e.nicheIntegration||R.default)}),Tm((e=>({...e,...t})))}async function Nm(){return Tm((e=>({...e,eventId:60012})))}async function Dm(){return Tm((e=>({...e,eventId:60013})))}async function Pm(e){return Tm((t=>({...t,eventId:60014,inlineSettingOpenedData:{uiFunction:nm(e.uiFunction),uiLocation:Qg(e.uiLocation),nicheIntegration:lm(e.nicheIntegration)}})))}async function Mm(e){return Tm((t=>({...t,eventId:60015,settingChangedData:{settingType:rm(e.settingType),uiFunction:nm(e.uiFunction),uiLocation:Qg(e.uiLocation),domainName:e.domainName}})))}async function Fm(e){return Tm((t=>({...t,eventId:60016,detectLanguageData:{domainName:e.domainName,language:e.language}})))}async function Um(e){return Tm((t=>({...t,eventId:60017,rightClickData:{domainName:e.domainName,translationType:e.translationType}})))}async function jm(e){return Tm((t=>({...t,eventId:60018,inlinePositionChangeData:{newPosition:om(e.newPosition)}})))}async function Bm(e){return Tm((t=>({...t,eventId:60019,inlineDragStartData:{nicheIntegration:lm(e?.nicheIntegration||R.default)}})))}async function $m(e){return Tm((t=>({...t,eventId:60020,whatsAppMessageTranslatedData:{messageLang:e.messageLang,targetLang:e.targetLang,messageLength:e.messageLength,translator:fm(e.translator),numberOfLanguages:e.numberOfLanguages,numberOfMessages:e.numberOfMessages}})))}async function Gm(e){return Tm((t=>({...t,eventId:60021,whatsAppMessageTranslationFailedData:{errorCode:e.errorCode,domainName:e.domainName,translationConfig:{messageLength:e.messageLength,targetLang:e.targetLang,messageLang:e.messageLang,translator:fm(e.translator),numberOfLanguages:e.numberOfLanguages,numberOfMessages:e.numberOfMessages}}})))}async function Wm(e){return Tm((t=>({...t,eventId:60057,twitterTweetTranslationFailedData:{errorCode:e.errorCode,domainName:e.domainName,translationConfig:{messageLength:e.messageLength,targetLang:e.targetLang,messageLang:e.messageLang}}})))}async function qm(e){return Tm((t=>({...t,eventId:60022,fptHideData:{hideOption:e.hideOption,sourceLang:e.sourceLang,domainName:e.domainName,uiLocation:Qg(e.uiLocation)}})))}async function Hm(e){return Tm((t=>({...t,eventId:60023,inlineCopyData:{targetLang:e.targetLang,targetLength:e.targetLength,nicheIntegration:lm(e.nicheIntegration||R.default)}})))}async function Vm(e){return Tm((t=>({...t,eventId:60024,inlineListenData:{targetLang:e.targetLang,targetLength:e.targetLength,actionType:e.actionType,nicheIntegration:lm(e.nicheIntegration||R.default)}})))}async function zm(e){return Tm((t=>({...t,eventId:60025,iconHoverData:{uiLocation:Qg(e.uiLocation),domainName:e.domainName,nicheIntegration:lm(e.nicheIntegration||R.default)}})))}async function Ym(e){return Tm((t=>({...t,eventId:60029,onboardingStepChangeData:{previousStep:e.previousStep,newStep:e.newStep,trigger:am(e.trigger),secondsOnOnboarding:e.secondsOnOnboarding,secondsOnPreviousStep:e.secondsOnPreviousStep}})))}async function Km(e){return Tm((t=>({...t,eventId:60030,onboardingOpenExternalPageData:{url:sm(e.url)}})))}async function Xm(e){return Tm((t=>({...t,eventId:60031,readMoreClickedData:{uiLocation:Qg(e.uiLocation)}})))}async function Jm(e){return Tm((t=>({...t,eventId:60032,landOnWebsiteData:{website:cm(e.website)}})))}async function Zm(e){return Tm((t=>({...t,eventId:60033,inlineListenData:{targetLang:e.targetLang,targetLength:e.targetLength,triggerType:e.triggerType,nicheIntegration:lm(e.nicheIntegration||R.default)}})))}async function Qm(e){return Tm((t=>({...t,eventId:60034,openInputHighlighterData:{domainName:e.domainName}})))}async function ey(e){return Tm((t=>({...t,eventId:60035,closeInputHighlighterData:{trigger:e.trigger}})))}async function ty(e){return Tm((t=>({...t,eventId:60036,gdocsReplaceTextData:{sourceLang:e.sourceLang,targetLang:e.targetLang,sourceLength:e.sourceLength,targetLength:e.targetLength}})))}async function ny(){return Tm((e=>({...e,eventId:60037})))}async function ry(e){return Tm((t=>({...t,eventId:60038,openInputHighlighterData:{domainName:e.domainName}})))}async function oy(e){return Tm((t=>({...t,eventId:60039,closeInputHighlighterData:{trigger:e.trigger}})))}async function sy(e){return Tm((t=>({...t,eventId:60040,dictionaryStatus:{status:e.status,langPair:e.langPair}})))}async function ay(){return Tm((e=>({...e,eventId:60041})))}async function iy(){return Tm((e=>({...e,eventId:60042})))}async function cy(e){return Tm((t=>({...t,eventId:60043,errorData:{lingueeError:Kg(e.error)}})))}async function ly(e,t){let n;switch(e){case L.OPEN_TICKET:n=60044;break;case L.DETECT_TICKET_LANGUAGE:n=60045;break;case L.SWITCH_TICKET_LANGUAGE:n=60046;break;case L.ENABLE_AUTOTRANSLATE:n=60047;break;case L.DISABLE_AUTOTRANSLATE:n=60048;break;case L.TRANSLATE_MESSAGE:n=60049;break;case L.TRANSLATE_INPUT:n=60050;break;case L.ERROR:n=60051;break;default:return}return Tm((e=>({...e,eventId:n,zendeskMetaData:{agentLanguage:t.agentLanguage,ticketLanguage:t.ticketLanguage,isTicketLanguageAutodetected:t.isTicketLanguageAutodetected,isTicketLanguageSupported:t.isTicketLanguageSupported,isAutoTranslateEnabled:t.isAutoTranslateEnabled,sourceTextLength:t.sourceTextLength,targetTextLength:t.targetTextLength,inputHasSelection:t.inputHasSelection,error:t.error}})))}async function uy(e){let t;if(e.glossaryConfigOpenedWithoutGlossaryPermissions?t=60084:e.glossaryConfigOpenedWithNoGlossariesFound&&(t=60085),t)return Tm((e=>({...e,eventId:t})))}async function dy(){return Tm((e=>({...e,eventId:60054})))}async function py(e){const t=Math.round(await a_()/60);return Tm((n=>({...n,eventId:60055,logoutData:{trigger:pm(e.trigger),minutesSinceLastLogin:t,reason:e.reason}})))}async function hy(e){return Tm((t=>({...t,eventId:60052,gdocsMaxCharExceededData:{sourceLang:e.sourceLang,targetLang:e.targetLang,sourceLength:e.sourceLength}})))}async function fy(e){return Tm((t=>({...t,eventId:60053,gdocsMaxCharExceededData:{sourceLang:e.sourceLang,targetLang:e.targetLang,sourceLength:e.sourceLength}})))}async function gy(e){return Tm((t=>({...t,eventId:60056,sessionTypeData:{sessionType:e.sessionType,trigger:hm(e.trigger)}})))}async function my(e){let t="";try{t=await n_()}catch(e){console.log(`DAP: Failed to fetch session type. Error: ${e.message}`)}return Tm((n=>({...n,eventId:60058,onboardingModalShownData:{nicheIntegration:lm(e.nicheIntegration||R.default),sessionType:t}})))}async function yy(e){return Tm((t=>({...t,eventId:60059,UILocationClickedData:{uiLocation:Qg(e)}})))}async function _y(){return Tm((e=>({...e,eventId:60060})))}async function vy(){return Tm((e=>({...e,eventId:60061})))}async function by(e,t){let n;switch(e){case M.TEXT_REFINEMENT_REQUEST:n=60062;break;case M.GDOCS_INSERT_COPY:n=60063;break;case M.GDOCS_DISCARD_COPY:n=60064;break;case M.GDOCS_CHAR_LIMIT_REACHED:n=60065;break;case M.ERROR:n=60066;break;case M.RESULT_ACCEPTED:n=60071;break;case M.RESULT_REVERTED:n=60072;break;case M.GET_ALTERNATIVES_FOR_INPUT:n=60088;break;default:return}return Tm((e=>({...e,eventId:n,deeplWriteMetaData:{lang:t.lang,sourceLength:t.sourceLength,targetLength:t.targetLength,nicheIntegration:lm(t.nicheIntegration||R.default),error:t.error,style:um(t.style)}})))}async function Sy(){if(!await t_())return;const e=await d_();return Tm((t=>({...t,eventId:60067,accountData:{accountUuid:e}})))}async function Ty(){const e=await d_();return Tm((t=>({...t,eventId:60068,accountData:{accountUuid:e}})))}async function Ey(){const e=await d_();return Tm((t=>({...t,eventId:60069,accountData:{accountUuid:e}})))}async function wy(e,t){let n;switch(e){case F.RESULT_ACCEPTED:n=60073;break;case F.RESULT_REVERTED:n=60074;break;default:return}return Tm((e=>({...e,eventId:n,translationResultActionData:{sourceLang:t.sourceLang,sourceLength:t.sourceLength,targetLength:t.targetLength,nicheIntegration:lm(t.nicheIntegration||R.default),error:t.error}})))}async function Iy(e){return Tm((t=>({...t,eventId:60070,customizationOnOffData:{nicheIntegration:lm(e.nicheIntegration||R.default),uiLocation:Qg(e.location),customizationEnabled:e.customizationEnabled}})))}async function ky(e){return Tm((t=>({...t,eventId:60075,gmailCharLimitReachedData:{gmailActionType:mm(e.type)}})))}async function Cy(e){return Tm((t=>({...t,eventId:60076,upgradeNotificationDisplayedData:{type:ym(e)}})))}async function Ry(e){return Tm((t=>({...t,eventId:60077,upgradeNotificationClosedData:{type:ym(e)}})))}async function xy(e,t){return Tm((n=>({...n,eventId:60078,upgradeNotificationActionData:{type:ym(e),action:vm(t)}})))}async function Ay(e,t){let n;switch(e){case U.ALTERNATIVES_OPENED:n=60079;break;case U.SEGMENTATION_SELECTED:n=60080;break;case U.ALTERNATIVE_SELECTED:n=80081;break;default:return}return Tm((e=>({...e,eventId:n,alternativesMetaData:{sourceLang:t.sourceLang,targetLang:t.targetLang,nicheIntegration:lm(t.nicheIntegration||R.default),contentProcessingMode:_m(t.contentProcessingMode),...t.alternativesSegmentation&&{alternativesSegmentation:bm(t.alternativesSegmentation)}}})))}async function Ly(e,t){const n=e?60082:60083;return Tm((e=>({...e,eventId:n,glossaryMetadata:{nicheIntegration:lm(t.nicheIntegration||R.default)}})))}async function Oy(e){return Tm((t=>({...t,eventId:60086,languageDetectionTextProcessingData:{detectedLanguageCode:e.lang,textLength:e.textLength,domainName:e.domainName,isReliable:e.isReliable,translationTrigger:Yg(e.trigger),nicheIntegration:lm(e.nicheIntegration||R.default)}})))}async function Ny(){return Tm((e=>({...e,eventId:60087})))}async function Dy(e){return Tm((t=>({...t,eventId:60089,alternativesMetaData:{sourceLang:e.sourceLang,targetLang:e.targetLang,numberOfAlternatives:e.numberOfAlternatives,selectedAlternativeIndex:e.selectedAlternative,nicheIntegration:lm(e.nicheIntegration||R.default),contentProcessingMode:_m(e.contentProcessingMode),...e.alternativesSegmentation&&{alternativesSegmentation:bm(e.alternativesSegmentation)}}})))}let Py;const My="dlBrowserExtension",Fy="dlCache";function Uy(){return new Promise(((e,t)=>{let n=indexedDB.open(My,1);n.onerror=function(){t("Error creating database.")},n.onsuccess=function(t){Py=t.target.result,e()},n.onupgradeneeded=function(t){Py=t.target.result,Py.objectStoreNames.contains(Fy)||Py.createObjectStore(Fy,{keyPath:"id"}),e()}}))}async function jy(e,t,n){return Py||await Uy(),new Promise(((r,o)=>{let s=Py.transaction(n,"readwrite").objectStore(n).put({id:e,data:t,meta:{createdAt:Date.now()}});s.onsuccess=function(){r()},s.onerror=function(e){o(e)}}))}async function By(e,t){return Py||await Uy(),new Promise(((n,r)=>{let o=Py.transaction(t,"readonly").objectStore(t).get(e);o.onerror=function(e){r(e)},o.onsuccess=function(){o.result?n(o.result):n(null)}}))}function $y(e){return jy("dlclientstate",e,Fy)}async function Gy(){const e=await By("dlclientstate",Fy);if(!e||!e.meta)return;return(Date.now()-e.meta.createdAt)/6e4>20?void 0:e.data}function Wy(e){return jy("dlexperiments",e,Fy)}async function qy(){try{const e=await By("dlexperiments",Fy);return e&&e.meta&&e.data?e.data:[]}catch(e){return[]}}async function Hy(){const e=await By("dlexperiments",Fy);if(!e||!e.meta)return;return(Date.now()-e.meta.createdAt)/6e4>9||!e.data||0===e.data.length?void 0:e.data}const Vy=(e,t)=>((e,t)=>{if(!e)throw new Error("No settings supplied to getServiceType");if(!Object.keys(D).includes(t))throw new Error("Unidentified service name supplied to getServiceType");if(!e.isLoggedIn)return P.free;switch(t){case D.TRANSLATOR:return e.translatorServiceType;case D.WRITE:return e.writeServiceType;case D.API:return e.apiServiceType;case D.DOC_TRANSLATOR:return e.docTranslatorServiceType}})(e,t)===P.pro,zy=e=>e.isLoggedIn&&e.hasTermbaseService;async function Yy(e){if(e.includes("session")){const e=await chrome.storage.sync.get(["session"]);e&&!e.session&&await Ky()}return new Promise(((t,n)=>{chrome.storage.sync.get(e,(r=>{r?t(r):n(`Can not get ${e}`)}))}))}async function Ky(){const e=n();await chrome.storage.sync.set({session:{id:e,timestamp:Date.now()}});try{await Sy()}catch(e){console.error(e)}}async function Xy(){const{session:e}=await Yy(["session"]);!e||(Date.now()-e.timestamp)/6e4>30?await Ky():await chrome.storage.sync.set({session:{...e,timestamp:Date.now()}})}async function Jy(e,t,n){const r=o(e);return await chrome.storage.local.set({a_t:e,r_t:t,i_t:n,isLoggedIn:!(!e||!t),isProUser:!(!r||"Pro"!==r.sessionType),sessionType:r?.sessionType}),r?.sessionType}async function Zy(){await chrome.storage.local.remove(["a_t","r_t","i_t"]),await chrome.storage.local.set({isLoggedIn:!1,isProUser:!1,sessionType:""})}async function Qy(){await chrome.storage.sync.remove(["activeTermbaseId","isGlossaryEnabled"]),await chrome.storage.sync.set({activeTermbaseId:"",isGlossaryEnabled:!1})}async function e_(){const e=await chrome.storage.local.get(["a_t","r_t","i_t"]);return{access_token:e?e.a_t:void 0,refresh_token:e?e.r_t:void 0,id_token:e?e.i_t:void 0}}async function t_(){const e=await chrome.storage.local.get(["isLoggedIn"]);return!(!e||!e.isLoggedIn)}async function n_(){const e=await chrome.storage.local.get(["sessionType"]);return e?.sessionType}async function r_(){return(await chrome.storage.sync.get(["installationId"])).installationId}async function o_(){await chrome.storage.local.set({last_login:Date.now()})}async function s_(){await chrome.storage.local.remove(["last_login"])}async function a_(){const e=await chrome.storage.local.get(["last_login"]);return e&&e.last_login?(Date.now()-e.last_login)/1e3:0}async function i_(e){const t=e.featureSet.translator.service,n=e.featureSet.write.service,r=e.featureSet.api.service,o=e.featureSet.documentTranslation.service,s=e.featureSet.glossary.termbaseService,a=e.featureSet.glossary.maxGlossaries;let i,c;e.loginState?.accountId&&(i=e.loginState.accountId),e.featureSet?.integrations?.browserExtension&&(c=e.featureSet?.integrations?.browserExtension),await chrome.storage.local.set({translatorServiceType:t,writeServiceType:n,apiServiceType:r,docTranslatorServiceType:o,accountId:i||"",featureSet:c,hasTermbaseService:s&&a>0})}async function c_(){return await chrome.storage.local.get(["isLoggedIn","isProUser","sessionType","translatorServiceType","writeServiceType","apiServiceType","docTranslatorServiceType","accountId","hasTermbaseService"])}async function l_(){await chrome.storage.local.set({browserInstanceId:n()})}async function u_(){return(await chrome.storage.local.get(["browserInstanceId"])).browserInstanceId}async function d_(){const e=await chrome.storage.local.get(["accountId","a_t","i_t"]);if(e&&e.accountId)return e.accountId;if(e&&e.a_t){const t=o(e.a_t),n=o(e.i_t);return t.sub||n.sub}}async function p_(){let e=[];try{e=await qy()}catch(e){}if(!e||0===e.length)return[];const t=e.map((e=>({id:e.id,variant:e.variant,breakout:e.breakout})));return t}async function h_(e="translatorServiceType"){const t=await c_(),n=!!t.accountId,r=t[e];return n?r===P.pro?u.loggedInPro:u.loggedInFree:u.notLoggedIn}async function f_(e="translatorServiceType"){const t=await h_(e);let n;switch(e){case"translatorServiceType":default:n=d;break;case"writeServiceType":n=p}switch(t){case u.notLoggedIn:return n.notLoggedIn;case u.loggedInFree:return n.loggedInFree;case u.loggedInPro:return;default:n.notLoggedIn}}async function g_(e){const t=await chrome.storage.local.get(["translatorServiceType","writeServiceType","apiServiceType","docTranslatorServiceType","isLoggedIn"]);return Vy(t,e)}async function m_(){return await chrome.storage.local.get(["translatorServiceType","writeServiceType","apiServiceType","docTranslatorServiceType","isLoggedIn"])}async function y_(e=!1){if(!e){let e;try{e=await Hy()}catch(e){}if(e)return e}const t=await r_();if(!t)throw new Error("Installtion ID is not valid");let n=[];try{n=await qy()}catch(e){}const r=`https://s.deepl.com/chrome/experiments/${t}`;let o;try{const e=await fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:JSON.stringify(n),credentials:"omit"});if(o=(await e.json()).client_experiments,!o)return n;try{Wy(o)}catch(e){}return o}catch(e){return n}}const __={ACCESS_DENIED:"ACCESS_DENIED",INVALID_REQUEST:"INVALID_REQUEST",INVALID_GRANT:"INVALID_GRANT",GET_TOKEN_ERROR:"GET_TOKEN_ERROR",INVALID_NONCE:"INVALID_NONCE"};class v_ extends Error{constructor(e,t){super(e),this.name=__.ACCESS_DENIED,this.message=e,this.httpStatusCode=t}}class b_ extends Error{constructor(e,t){super(e),this.name=__.INVALID_REQUEST,this.message=e,this.httpStatusCode=t}}class S_ extends Error{constructor(e,t){super(e),this.name=__.INVALID_GRANT,this.message=e,this.httpStatusCode=t}}class T_ extends Error{constructor(e,t){super(e),this.name=__.GET_TOKEN_ERROR,this.message=e,this.httpStatusCode=t}}class E_ extends Error{constructor(e){super(e),this.name=__.INVALID_NONCE,this.message=e}}function w_(e,t){const n=e.split("?")[1];if(n){var r=n.split("&");for(let e=0;e<r.length;e++){const n=r[e].split("=");if(decodeURIComponent(n[0])===t)return decodeURIComponent(n[1])}}}async function I_(e,t,n="https://test.deepl.com/oidc-login"){const o=r(),s=r(),a=await async function(e){const t=await crypto.subtle.digest("SHA-256",(new TextEncoder).encode(e));return btoa(String.fromCharCode(...new Uint8Array(t))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(s);return{url:n+"?"+new URLSearchParams([["client_id",e],["redirect_uri",t],["code_challenge",a],["code_challenge_method","S256"],["nonce",o]]),nonce:o,codeVerifier:s}}function k_(e,t){if(200!==e){if("invalid_request"===t.error)throw new b_(`dl-oidc (get tokens): invalid request - http status: ${e}`,e);if("invalid_grant"===t.error)throw new S_(`dl-oidc (get tokens): invalid grant - http status: ${e}`,e);throw new T_(`dl-oidc (get tokens): http status: ${e}`,e)}}async function C_(e,t="https://deepl.com/oidc/token"){const n=await fetch(t,{method:"POST",credentials:"omit",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:e})}),r=await n.json();return k_(n.status,r),r.access_token}async function R_(e,t,n=!1){let r=t.access_token;async function o(){return await fetch(e,{...t,headers:{...t.headers,Authorization:r?`Bearer ${r}`:"None"},...t.omitCookies&&{credentials:"omit"}})}n&&r&&(r=await C_(t.refresh_token,t.token_url));let s=await o();return 401!==s.status&&403!==s.status||(r=await C_(t.refresh_token,t.token_url),s=await o()),{response:s,accessToken:r}}function x_(e,t,n){return{jsonrpc:"2.0",method:e,params:t,id:n}}async function A_(e=!1,n=!0){if(!e){const e=await Gy();if(e)return e}const r=x_("getClientState",{v:"20180814"},t()),s=await e_(),a=n||function(e){try{const t=o(e);if(t.exp&&Date.now()/1e3<t.exp-5)return!1}catch(e){console.error("Error decoding token:",e)}return!0}(s.access_token),{response:i,accessToken:c}=await R_("https://w.deepl.com/web",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(r),access_token:s.access_token,refresh_token:s.refresh_token,token_url:"https://w.deepl.com/oidc/token",credentials:"omit"},a);await Jy(c,s.refresh_token,s.id_token);const l=(await i.json()).result;return l&&($y(l),i_(l)),l}async function L_(e=!1){const t=async()=>{const t=await I_("chromeExtension",chrome.identity.getRedirectURL(),"https://www.deepl.com/auth/login");return new Promise(((n,r)=>{chrome.identity.launchWebAuthFlow({interactive:!0,url:e?`${t.url}#error_loginfailed`:t.url},(async e=>{if(!e){const e=chrome.runtime.lastError.message;return console.error("response url undefined",e),Cg(`login - response url undefined. ${e}`,mg),/The user did not approve access/gm.test(e)||/User cancelled or denied access/gm.test(e)?n():r()}try{const r=await async function(e,t,n,r,s,a="https://deepl.com/oidc/token"){const i=w_(n,"code");if(!i){const e=w_(n,"error");if("access_denied"===e)throw new v_("dl-oidc (get tokens): access denied - undefined code",401);if("invalid_request"===e)throw new b_("dl-oidc (get tokens): invalid request - undefined code",400)}let c={client_id:e,code_verifier:s,grant_type:"authorization_code",redirect_uri:t};i&&(c.code=i);const l=await fetch(`${a}`,{method:"POST",credentials:"omit",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(c)}),u=await l.json();if(k_(l.status,u),o(u.id_token).nonce!==r)throw new E_("dl-oidc (get tokens): invalid nonce");return u}("chromeExtension",chrome.identity.getRedirectURL(),e,t.nonce,t.codeVerifier,"https://w.deepl.com/oidc/token"),s=await Jy(r.access_token,r.refresh_token,r.id_token);try{await A_(!0,!1),dy(),Ty(),s&&await gy({sessionType:s,trigger:"LOGIN"})}catch(e){console.error(e)}await o_(),n()}catch(e){console.error(e);try{wm({errorCode:e.name,errorMessage:e.message})}catch(e){console.error(e)}r(e)}}))}))};try{await t()}catch(e){L_(!0)}}async function O_(e){const t=await e_(),n=new URLSearchParams([["id_token_hint",t.id_token],["post_logout_redirect_uri",chrome.identity.getRedirectURL()]]),r=async()=>{await s_();try{await Ey()}catch(e){console.error(e)}await Zy();try{await py({trigger:e.trigger,reason:e.reason})}catch(e){console.error(e)}await A_(!0),Qy(),e.showAlert&&chrome.tabs.query({active:!0,currentWindow:!0},(function(t){chrome.tabs.sendMessage(t[0].id,{action:"dlShowAlert",payload:{error:e.reason}})}))};if(!t.id_token)return void await r();const o=`https://www.deepl.com/auth/logout?${n}`;chrome.identity.launchWebAuthFlow({url:o,interactive:!0},(()=>{r()}))}async function N_(e,t,n,r){const o=await e_(),s=await g_(D.TRANSLATOR),a=await g_(D.WRITE);let i=o&&o.access_token&&s?"https://api.deepl.com/jsonrpc?client=chrome-extension,1.22.2":"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.22.2";r&&(i=o&&o.access_token&&a?"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.22.2":"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.22.2");try{const{response:r,accessToken:s}=await R_(i,{method:"POST",headers:{"Content-Type":t},body:e,access_token:o.access_token,refresh_token:o.refresh_token,token_url:"https://w.deepl.com/oidc/token",omitCookies:!0}),a=await Jy(s,o.refresh_token,o.id_token);if(a)try{await gy({sessionType:a,trigger:"TRANSLATION"})}catch(e){console.log(e)}try{await A_(!1,!1)}catch(e){console.error(`Failed to get the client state ${e.message}`)}let c=function(e,t,n){let r;try{r=JSON.parse(e)}catch(e){throw 200===t?new Fg("JSON_RPC: Parsing of response object failed"):t>=500&&n?new Ug(`FPT failed: Http status code ${t}`):new jg(t.toString(),403===t?`Translation failed: Http status code ${t} forbidden request. re-authenticating makes no difference.`:`Translation failed: Http status code ${t}`)}if("2.0"!==r.jsonrpc||void 0!==r.result&&200!==t||void 0===r.result&&void 0===r.error)throw new Fg("JSON_RPC: missing field, wrong id, proper result without 200 status, or missing data");if(r.error){const e=r.error;if(void 0===e.code)throw new Fg('JSON_RPC: Missing field "code" in error response');throw new jg(e.code.toString(),e.message)}if(200!==t)throw new jg(t.toString(),`Http status code ${t}`);return r}(await r.text(),r.status,n);return{data:c,status:r.status}}catch(e){throw e.name!==__.ACCESS_DENIED&&e.name!==__.INVALID_REQUEST&&e.name!==__.INVALID_GRANT&&e.name!==Rg.USER_UNAUTHORIZED&&e.name!==Rg.FORBIDDEN_REQUEST||setTimeout((()=>{O_({trigger:A.extension,reason:e.name})}),5e3),e}}async function D_(e,t,n=(e=>e),r,o,s){const a=function(e,t,n){return{jsonrpc:"2.0",method:e,params:t,id:n}}(e,t,r),i=n(JSON.stringify(a),a);return(await N_(i,"application/json; charset=utf-8",o,s)).data.result}async function P_(e){let t,n={};for(const t in e.weights)e.weights[t]>0&&(n[t]=e.weights[t]);try{t=await h_()}catch(e){t=u.notLoggedIn,console.log(e)}const r=e.nicheIntegration===R.default||e.nicheIntegration===R.gmail||e.nicheIntegration===R.gslides||!e.nicheIntegration,o=await g_(D.TRANSLATOR),s=await g_(D.WRITE);if((!o||!s)&&r){const n=e.sourceTexts.reduce(((e,t)=>e+t.length),0),r=e.isWriteRequest?"writeServiceType":"translatorServiceType",a=await f_(r);if(e.isWriteRequest){if(o&&!s&&n>a)throw new Wg(a,"Char limit exceeded (Translator Pro, Write Free)");if(!s&&n>a)throw new Gg(a,"Char limit exceeded (Write Free Or Anonymous)")}else{if(t===u.loggedInFree&&s&&n>a)throw new qg(a,"Char limit exceeded (Free or Anon Translator, Write Pro)");if(t===u.loggedInFree&&n>a)throw new Bg(a,"Char limit exceeded (Translator Free)");if(t===u.notLoggedIn&&n>a)throw new $g(a,"Char limit exceeded (Translator Anon)")}}let a=e.sourceTexts;const i=["EN-US","EN-GB","PT-PT","PT-BR","ZH-HANT"].includes(e.targetLangCode?.toUpperCase());let c=e.targetLangCode?.toUpperCase();i&&(c=e.targetLangCode?.toUpperCase().slice(0,2));const l=e.isWriteRequest?e.sourceTexts.map((e=>({text:e,requestAlternatives:4}))):a.map((e=>({text:e}))),d={texts:l,...e.isHtml&&{html:"enabled"},...!e.isHtml&&{splitting:e.splitting?e.splitting:"paragraphs"},lang:{target_lang:c,source_lang_user_selected:"auto"===e.sourceLang?"auto":e.sourceLang.toUpperCase(),preference:{weight:n}},commonJobParams:{regionalVariant:e.regionalVariant&&i?e.regionalVariant:void 0,...e.isWriteRequest&&{mode:"write"},...e.formality&&{formality:e.formality}}};let p=1;const h=Date.now();a.forEach((e=>p+=(e.match(/[i]/g)||[]).length)),d.timestamp=h-h%p+p;const f=await D_("LMT_handle_texts",d,((e,t)=>e=(t.id+3)%13==0||(t.id+5)%29==0?e.replace('"method":"','"method" : "'):e.replace('"method":"','"method": "')),e.id,e.isHtml,e.isWriteRequest);return{texts:f.texts.map((e=>e.text)),sourceLang:f.lang.toUpperCase(),detectedLanguages:f.detectedLanguages}}const M_=new Map([["ZH_EN","chinese-english"],["EN_ZH","english-chinese"],["NL_EN","dutch-english"],["EN_NL","english-dutch"],["FR_EN","french-english"],["EN_FR","english-french"],["FR_DE","french-german"],["DE_FR","german-french"],["FR_PT","french-portuguese"],["PT_FR","portuguese-french"],["FR_ES","french-spanish"],["ES_FR","spanish-french"],["DE_EN","german-english"],["EN_DE","english-german"],["DE_PT","german-portuguese"],["PT_DE","portuguese-german"],["DE_ES","german-spanish"],["ES_DE","spanish-german"],["IT_EN","italian-english"],["EN_IT","english-italian"],["JA_EN","japanese-english"],["EN_JA","english-japanese"],["PL_EN","polish-english"],["EN_PL","english-polish"],["PT_EN","portuguese-english"],["EN_PT","english-portuguese"],["PT_ES","portuguese-spanish"],["ES_PT","spanish-portuguese"],["RU_EN","russian-english"],["EN_RU","english-russian"],["ES_EN","spanish-english"],["EN_ES","english-spanish"]]);async function F_(e){const t=function(e,t){const n=`${e.toUpperCase()}_${t.toUpperCase()}`;return M_.get(n)}(U_(e.sourceLang),U_(e.targetLang)),n=encodeURIComponent(e.text),r=`https://www-app.linguee.com/${t}/search?dlApp=BrowserExtension&il=${e.interfaceLang}&query=${n}`;let o=async function(e){let t;if(200!==e.status)throw 404===e.status?(console.error("Dictionary Entry not found: 404"),new Hg(xg.ENTRY_NOT_FOUND)):(console.error("Dictionary Server Error"),new Hg(xg.SERVER_ERROR));{try{t=await e.text()}catch(e){throw new Hg(xg.SERVER_ERROR)}const n=/href=["']([^"']*)["']/g;t=t.replace(n,"")}return t}(await fetch(r));return o}function U_(e){return["EN-US","EN-GB","PT-PT","PT-BR","ZH-HANT"].includes(e)?["EN-US","EN-GB"].includes(e)?"EN":["PT-PT","PT-BR"].includes(e)?"PT":["ZH-CN","ZH-HANT"].includes(e)?"ZH":e:e}function j_(e,t){const n=1e-5;return n*Math.floor((.97*e+t)/n)}const B_="PROTOCOL_ERROR",$_="FULL_PAGE_SERVER_ERROR",G_="-32003",W_="403";class q_ extends Error{constructor(e){super(e),this.name=B_,this.message=e}}class H_ extends Error{constructor(e,t){super(t),this.name=e,this.message=t}}class V_ extends Error{constructor(e){super(e),this.name=$_,this.message=e}}function z_(){let e=new Uint32Array(1);return crypto.getRandomValues(e),e[0]}function Y_(e,t){return{jsonrpc:"2.0",method:e,params:t,id:z_()}}const K_={TRANSLATE:"translate",WRITE:"write"},X_="pro",J_="LMT_split_text",Z_="LMT_handle_jobs",Q_="getTermbases";const ev=async({mode:e,texts:t,config:n,sourceLang:r="auto",queryParameter:o,textType:s,advancedMode:a})=>{const i=await rv(n,e),c=o?`${i}&method=${J_}&${o}`:`${i}&method=${J_}`,l=Y_(J_,{commonJobParams:{mode:e,...!0===a&&{advancedMode:!0}},lang:{lang_user_selected:r},texts:t,textType:s});return await nv(c,{method:"POST",headers:{"Content-Type":"application/json"},body:sv(l)},n)},tv=async({mode:e,jobs:t,sourceLang:n,targetLang:r,config:o,textType:s,formality:a,termbase:i,styleVariant:c,queryParameter:l,regionalVariant:u})=>{const d=await rv(o,e),p=l?`${d}&method=${Z_}&${l}`:`${d}&method=${Z_}`,h=Y_(Z_,{commonJobParams:{mode:e,...s&&{textType:s},...a&&{formality:a},...c&&{style_variant:c},...i&&{termbase:i},...c&&{style_variant:c},...u&&{regionalVariant:u}},lang:{source_lang_computed:n,target_lang:r},jobs:t,priority:1,timestamp:ov(t)});return await nv(p,{method:"POST",headers:{"Content-Type":"application/json"},body:sv(h)},o)},nv=async(e,t,n)=>{const r=await n.auth.getAuthTokens(),o=r?{access_token:r.access_token,refresh_token:r.refresh_token,token_url:n.auth.tokenUrl}:{},{response:s,accessToken:a}=await R_(e,{...t,...o,omitCookies:n.omitCookies});return await n.auth.setAuthTokens(a,r.refresh_token,r.id_token),await av({response:s,isHtml:!1})},rv=async({auth:e,baseUrls:t,isTermbase:n},r=void 0)=>{const o=await e.getAuthTokens(),s=r===K_.WRITE?t.write:t.translate;if(n)return t.glossary;if(!o||!o.access_token)return s.free;if(!e.getServiceLevels){const e=(e=>{try{return JSON.parse(atob(e.split(".")[1]))}catch(e){return null}})(o.access_token),t=e&&"Pro"===e.sessionType;return o.access_token&&t?s.pro:s.free}{const t=await e.getServiceLevels();switch(r){case K_.WRITE:return t.write===X_?s.pro:s.free;case K_.TRANSLATE:return t.translator===X_?s.pro:s.free;default:return s.free}}},ov=e=>{const t=e.reduce(((e,t)=>[...e,...t.sentences.map((e=>e.text))]),[]);let n=1;const r=Date.now();return t.forEach((e=>n+=(e.match(/[i]/g)||[]).length)),r-r%n+n},sv=e=>{let t=JSON.stringify(e);return t=(e.id+3)%13==0||(e.id+5)%29==0?t.replace('"method":"','"method" : "'):t.replace('"method":"','"method": "'),t},av=async({response:e,isHtml:t})=>{let n;try{if(403===e.status)throw new H_(e.status.toString(),`Translation failed: Http status code ${e.status} forbidden request. re-authenticating makes no difference.`);n=JSON.parse(await e.text())}catch(n){throw 200===e.status?new q_("JSON_RPC: Parsing of response object failed"):e.status>=500&&t?new V_(`FPT failed: Http status code ${e.status}`):new H_(e.status.toString(),`Translation failed: Http status code ${e.status}`)}if("2.0"!==n.jsonrpc||void 0!==n.result&&200!==e.status||void 0===n.result&&void 0===n.error)throw new q_("JSON_RPC: missing field, wrong id, proper result without 200 status, or missing data");if(n.error){if(void 0===n.error.code)throw new q_('JSON_RPC: Missing field "code" in error response');throw new H_(n.error.code.toString(),n.error.message)}if(200!==e.status)throw new H_(e.status.toString(),`Http status code ${e.status}`);return n},iv=K_;async function cv({texts:e,mode:t=K_.TRANSLATE,targetLang:n}){return pv((async r=>await async function({texts:e,mode:t=K_.TRANSLATE,targetLang:n,config:r}){const o=await ev({mode:t,texts:e,config:r}),s=o.result.texts[0].chunks.map(((e,n,r)=>({kind:"default",preferred_num_beams:4,raw_en_context_after:n<r.length-1&&r.length>1?[r[n+1].sentences[0].text]:[],raw_en_context_before:n>0?[r[n-1].sentences[0].text]:[],sentences:[{...e.sentences[0],id:n}],...t===K_.WRITE&&{write_variant_requests:["main","variants"]}})));return await tv({mode:t,jobs:s,sourceLang:o.result.lang.detected,targetLang:t===K_.WRITE?o.result.lang.detected:n,config:r})}({texts:e,mode:t,targetLang:n,config:r})))}const lv=async({mode:e,texts:t,sourceLang:n="auto",textType:r="plaintext",advancedMode:o})=>pv((async s=>await ev({mode:e,texts:t,sourceLang:n,config:s,textType:r,advancedMode:o}))),uv=async({mode:e,jobs:t,sourceLang:n,targetLang:r,textType:o,formality:s,termbase:a,styleVariant:i,regionalVariant:c})=>pv((async l=>await tv({mode:e,jobs:t,sourceLang:n,targetLang:r,config:l,textType:o,formality:s,termbase:a,styleVariant:i,regionalVariant:c}))),dv=async()=>pv((async e=>await(async({config:e})=>{const t=`${await rv({...e,isTermbase:!0})}&method=${Q_}`,n=Y_(Q_,{});return await nv(t,{method:"POST",headers:{"Content-Type":"application/json"},body:sv(n)},e)})({config:e}))),pv=async e=>{try{return await e(hv())}catch(e){throw e.name!==__.ACCESS_DENIED&&e.name!==__.INVALID_REQUEST&&e.name!==__.INVALID_GRANT&&e.name!==G_&&e.name!==W_||setTimeout((()=>{O_({trigger:A.extension,reason:e.name})}),5e3),e}},hv=()=>({baseUrls:{translate:{free:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.22.2",pro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.22.2"},write:{free:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.22.2",pro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.22.2"},glossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.22.2"},auth:{getAuthTokens:e_,setAuthTokens:Jy,getServiceLevels:async()=>{const e=await m_();return{translator:e.translatorServiceType,write:e.writeServiceType}},tokenUrl:"https://w.deepl.com/oidc/token"},omitCookies:!0}),fv=async e=>{let t;try{t=await h_()}catch(e){t=u.notLoggedIn,console.log(e)}const n=e.nicheIntegration===R.default||e.nicheIntegration===R.gmail||e.nicheIntegration===R.gslides||!e.nicheIntegration,r=await g_(D.TRANSLATOR),o=await g_(D.WRITE);if((!r||!o)&&n){const n=e.sourceTexts.reduce(((e,t)=>e+t.length),0),s=e.isWriteRequest?"writeServiceType":"translatorServiceType",a=await f_(s);if(e.isWriteRequest){if(r&&!o&&n>a)throw new Wg(a,"Char limit exceeded (Translator Pro, Write Free)");if(!o&&n>a)throw new Gg(a,"Char limit exceeded (Write Free Or Anonymous)")}else{if(t===u.loggedInFree&&o&&n>a)throw new qg(a,"Char limit exceeded (Free or Anon Translator, Write Pro)");if(t===u.loggedInFree&&n>a)throw new Bg(a,"Char limit exceeded (Translator Free)");if(t===u.notLoggedIn&&n>a)throw new $g(a,"Char limit exceeded (Translator Anon)")}}},gv=(e,t=[])=>{if(!e||0===t.length)return null;if(t.map((e=>e.id)).includes(e)){return t.find((t=>t.id===e))}return null},mv=e=>e.translations[0].beams.map((e=>e.sentences[0])).some((e=>e.glossary_highlights&&e.glossary_highlights.length>0)),yv=async e=>{await fv(e);const{activeTermbaseId:t,isLoggedIn:n,isGlossaryEnabled:r,hasTermbaseService:o}=await Yy(["activeTermbaseId","isLoggedIn","isGlossaryEnabled","hasTermbaseService"]),s=Sg(e.targetLangCode,e.regionalVariant),i=[],c=[],l=e.isWriteRequest?iv.WRITE:iv.TRANSLATE,u=await lv({texts:e.sourceTexts,mode:l});let d,p=u.result.lang.detected,h=!1,f=!1,g=!1;if(zy({isLoggedIn:n,hasTermbaseService:o})&&t&&!e.isWriteRequest&&r)try{const[e]=await Dv(),n=gv(t,e);if(n)for(let e of n.termDictionaries)if(e.languagePair===`${p.substr(0,2)}>${s.langCode.substr(0,2)}`.toLowerCase()){d={id:n.id,dictionaryId:e.id},h=!0,f=n.shared;break}}catch(e){console.log({e:e,message:"fetching glossaries failed"})}for(const e of u.result.texts){const t=[];for(const n of e.chunks)for(const e of n.sentences)c.push(e),t.push(c.length-1);i.push(t)}const m=c.map(((e,t)=>({kind:"default",preferred_num_beams:4,raw_en_context_after:t<c.length-1?[c[t+1].text]:[],raw_en_context_before:t>0?[c[t-1].text]:[],sentences:[{...e,id:t+1}]})));let y;"EN"===p&&s.regionalVariant&&["EN-US"].includes(s.regionalVariant.toUpperCase())&&(y=s.regionalVariant);const _={mode:l,jobs:m,sourceLang:p,targetLang:e.isWriteRequest?p:s.langCode,textType:e.textType,...e.formality&&{formality:e.formality},...d&&{termbase:d},...y&&{regionalVariant:y}};let v=(await uv(_)).result;if(g=mv(v),e.autoImproveForTranslate&&l===iv.TRANSLATE){const t=e.targetLangCode.substring(0,2).toUpperCase(),n=4;if(v.source_lang.substring(0,2).toUpperCase()===t&&function(e){try{return e.replace(/[^\p{L}]/gu,"").length}catch(t){return e.replace(/[^a-zA-Z]/g,"").length}}(e.sourceTexts.join(""))>n&&(b=t,a.includes(b?.substr(0,2).toUpperCase()))){v=(await uv({..._,mode:iv.WRITE})).result}}var b;const S=v.translations.map(((e,t)=>`${c[t].prefix}${e.beams[0].sentences[0].text}`)),T=i.map((e=>e.map((e=>S[e]))));return{processedText:T,result:v,...h&&{glossaryTrackingInfo:{isGlossaryEnabled:!!d,isGlossaryShared:f,didGlossaryChangeTranslation:g}}}};async function _v(e){const t=await Yy(["selectedTargetLanguage"]);chrome.tabs.sendMessage(e,{action:"dlTranslateInline",targetLang:t.selectedTargetLanguage})}async function vv(e){await Xy();const n=await Yy(["selectedTargetLanguage","session","installationId","regionalVariant"]),r=new Date,o={sourceLang:"auto",targetLangCode:n.selectedTargetLanguage,sessionId:n.session.id,id:t(),isHtml:!0,sourceTexts:e.payload.texts,regionalVariant:n.regionalVariant};let s,a;try{const e=await yv(o);s=e.processedText,a=e.glossaryTrackingInfo}catch(t){try{Im({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:n.selectedTargetLanguage,websiteLanguage:e.payload.sourceLang,trigger:e.payload.trigger,characterCount:e.payload.texts.reduce(((e,t)=>e+t.length),0)})}catch(e){console.log(e)}throw t}pb(e?.payload?.sourceLang,n?.selectedTargetLanguage);const i={isFirstTime:e.payload.isFirstTime,processingTimeInMs:new Date-r};try{Em({installationId:n.installationId,trigger:e.payload.trigger,websiteLanguage:e.payload.sourceLang,targetLanguage:n.selectedTargetLanguage,characterCount:e.payload.texts.reduce(((e,t)=>e+t.length),0),translationPerformance:i,domainName:e.payload.domainName,glossaryTrackingInfo:a})}catch(e){console.error(e)}const c=s.map((e=>e.join("")));return c}async function bv(e){await Xy();const n=await Yy(["selectedTargetLanguage","session","installationId","languagePreferenceForReading","regionalVariant"]),r=e.payload.nicheIntegration||R.default,o={sourceLang:e.payload.sourceLang||"auto",targetLangCode:n.selectedTargetLanguage,sessionId:n.session.id,id:t(),sourceTexts:e.payload.requests.map((e=>e.text)),weights:n.languagePreferenceForReading,splitting:"newlines",regionalVariant:n.regionalVariant,nicheIntegration:r,isWriteRequest:e.payload.isWriteRequest};let s,a,i;try{const e=await yv(o);s=e.result,a=e.processedText,i=e.glossaryTrackingInfo}catch(t){try{e.payload.isWriteRequest?by(M.ERROR,{lang:e.payload.websiteLanguage,sourceLength:e.payload.requests.reduce(((e,t)=>e+t.text.length),0),targetLength:0,nicheIntegration:r,error:t.name}):Im({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:n.selectedTargetLanguage,websiteLanguage:e.payload.websiteLanguage,trigger:e.payload.trigger,characterCount:e.payload.requests.reduce(((e,t)=>e+t.text.length),0)})}catch(e){console.log(e)}throw t}pb(s?.source_lang,n?.selectedTargetLanguage),e.payload.platformBehavior===R.gslides&&Mb();try{if(s.detectedLanguages){for(const e in s.detectedLanguages)(n.languagePreferenceForReading[e]||0===n.languagePreferenceForReading[e])&&(n.languagePreferenceForReading[e]=j_(n.languagePreferenceForReading[e],s.detectedLanguages[e]));chrome.storage.sync.set({languagePreferenceForReading:n.languagePreferenceForReading})}}catch(e){console.error(e)}try{e.payload.isWriteRequest?by(M.TEXT_REFINEMENT_REQUEST,{lang:e.payload.sourceLang,sourceLength:e.payload.requests.reduce(((e,t)=>e+t.text.length),0),targetLength:a.flat().reduce(((e,t)=>e+t.length),0),nicheIntegration:r}):Em({installationId:n.installationId,trigger:e.payload.trigger,websiteLanguage:s.source_lang,targetLanguage:n.selectedTargetLanguage,characterCount:e.payload.requests.reduce(((e,t)=>e+t.text.length),0),domainName:e.payload.domainName,nicheIntegration:r,glossaryTrackingInfo:i})}catch(e){console.error(e)}return a.map((e=>({text:e.join(""),detected_source_language:s.source_lang})))}async function Sv(e){await Xy();const n=await Yy(["targetLanguageUserInput","session","installationId","languagePreferenceForWriting","regionalVariant"]),r=e.payload.requests,o=e.payload.targetLang||n.targetLanguageUserInput,s=e.payload.platformBehavior||R.default,a={sourceLang:"auto",targetLangCode:o,sessionId:n.session.id,id:t(),sourceTexts:r.map((e=>e.text))||[],weights:n.languagePreferenceForWriting,splitting:"paragraphs",textType:"richtext",regionalVariant:n.regionalVariant,nicheIntegration:s,...e.payload.isHtml&&{isHtml:e.payload.isHtml},...e.payload.formality&&{formality:e.payload.formality},...e.payload.isWriteRequest&&{isWriteRequest:e.payload.isWriteRequest}};let i,c,u;try{const e=await yv(a);i=e.result,c=e.processedText,u=e.glossaryTrackingInfo}catch(t){try{e.payload.isWriteRequest?by(M.ERROR,{lang:e.payload.source_lang,sourceLength:r.reduce(((e,t)=>e+t.text.length),0),targetLength:0,nicheIntegration:s,error:t.name}):Im({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:o,websiteLanguage:e.payload.websiteLanguage,trigger:l.input,characterCount:r.reduce(((e,t)=>e+t.text.length),0)})}catch(e){console.log(e)}throw t}pb(i?.source_lang,o),e.payload.platformBehavior===R.gmail?Db():e.payload.platformBehavior===R.gslides&&Mb();try{if(i.detectedLanguages){for(const e in i.detectedLanguages)(n.languagePreferenceForWriting[e]||0===n.languagePreferenceForWriting[e])&&(n.languagePreferenceForWriting[e]=j_(n.languagePreferenceForWriting[e],i.detectedLanguages[e]));chrome.storage.sync.set({languagePreferenceForWriting:n.languagePreferenceForWriting})}}catch(e){console.error(e)}if(!0!==e.payload.skipDapReporting)try{e.payload.isWriteRequest?by(M.TEXT_REFINEMENT_REQUEST,{lang:e.payload.source_lang,sourceLength:r.reduce(((e,t)=>e+t.text.length),0),targetLength:c.flat().reduce(((e,t)=>e+t.length),0),nicheIntegration:s}):Em({installationId:n.installationId,trigger:l.input,websiteLanguage:i.sourceLang,targetLanguage:o,characterCount:r.reduce(((e,t)=>e+t.text.length),0),domainName:e.payload.domainName,nicheIntegration:s,glossaryTrackingInfo:u})}catch(e){console.error(e)}return[{detected_source_language:i.source_lang,text:c.flat().join(""),texts:c.map((e=>e.join("")))}]}async function Tv(e){await Xy();const t=await Yy(["session","installationId","languagePreferenceForWriting","regionalVariant","zendeskActiveTermbase"]),n=e.payload.texts,r=e.payload.targetLang,o=R.zendesk,s=iv.TRANSLATE,a=e.payload.formality;let i,c;const u=[],d=[];let p;try{const e=await lv({texts:n,mode:s});let o;if(c=e.result.lang.detected,t.zendeskActiveTermbase&&t.zendeskActiveTermbase.termDictionaries)for(let e of t.zendeskActiveTermbase.termDictionaries)if(e.languagePair===`${c.substr(0,2)}>${r.substr(0,2)}`.toLowerCase()){o={id:t.zendeskActiveTermbase.id,dictionaryId:e.id},p=!0;break}for(const t of e.result.texts){const e=[];for(const n of t.chunks)for(const t of n.sentences)d.push(t),e.push(d.length-1);u.push(e)}const l=d.map(((e,t)=>({kind:"default",preferred_num_beams:4,raw_en_context_after:t<d.length-1?[d[t+1].text]:[],raw_en_context_before:t>0?[d[t-1].text]:[],sentences:[{...e,id:t+1}]})));i=await uv({mode:s,jobs:l,sourceLang:c,targetLang:r.substr(0,2),textType:"plaintext",...a&&{formality:a},...o&&{termbase:o}})}catch(t){try{Im({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:r,websiteLanguage:e.payload.websiteLanguage,trigger:l.input,characterCount:n.reduce(((e,t)=>e+t.text.length),0)})}catch(e){console.log(e)}throw t}const h=i.result.translations.map(((e,t)=>`${d[t].prefix}${e.beams[0].sentences[0].text}`)),f=u.map((e=>e.map((e=>h[e]))));if(pb(c,r),db(),!0!==e.payload.skipDapReporting)try{Em({installationId:t.installationId,trigger:l.input,websiteLanguage:c,targetLanguage:r,characterCount:n.reduce(((e,t)=>e+t.length),0),domainName:e.payload.domainName,nicheIntegration:o,isGlossaryEnabled:p})}catch(e){console.error(e)}return[{detected_source_language:c,text:f[0],texts:f}]}async function Ev(e){await Xy();const n=await Yy(["targetLanguage","session","installationId","regionalVariant"]),r=e.payload.requests,o=e.payload.sourceLang,s=e.payload.targetLang||n.targetLanguage,a=R.gmail,i={sourceLang:o||"auto",targetLangCode:s,sessionId:n.session.id,id:t(),sourceTexts:r.map((e=>e.text))||[],splitting:"newlines",regionalVariant:n.regionalVariant};let c,u,d;try{const e=await yv(i);c=e.result,u=e.processedText,d=e.glossaryTrackingInfo}catch(t){try{Im({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:s,trigger:l.input,characterCount:r.reduce(((e,t)=>e+t.text.length),0)})}catch(e){console.log(e)}throw t}pb(c?.source_lang,s),Db();try{Em({installationId:n.installationId,trigger:l.manual,websiteLanguage:c.source_lang,targetLanguage:s,characterCount:r.reduce(((e,t)=>e+t.text.length),0),domainName:e.payload.domainName,nicheIntegration:a,glossaryTrackingInfo:d})}catch(e){console.error(e)}return[{detected_source_language:c.source_lang,text:u.flat().join(""),texts:u.map((e=>e.join("")))}]}async function wv(e){await Xy();const n=await Yy(["selectedTargetLanguage","session","installationId","regionalVariant"]),r=e.payload.message,o={sourceLang:"auto",targetLangCode:n.selectedTargetLanguage,sessionId:n.session.id,id:t(),sourceTexts:[r],splitting:"paragraphs",regionalVariant:n.regionalVariant};let s,a,i;try{const e=await yv(o);s=e.result,a=e.processedText,i=e.glossaryTrackingInfo}catch(t){try{Wm({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:n.selectedTargetLanguage,messageLang:e.payload.messageLang,messageLength:r.length})}catch(e){console.log(e)}throw t}pb(s?.source_lang,n?.selectedTargetLanguage);try{Em({installationId:n.installationId,trigger:e.payload.trigger,websiteLanguage:e.payload.messageLang,targetLanguage:n.selectedTargetLanguage,characterCount:r.length,domainName:e.payload.domainName,nicheIntegration:R.twitter,glossaryTrackingInfo:i})}catch(e){console.error(e)}return a.map((e=>({text:e.join(""),detected_source_language:s.source_lang})))}async function Iv(e){await Xy();const n=await Yy(["selectedTargetLanguage","session","installationId","regionalVariant"]),r=e.payload.message,o={sourceLang:"auto",targetLangCode:n.selectedTargetLanguage,sessionId:n.session.id,id:t(),sourceTexts:[r],splitting:"paragraphs",regionalVariant:n.regionalVariant};let s,a,i;try{const e=await yv(o);s=e.result,a=e.processedText,i=e.glossaryTrackingInfo}catch(t){try{Im({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:n.selectedTargetLanguage,websiteLanguage:e.payload.messageLang,characterCount:r.length,trigger:e.payload.trigger,nicheIntegration:R.linkedIn})}catch(e){console.log(e)}throw t}pb(s?.source_lang,n?.selectedTargetLanguage);try{Em({installationId:n.installationId,trigger:e.payload.trigger,websiteLanguage:e.payload.messageLang,targetLanguage:n.selectedTargetLanguage,characterCount:r.length,domainName:e.payload.domainName,nicheIntegration:R.linkedIn,glossaryTrackingInfo:i})}catch(e){console.error(e)}return a.map((e=>({text:e.join(""),detected_source_language:s.source_lang})))}async function kv(e){await Xy();const n=await Yy(["selectedTargetLanguage","session","installationId","regionalVariant"]),r=e.payload.message,o={sourceLang:"auto",targetLangCode:n.selectedTargetLanguage,sessionId:n.session.id,id:t(),sourceTexts:[r],splitting:"paragraphs",regionalVariant:n.regionalVariant};let s,a,i;try{const e=await yv(o);s=e.result,a=e.processedText,i=e.glossaryTrackingInfo}catch(t){try{Gm({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:n.selectedTargetLanguage,messageLang:e.payload.messageLang,messageLength:r.length,numberOfLanguages:1,numberOfMessages:1,translator:N.message})}catch(e){console.log(e)}throw t}pb(s?.sourceLang,n?.selectedTargetLanguage);try{$m({messageLang:e.payload.messageLang,targetLang:n.selectedTargetLanguage,messageLength:r.length,numberOfLanguages:1,numberOfMessages:1,translator:N.message}),Em({installationId:n.installationId,trigger:e.payload.trigger,websiteLanguage:e.payload.messageLang,targetLanguage:n.selectedTargetLanguage,characterCount:r.length,domainName:e.payload.domainName,nicheIntegration:R.whatsappWeb,glossaryTrackingInfo:i})}catch(e){console.error(e)}return a.map((e=>({text:e.join(""),detected_source_language:s.source_lang})))}async function Cv(e){await Xy();const n=await Yy(["selectedTargetLanguage","session","installationId","regionalVariant"]),r=e.payload.messages,o={sourceLang:"auto",targetLangCode:n.selectedTargetLanguage,sessionId:n.session.id,id:t(),sourceTexts:r,splitting:"paragraphs",regionalVariant:n.regionalVariant};let s;try{s=await P_(o)}catch(t){try{Gm({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:n.selectedTargetLanguage,messageLang:e.payload.messageLang,messageLength:r.reduce(((e,t)=>e+t.length),0),numberOfLanguages:e.payload.detectedLanguages?.length,numberOfMessages:r.length,translator:N.chat})}catch(e){console.log(e)}throw t}pb(s?.sourceLang,n?.selectedTargetLanguage);try{$m({messageLang:e.payload.messageLang,targetLang:n.selectedTargetLanguage,messageLength:r.reduce(((e,t)=>e+t.length),0),numberOfLanguages:e.payload.detectedLanguages?.length,numberOfMessages:r.length,translator:N.chat}),Em({installationId:n.installationId,trigger:e.payload.trigger,websiteLanguage:e.payload.messageLang,targetLanguage:n.selectedTargetLanguage,characterCount:r.reduce(((e,t)=>e+t.length),0),domainName:e.payload.domainName,nicheIntegration:R.whatsappWeb})}catch(e){console.error(e)}return[{detected_source_language:s.sourceLang,texts:s.texts}]}async function Rv(e){const{texts:t,mode:n}=e.payload;return await lv({texts:t,mode:n})}async function xv(e){await Xy();const t=await Yy(["session","installationId","regionalVariant","activeTermbaseId","isGlossaryEnabled","isLoggedIn","hasTermbaseService"]),{mode:n,sentences:r,sourceLang:o,targetLang:s,domain:a}=e.payload,c=n===iv.WRITE;let l;try{l=await Zb({isLoggedIn:t.isLoggedIn,activeTermbaseId:t.activeTermbaseId,isGlossaryEnabled:t.isGlossaryEnabled,hasTermbaseService:t.hasTermbaseService,sourceLang:o,targetLang:s,mode:n})}catch(e){console.error(e)}let u=4;c&&(i.includes(o)&&(u=1),await chrome.storage.sync.set({gdocsWriteLang:o}));const d=r.map(((e,t)=>({kind:"default",preferred_num_beams:u,raw_en_context_after:t<r.length-1?[r[t+1].text]:[],raw_en_context_before:t>0?[r[t-1].text]:[],sentences:[{...e,id:t+1}],...n===iv.WRITE&&{write_variant_requests:["main"]}}))),p=new Date,h=await uv({mode:n,jobs:d,sourceLang:o,targetLang:s,...l&&{termbase:l}});try{n===iv.TRANSLATE&&Em({installationId:t.installationId,trigger:e.payload.trigger,websiteLanguage:e.payload.sourceLang,targetLanguage:s,characterCount:r.map((e=>e.text)).reduce(((e,t)=>e+t.length),0),translationPerformance:{isFirstTime:!1,processingTimeInMs:new Date-p},domainName:a,nicheIntegration:R.gdocs})}catch(e){console.error(e)}return h}async function Av(e){const{mode:t,sourceLang:n,targetLang:r,sentence:o,contextBefore:s,contextAfter:a}=e.payload,i=[{kind:"default",preferred_num_beams:4,raw_en_context_after:a?[a]:[],raw_en_context_before:s?[s]:[],sentences:[{...o,partial_translation:"",id:0}],...t===iv.WRITE&&{write_variant_requests:["main","variants"]}}];return await uv({mode:t,jobs:i,sourceLang:n,targetLang:r})}async function Lv(e){const{mode:t,sourceLang:n,targetLang:r,sentence:o,contextBefore:s,contextAfter:a,partialTranslation:i}=e.payload,c=[{kind:"alternatives_at_position",raw_en_context_after:a?[a]:[],raw_en_context_before:s?[s]:[],sentences:[{...o,partial_translation:i,id:0}],...t===iv.WRITE&&{write_variant_requests:["main"]}}];return await uv({mode:t,jobs:c,sourceLang:n,targetLang:r})}async function Ov(e){const{mode:t,sourceLang:n,targetLang:r,sentence:o,contextBefore:s,contextAfter:a,partialTranslation:c}=e.payload;let l=4;t===iv.WRITE&&i.includes(n)&&(l=1);const u=[{kind:"default",raw_en_context_after:a?[a]:[],raw_en_context_before:s?[s]:[],preferred_num_beams:l,sentences:[{...o,partial_translation:c,id:0}],...t===iv.WRITE&&{write_variant_requests:["main"]}}];return await uv({mode:t,jobs:u,sourceLang:n,targetLang:r})}async function Nv(e){await Xy();const t=await Yy(["session","installationId","regionalVariant","zendeskActiveTermbase"]),n=iv.TRANSLATE,r=R.zendesk,{targetLang:o}=e.payload,s=[e.payload.text],a=s.map((e=>e.replaceAll("\n","<br>"))),i=[],c=[];let u,d,p,h;try{const e=await lv({texts:a,mode:n,textType:"richtext"});if(h=e.result.lang.detected,t.zendeskActiveTermbase&&t.zendeskActiveTermbase.termDictionaries)for(let e of t.zendeskActiveTermbase.termDictionaries)if(e.languagePair===`${h.substr(0,2)}>${o.substr(0,2)}`.toLowerCase()){u={id:t.zendeskActiveTermbase.id,dictionaryId:e.id},d=!0;break}for(const t of e.result.texts){const e=[];for(const n of t.chunks)for(const t of n.sentences)c.push(t),e.push(c.length-1);i.push(e)}const r=c.map(((e,t)=>({kind:"default",preferred_num_beams:4,raw_en_context_after:t<c.length-1?[c[t+1].text]:[],raw_en_context_before:t>0?[c[t-1].text]:[],sentences:[{...e,id:t+1}]})));p=await uv({mode:n,jobs:r,sourceLang:h,targetLang:o.substr(0,2),textType:"richtext",...u&&{termbase:u}})}catch(t){try{Im({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:o,websiteLanguage:e.payload.websiteLanguage,trigger:l.inline,characterCount:s.reduce(((e,t)=>e+t.text.length),0)})}catch(e){console.log(e)}throw t}pb(h,o),db();const f=p.result.translations.map(((e,t)=>`${c[t].prefix}${e.beams[0].sentences[0].text}`)),g=i.map((e=>e.map((e=>f[e])))),m=g[0].join("");try{Em({installationId:t.installationId,trigger:l.input,websiteLanguage:h,targetLanguage:o,characterCount:s.reduce(((e,t)=>e+t.length),0),domainName:e.payload.domainName,nicheIntegration:r,isGlossaryEnabled:d})}catch(e){console.error(e)}return m}async function Dv(){let e,t,n="";try{e=await ob()}catch(e){t=e.message}if(!e||!e.isLoggedIn||t)return[[],t];try{n=(await dv()).result||[]}catch(e){t=e.message}return[n,t]}async function Pv(e){try{Fm({language:e.payload.language,domainName:e.payload.domainName})}catch(e){console.error(e)}}async function Mv(e){try{Cm({domainName:e})}catch(e){console.error(e)}}async function Fv(e){try{Rm({domainName:e.domainName,extensionOpenedFrom:Xg(e.extensionContext)})}catch(e){console.error(e)}}async function Uv(e){try{xm({logoClickedFrom:Jg(e.extensionContext)})}catch(e){console.error(e)}}async function jv(){try{Nm()}catch(e){console.error(e)}}async function Bv(){try{Dm()}catch(e){console.error(e)}}async function $v(e){try{Pm({uiFunction:e.uiFunction,uiLocation:e.uiLocation,nicheIntegration:e.nicheIntegration||R.default})}catch(e){console.error(e)}}async function Gv(e){try{Mm({settingType:e.settingType,newValue:e.newValue,uiFunction:e.uiFunction,uiLocation:e.uiLocation,domainName:e.domainName})}catch(e){console.error(e)}}async function Wv(e){try{Um({translationType:e.translationType,domainName:e.domainName})}catch(e){console.error(e)}}async function qv(e){try{jm({newPosition:e.newPosition})}catch(e){console.error(e)}}async function Hv(e){try{Bm(e)}catch(e){console.error(e)}}async function Vv(e){try{qm(e)}catch(e){console.error(e)}}async function zv(e){try{zm(e)}catch(e){console.error(e)}}async function Yv(e){try{Hm(e)}catch(e){console.error(e)}}async function Kv(e){try{Ym(e)}catch(e){console.error(e)}}async function Xv(e){try{Vm(e)}catch(e){console.error(e)}}async function Jv(e){try{Zm(e)}catch(e){console.error(e)}}async function Zv(e){try{Km(e)}catch(e){console.error(e)}}async function Qv(e){try{Xm(e)}catch(e){console.error(e)}}async function eb(e){try{ty(e)}catch(e){console.error(e)}}async function tb(e=!1){const t=await y_(e);return chrome.runtime.sendMessage({action:"dlExperimentsUpdated",payload:{experiments:[...t]}}),t}async function nb(){L_()}async function rb(){O_({trigger:A.user})}async function ob(){const e=await c_();return{isLoggedIn:e.isLoggedIn,translatorServiceType:e.translatorServiceType,writeServiceType:e.writeServiceType,hasTermbaseService:e.hasTermbaseService}}async function sb(e){switch(e.type){case m.hintKeyboardShortcut:{const e=await chrome.storage.sync.get(["notificationsViewed"]);if(e.notificationsViewed&&e.notificationsViewed.hintKeyboardShortcut)return;await chrome.storage.sync.set({notificationsViewed:{...e.notificationsViewed,hintKeyboardShortcut:!0}});break}}try{Am({notificationType:e.type})}catch(e){console.error(e)}const t=await chrome.tabs.query({active:!0,currentWindow:!0});chrome.tabs.sendMessage(t[0].id,{action:"dlShowNotification",payload:e})}async function ab(){return await chrome.commands.getAll()}async function ib(e){const t=await ab();try{Lm({shortcutType:e.shortcutType,location:e.location,shortcut:t.filter((t=>t.name===e.shortcutType))[0].shortcut,nicheIntegration:e.nicheIntegration||R.default})}catch(e){console.error(e)}}async function cb(e){Om({uiAction:e.uiAction,nicheIntegration:e.nicheIntegration||R.default})}function lb(e){chrome.tabs.query({active:!0,currentWindow:!0},(function(t){chrome.tabs.sendMessage(t[0].id,{action:"dlTranslateSelectionRightClick",payload:e})}))}async function ub(e){try{Jm(e)}catch(e){console.error(e)}}async function db(){const e=(await chrome.storage.sync.get(["zendeskSuccessfulTranslations"])).zendeskSuccessfulTranslations+1;await chrome.storage.sync.set({zendeskSuccessfulTranslations:e})}async function pb(e,t){const n=await chrome.storage.sync.get(["isReviewPopupShown","successfulTranslations","hasUserSeenProCustomerSegmentationSurvey","hasUserSeenArabicSurvey","successfulArabicTranslations"]),r=await ob();Vy(r,D.TRANSLATOR);const o=n.successfulTranslations+1;n.hasUserSeenProCustomerSegmentationSurvey;let s=n.isReviewPopupShown,a=n.hasUserSeenArabicSurvey,i=n.successfulArabicTranslations;if("AR"!==e&&"AR"!==t||(i+=1),!a&&"ar"===chrome.i18n.getUILanguage()&&o>=10){const e=await chrome.tabs.query({active:!0,currentWindow:!0});return chrome.tabs.sendMessage(e[0].id,{action:"dlShowArabicSurveyPopup"}),void await chrome.storage.sync.set({hasUserSeenArabicSurvey:!0,successfulArabicTranslations:i,successfulTranslations:o})}if(!a&&i>=10){const e=await chrome.tabs.query({active:!0,currentWindow:!0});return chrome.tabs.sendMessage(e[0].id,{action:"dlShowArabicSurveyPopup"}),void await chrome.storage.sync.set({hasUserSeenArabicSurvey:!0,successfulArabicTranslations:i,successfulTranslations:o})}if(!s&&o>=C){const e=await chrome.tabs.query({active:!0,currentWindow:!0});chrome.tabs.sendMessage(e[0].id,{action:"dlShowAskForAReviewPopup"}),s=!0}await chrome.storage.sync.set({isReviewPopupShown:s,successfulArabicTranslations:i,successfulTranslations:o})}async function hb(e,t){let n=bg(e.lang);if(K())await function(e,t,n){const r=new SpeechSynthesisUtterance(e);r.lang=t,r.onend=function(){n()},speechSynthesis.speak(r)}(e.text,n.langCodeForSpeech,(()=>{chrome.tabs.sendMessage(t,{action:"dlVoiceOverStopped"})}));else{const r={lang:n.langCodeForSpeech,onEvent:function(e){"end"===e.type&&chrome.tabs.sendMessage(t,{action:"dlVoiceOverStopped"}),"error"==e.type&&chrome.tabs.sendMessage(t,{action:"dlVoiceOverErrorOccurred"})}};(function(){const e=navigator?.userAgentData?.platform||navigator?.platform||void 0;return e&&-1!==e?.toUpperCase().indexOf("MAC")})()&&(r.rate=.9,n.voice&&I.chrome===chrome.runtime.id&&(r.voiceName=n.voice)),await chrome.tts.speak(e.text,r)}}async function fb(){let e;return e=K()?await new Promise(((e,t)=>{if("speechSynthesis"in window){const t=speechSynthesis.getVoices();t.length>0?e(t):speechSynthesis.onvoiceschanged=()=>{const t=speechSynthesis.getVoices();e(t)}}else t(new Error("SpeechSynthesis not supported"))})):await chrome.tts.getVoices(),e.map((e=>vg(e.lang)))}async function gb(){if(!K())return chrome.tts.stop();speechSynthesis.cancel()}async function mb(e){try{Qm(e)}catch(e){console.error(e)}}async function yb(e){try{ry(e)}catch(e){console.error(e)}}async function _b(e){try{ey(e)}catch(e){console.error(e)}}async function vb(e){try{oy(e)}catch(e){console.error(e)}}async function bb(e){return await F_(e)}async function Sb(e){try{sy(e)}catch(e){console.error(e)}}async function Tb(e){try{ay()}catch(e){console.error(e)}}async function Eb(e){try{iy()}catch(e){console.error(e)}}async function wb({eventType:e,zendeskMetaData:t}){try{ly(e,t)}catch(e){console.error(e)}}async function Ib(e){try{cy(e)}catch(e){console.error(e)}}async function kb(e){try{hy(e)}catch(e){console.error(e)}}async function Cb(e){try{fy(e)}catch(e){console.error(e)}}async function Rb(e){try{my(e)}catch(e){console.error(e)}}async function xb(e){try{yy(e)}catch(e){console.error(e)}}async function Ab({eventType:e,deeplWriteMetaData:t}){try{by(e,t)}catch(e){console.error(e)}}async function Lb(e){try{await Xy();const n=await Yy(["selectedTargetLanguage","session"]),r=e.payload.requests,o={sourceLang:e.payload?.sourceLang?e.payload.sourceLang:"auto",targetLangCode:n.selectedTargetLanguage,sessionId:n.session.id,id:t(),sourceTexts:r.map((e=>e.text))||[],isWriteRequest:!0,...e.payload.isHtml&&{isHtml:!0}},s=await yv(o),a=s.result,i=s.processedText;if(!e.payload.skipDapReporting)try{by(M.TEXT_REFINEMENT_REQUEST,{lang:a.source_lang,sourceLength:e.payload.requests.reduce(((e,t)=>e+t.text.length),0),targetLength:i.flat().reduce(((e,t)=>e+t.length),0),nicheIntegration:e.payload.nicheIntegration||R.default})}catch(e){console.error(e)}return[{detected_source_language:a.source_lang,text:i.flat().join(""),texts:i.map((e=>e.join("")))}]}catch(t){try{by(M.ERROR,{lang:e.payload.sourceLang,sourceLength:e.payload.requests.reduce(((e,t)=>e+t.text.length),0),targetLength:void 0,nicheIntegration:e.payload.nicheIntegration||R.default,error:t.name})}catch(e){console.error(e)}throw t}}async function Ob({eventType:e,acceptOrRevertMetadata:t}){try{wy(e,t)}catch(e){console.error(e)}}async function Nb(e){try{Iy(e)}catch(e){console.error(e)}}async function Db(){const e=await chrome.storage.sync.get(["wasGmailFeedbackPopupShown","successfulTranslationsGmail"]),t=e.successfulTranslationsGmail+1;let n=e.wasGmailFeedbackPopupShown;if(!n&&t>=10){const e=await chrome.tabs.query({active:!0,currentWindow:!0});chrome.tabs.sendMessage(e[0].id,{action:"dlShowGmailFeedbackPopup"}),n=!0}await chrome.storage.sync.set({wasGmailFeedbackPopupShown:n,successfulTranslationsGmail:t})}async function Pb(e){try{ky(e)}catch(e){console.error(e)}}async function Mb(){const e=await chrome.storage.sync.get(["wasGSlidesFeedbackPopupShown","successfulTranslationsGSlides"]),t=e.successfulTranslationsGSlides+1;let n=e.wasGSlidesFeedbackPopupShown;if(!n&&t>=10){const e=await chrome.tabs.query({active:!0,currentWindow:!0});chrome.tabs.sendMessage(e[0].id,{action:"dlShowSlidesFeedbackPopup"}),n=!0}await chrome.storage.sync.set({wasGSlidesFeedbackPopupShown:n,successfulTranslationsGSlides:t})}async function Fb({eventType:e,alternativesMetaData:t}){try{Ay(e,t)}catch(e){console.error(e)}}async function Ub(e=!1,t=!0){let n;try{n=await A_(e,t)}catch(e){throw e.name===__.INVALID_GRANT&&O_({trigger:A.extension,reason:e.name,showAlert:!0}),e}return n}async function jb(){return await f_()}function Bb(e){try{Cy(e)}catch(e){console.error(e)}}function $b(e){try{Ry(e)}catch(e){console.error(e)}}function Gb(e){try{uy(e)}catch(e){console.error(e)}}function Wb(e){try{Ly(!0,e)}catch(e){console.error(e)}}function qb(e){try{Ly(!1,e)}catch(e){console.error(e)}}function Hb(e,t){try{xy(e,t)}catch(e){console.error(e)}}async function Vb({text:e}){return await cv({texts:[e],targetLang:"EN",mode:iv.WRITE})}function zb(e){Oy(e)}function Yb(){Ny()}function Kb(e){Dy(e)}async function Xb(e){await Xy();const t=e.payload.texts,n=iv.TRANSLATE;let r;const o=[],s=[],a=await lv({texts:t,mode:n});r=a.result.lang.detected;for(const e of a.result.texts){const t=[];for(const n of e.chunks)for(const e of n.sentences)s.push(e),t.push(s.length-1);o.push(t)}return{detected_source_language:r,sentences:s,textLinesComponents:o}}async function Jb(e){await Xy();const t=await Yy(["activeTermbaseId","targetLanguageUserInput","session","installationId","languagePreferenceForWriting","regionalVariant","isLoggedIn","isGlossaryEnabled","hasTermbaseService"]),n=e.payload.texts,r=e.payload.mode?e.payload.mode:iv.TRANSLATE,o=e.payload.targetLang,s=e.payload.writeLang,a=Sg(o,t.regionalVariant);let i;const c=[],u=[];let d,p,h=!1,f=!1,g=!1;try{const l=await lv({texts:n,mode:r,advancedMode:!!e.payload.style});if(i=l.result.lang.detected,zy({isLoggedIn:t.isLoggedIn,hasTermbaseService:t.hasTermbaseService})&&t.activeTermbaseId&&r!==iv.WRITE&&t.isGlossaryEnabled)try{const[e]=await Dv(),n=gv(t.activeTermbaseId,e);if(n)for(let e of n.termDictionaries)if(e.languagePair===`${i.substr(0,2)}>${a.langCode.substr(0,2)}`.toLowerCase()){p={id:n.id,dictionaryId:e.id},h=!0,f=n.shared;break}}catch(e){console.log({e:e,message:"fetching glossaries failed"})}for(const e of l.result.texts){const t=[];for(const n of e.chunks)for(const e of n.sentences)u.push(e),t.push(u.length-1);c.push(t)}const g=u.map(((t,n)=>({kind:"default",preferred_num_beams:6,raw_en_context_after:n<u.length-1?[u[n+1].text]:[],raw_en_context_before:n>0?[u[n-1].text]:[],sentences:[{...t,id:n+1}],...e.payload.style&&{style_variant:e.payload.style,write_variant_requests:["main","variants"]},...e.payload.formality&&{formality:e.payload.formality}}))),m=a.regionalVariant&&!s;d=await uv({mode:r,jobs:g,sourceLang:s&&r===iv.WRITE?s.substr(0,2):i,targetLang:s&&r===iv.WRITE?s.substr(0,2):o.substr(0,2),textType:"plaintext",styleVariant:e.payload.style,...p&&{termbase:p},...m&&{regionalVariant:a.regionalVariant}})}catch(t){throw r===iv.WRITE?by(M.ERROR,{lang:i,sourceLength:n.reduce(((e,t)=>e+t.length),0),targetLength:0,nicheIntegration:R.default,error:t.name,style:e.payload.style}):Im({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:o,websiteLanguage:i,trigger:l.input_alternatives,characterCount:n.reduce(((e,t)=>e+t.length),0)}),t}g=!!h&&mv(d.result),pb(i,o);const m=d.result.translations,y=d.result.translations.map(((e,t)=>`${u[t].prefix}${e.beams[0].sentences[0].text}`)),_=function(e,t){let n=e[0].beams.length;e.forEach((e=>{e.beams.length<n&&(n=e.beams.length)}));const r=[];for(let o=0;o<n;o++){let n=[];for(let r=0;r<e.length;r++){const s=`${t[r].prefix}`;n.push(`${s}${e[r].beams[o].sentences[0].text}`)}r.push(n)}return r}(m,u),v=c.map((e=>e.map((e=>y[e])))),b=_.map((e=>c.map((t=>t.map((t=>e[t])))))),S=function(e,t){let n=e[0].beams.length;e.forEach((e=>{e.beams.length<n&&(n=e.beams.length)}));const r=[];for(let o=0;o<n;o++){let n="";for(let r=0;r<e.length;r++){n=`${n}${`${t[r].prefix}`}${e[r].beams[o].sentences[0].text}`}r.push(n)}return r}(m,u),T=b.map((e=>e.map((e=>e.join("")))));try{r===iv.WRITE?by(M.GET_ALTERNATIVES_FOR_INPUT,{lang:i,sourceLength:n.reduce(((e,t)=>e+t.length),0),targetLength:v.flat().reduce(((e,t)=>e+t.length),0),nicheIntegration:R.default,style:e.payload.style}):Em({installationId:t.installationId,trigger:l.input_alternatives,websiteLanguage:i,targetLanguage:o,characterCount:n.reduce(((e,t)=>e+t.length),0),domainName:e.payload.domainName,nicheIntegration:R.default,...h&&{glossaryTrackingInfo:{isGlossaryEnabled:!!p,isGlossaryShared:f,didGlossaryChangeTranslation:g}}})}catch(e){console.error(e)}return{detected_source_language:i,processedText:v[0].join(""),textLinesComponents:c,alternatives:S,alternativeComponents:T}}const Zb=async e=>{if(zy(e)&&e.activeTermbaseId&&e.isGlossaryEnabled&&e.mode!==iv.WRITE){const[t]=await Dv(),n=gv(e.activeTermbaseId,t);if(n)for(let t of n.termDictionaries)if(t.languagePair===`${e.sourceLang.substr(0,2)}>${e.targetLang.substr(0,2)}`.toLowerCase())return{id:n.id,dictionaryId:t.id}}},Qb={syncExperiments:"sync_experiments",syncClientState:"sync_client_state"};function eS(e){let t;try{t=new URL(e)}catch(e){return!1}return"http:"===t.protocol||"https:"===t.protocol}const tS={developer_tools:"DEVELOPER_TOOLS",settings_page:"SETTINGS_PAGE",settings_writing:"SETTINGS_WRITING",settings_reading:"SETTINGS_READING",settings_customizations:"SETTINGS_CUSTOMIZATIONS",settings_glossary:"SETTINGS_GLOSSARY",onboarding:"ONBOARDING",onboarding_after_successful_login:"ONBOARDING_AFTER_SUCCESSFUL_LOGIN",firefox_first_run:"FIREFOX_FIRST_RUN",privacy_policy:"PRIVACY_POLICY",create_account:"CREATE_ACCOUNT"},nS={DEVELOPER_TOOLS:"dev-page.html",SETTINGS_PAGE:"settings.html",SETTINGS_READING:"settings.html#inline-translation",SETTINGS_WRITING:"settings.html#input-translation",SETTINGS_CUSTOMIZATIONS:"settings.html#customizations",SETTINGS_GLOSSARY:"settings.html#glossary",ONBOARDING:"onboarding.html",ONBOARDING_FIREFOX:"onboarding-firefox.html",ONBOARDING_AFTER_SUCCESSFUL_LOGIN:"onboarding.html#successful_login",FIREFOX_FIRST_RUN:"firefox-first-run.html",PRIVACY_POLICY:"privacy-policy.html",CREATE_ACCOUNT:"create-account.html"};function rS({payload:e}){const{destination:t,openInSameTab:n}=e;if(void 0===t)return;let r="";switch(t){case tS.developer_tools:r=oS(nS.DEVELOPER_TOOLS);break;case tS.settings_page:r=oS(nS.SETTINGS_PAGE);break;case tS.settings_writing:r=oS(nS.SETTINGS_WRITING);break;case tS.settings_reading:r=oS(nS.SETTINGS_READING);break;case tS.settings_customizations:r=oS(nS.SETTINGS_CUSTOMIZATIONS);break;case tS.settings_glossary:r=oS(nS.SETTINGS_GLOSSARY);break;case tS.onboarding:r=K()?oS(nS.ONBOARDING_FIREFOX):oS(nS.ONBOARDING);break;case tS.onboarding_after_successful_login:r=oS(nS.ONBOARDING_AFTER_SUCCESSFUL_LOGIN);break;case tS.firefox_first_run:r=oS(nS.FIREFOX_FIRST_RUN);break;case tS.privacy_policy:r=oS(nS.PRIVACY_POLICY);break;case tS.create_account:r=oS(nS.CREATE_ACCOUNT)}r&&(n?chrome.tabs.query({active:!0,currentWindow:!0},(function(e){const t=e[0];chrome.tabs.update(t.id,{url:r})})):chrome.tabs.create({url:r,active:!0}))}function oS(e){return chrome.runtime.getURL(e)}function sS(e,t,n){switch(Ig()&&console.log(t.tab?`message from a content script: ${t.tab.url} with tab id: ${t.tab.id}. action: ${e.action}`:`message from the extension with action: ${e.action}`),e.action){case"dlRequestHtmlTranslation":vv(e).then((e=>n(e))).catch((e=>{n(Vg(e,mg))}));break;case"dlRequestInlineTranslation":bv(e).then((e=>{n(e)})).catch((e=>{n(Vg(e,mg))}));break;case"dlTriggerTranslateInline":_v(t.tab.id);break;case"dlRequestInputTranslation":Sv(e).then((e=>n(e))).catch((e=>{n(Vg(e,mg))}));break;case"dlRequestZendeskInputTranslation":Tv(e).then((e=>n(e))).catch((e=>{n(Vg(e,mg))}));break;case"dlRequestGmailReceivedEmailTranslation":Ev(e).then((e=>n(e))).catch((e=>{n(Vg(e,mg))}));break;case"dlRequestWhatsAppMessageTranslation":kv(e).then((e=>n(e))).catch((e=>{n(Vg(e,mg))}));break;case"dlRequestTwitterTweetTranslation":wv(e).then((e=>n(e))).catch((e=>{n(Vg(e,mg))}));break;case"dlRequestLinkedInPostTranslation":Iv(e).then((e=>n(e))).catch((e=>{n(Vg(e,mg))}));break;case"dlRequestZendeskMessageTranslation":Nv(e).then((e=>n(e))).catch((e=>{n(Vg(e,mg))}));break;case"dlRequestWhatsAppMessagesTranslation":Cv(e).then((e=>n(e))).catch((e=>{n(Vg(e,mg))}));break;case"dlRequestGDocsSplitText":Rv(e).then((e=>n(e))).catch((e=>{n(Vg(e,mg))}));break;case"dlRequestGDocsProcessContent":xv(e).then((e=>n(e))).catch((e=>{n(Vg(e,mg))}));break;case"dlRequestGDocsSentenceAlternatives":Av(e).then((e=>n(e))).catch((e=>{n(Vg(e,mg))}));break;case"dlRequestGDocsWordAlternatives":Lv(e).then((e=>n(e))).catch((e=>{n(Vg(e,mg))}));break;case"dlRequestGDocsSentenceFromPartialTranslation":Ov(e).then((e=>n(e))).catch((e=>{n(Vg(e,mg))}));break;case"dlRequestTermbases":Dv().then((e=>n(e))).catch((e=>{n(Vg(e,mg))}));break;case"dlTrackDetectLanguage":Pv(e),n();break;case"dlRequestLogin":nb().then((()=>n(!0))).catch((e=>{n(Vg(e,mg))}));break;case"dlRequestLogout":rb().then((()=>n(!0))).catch((e=>{n(Vg(e,mg))}));break;case"dlGetAppSettings":chrome.storage.sync.get(null,(function(e){n(e)}));break;case"dlUpdateAppSettings":chrome.storage.sync.set(e.payload,(function(){n(e.payload)}));break;case"dlTranslatedInputTextNotSet":km({errorCode:Lg,errorMessage:"The translated text could not be set",domainName:e.payload}),n();break;case"dlGetUserState":ob().then((e=>n(e))).catch((e=>{n(Vg(e,mg))}));break;case"dlExternalURLRedirect":Q(e.payload),n();break;case"dlOpenInternalPage":rS(e),n();break;case"dlTrackInputTranslationInjection":Mv(e.payload),n();break;case"dlTrackExtensionOpenedEvent":Fv(e.payload),n();break;case"dlTrackLogoClickedEvent":Uv(e.payload),n();break;case"dlTrackDocTransClick":jv(),n();break;case"dlTrackRecommendToAFriendClick":Bv(),n();break;case"dlSendNotification":sb(e.payload),n();break;case"dlCheckCommandShortcuts":ab().then((e=>n(e)));break;case"dlTrackUseOfShortcut":ib(e.payload),n();break;case"dlTrackUiAction":cb(e.payload),n();break;case"dlTrackInlineSettingOpened":$v(e.payload),n();break;case"dlTrackSettingChanged":Gv(e.payload),n();break;case"dlTrackUILocationClicked":xb(e.payload),n();break;case"dlTrackRightClick":Wv(e.payload),n();break;case"dlTrackInlinePositionChange":qv(e.payload),n();break;case"dlTrackInlineDragStart":Hv(),n();break;case"dlTrackFptHide":Vv(e.payload);break;case"dlTrackInlineCopy":Yv(e.payload),n();break;case"dlTrackInlineListen":Xv(e.payload),n();break;case"dlTrackIconHover":zv(e.payload),n();break;case"dlTrackVoiceOverStops":Jv(e.payload),n();break;case"dlTrackOnboardingStepChange":Kv(e.payload),n();break;case"dlTrackOnboardingOpenExternalLink":Zv(e.payload),n();break;case"dlTrackReadMore":Qv(e.payload),n();break;case"dlTrackLandingOnWebsite":ub(e.payload),n();break;case"dlTrackGDocsReplaceText":eb(e.payload),n();break;case"dlGetExperiments":tb(e.payload?.forceFetch).then((e=>n(e))).catch((e=>n(e)));break;case"dlGetClientState":Ub(e.payload?.forceFetch).then((e=>n(e))).catch((e=>n(e)));break;case"dlTextToSpeech":hb(e.payload,t.tab.id).then((()=>n())).catch((e=>{n(Vg(e,mg))}));break;case"dlGetDictionary":bb(e.payload).then((e=>n(e))).catch((e=>{n(Vg(e,mg))}));break;case"dlGetSupportedVoices":fb(e.payload).then((e=>n(e))).catch((e=>{n(Vg(e,mg))}));break;case"dlStopSpeech":gb(e.payload).then((()=>n())).catch((e=>{n(Vg(e,mg))}));break;case"dlTrackOpenInputHighlighter":mb(e.payload).then((()=>n())).catch((e=>{n(Vg(e,mg))}));break;case"dlTrackOpenInlineHighlighter":yb(e.payload).then((()=>n())).catch((e=>{n(Vg(e,mg))}));break;case"dlTrackCloseInputHighlighter":_b(e.payload).then((()=>n())).catch((e=>{n(Vg(e,mg))}));break;case"dlTrackCloseInlineHighlighter":vb(e.payload).then((()=>n())).catch((e=>{n(Vg(e,mg))}));break;case"dlTrackDictionaryStatus":Sb(e.payload).then((()=>n())).catch((e=>{n(Vg(e,mg))}));break;case"dlTrackOpenDictionarySection":Tb(e.payload).then((()=>n())).catch((e=>{n(Vg(e,mg))}));break;case"dlTrackDisabledDictionaryHover":Eb(e.payload).then((()=>n())).catch((e=>{n(Vg(e,mg))}));break;case"dlTrackZendeskCustomizationEvent":wb(e.payload).then((()=>n())).catch((e=>{n(Vg(e,mg))}));break;case"dlTrackZendeskGlossaryOpened":Gb(e.payload).then((()=>n())).catch((e=>{n(Vg(e,mg))}));break;case"dlTrackGlossaryEnabled":Wb(e.payload).then((()=>n())).catch((e=>{n(Vg(e,mg))}));break;case"dlTrackGlossaryDisabled":qb(e.payload).then((()=>n())).catch((e=>{n(Vg(e,mg))}));break;case"dlTrackDeeplWriteEvent":Ab(e.payload).then((()=>n())).catch((e=>{n(Vg(e,mg))}));break;case"dlTrackLingueeErrorData":Ib(e.payload).then((()=>n())).catch((e=>{n(Vg(e,mg))}));break;case"dlTrackGdocsMaxCharExceededShown":kb(e.payload).then((()=>n())).catch((e=>{n(Vg(e,mg))}));break;case"dlTrackGDocsMaxCharExceededTryProClicked":Cb(e.payload).then((()=>n())).catch((e=>{n(Vg(e,mg))}));break;case"dlTrackOnboardingModalShown":Rb(e.payload).then((()=>n())).catch((e=>{n(Vg(e,mg))}));break;case"dlRequestImproveWriting":Lb(e).then((e=>n(e))).catch((e=>{n(Vg(e,mg))}));break;case"dlSplitTextRequest":Xb(e).then((e=>n(e))).catch((e=>{n(Vg(e))}));break;case"dlRequestAlternatives":Jb(e).then((e=>n(e))).catch((e=>{n(Vg(e))}));break;case"dlTrackTranslateAcceptOrRevertEvent":Ob(e.payload).then((()=>n())).catch((e=>{n(Vg(e,mg))}));break;case"dlTrackCustomizationEnabledEvent":Nb(e.payload).then((()=>n())).catch((e=>{n(Vg(e,mg))}));break;case"dlTrackGmailCharLimitReached":Pb(e.payload).then((()=>n())).catch((e=>{n(Vg(e,mg))}));break;case"dlGetUsersCharacterLimit":jb().then((e=>n(e))).catch((e=>{n(Vg(e,mg))}));break;case"dlTrackAlternativesEvent":Fb(e.payload).then((()=>n())).catch((e=>{n(Vg(e,mg))}));break;case"dlTestClassicAPI":Vb(e.payload).then((e=>n(e))).catch((e=>{n(Vg(e,mg))}));break;case"dlOnSuccessfulZendeskTranslation":db();break;case"dlTrackUpgradeNotificationIsDisplayed":Bb(e.payload.type);break;case"dlTrackUpgradeNotificationClosed":$b(e.payload.type);break;case"dlTrackUpgradeNotificationAction":Hb(e.payload.type,e.payload.cta);break;case"dlTrackLanguageDetectionForTextProcessing":zb(e.payload).finally(n());break;case"dlTrackSeeAlternativesClicked":Yb(),n();break;case"dlTrackAlternativeSelected":Kb(e.payload),n()}return!0}function aS(e){switch(console.log(`Command "${e}" triggered`),e){case _.triggerTranslation:chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.tabs.sendMessage(e[0].id,{action:"dlTriggerTranslationShortcut"})}));break;case _.changeLanguage:chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.tabs.sendMessage(e[0].id,{action:"dlChangeLanguageShortcut"})}))}}function iS(e){(async function(){let e=!1;const t=await chrome.storage.sync.get(null),n=Tg();if(!t||!t.settingSchemeVersion||t.settingSchemeVersion<n.settingSchemeVersion){let r={};for(const[o,s]of Object.entries(n))o in t&&"settingSchemeVersion"!==o?r[o]=t[o]:("installationId"===o&&(e=!0),r[o]=s);await chrome.storage.sync.clear(),await chrome.storage.sync.set(r),console.log("settings set: ",r)}return{installationIdWasSet:e}})().then((t=>{!async function(e,t){const n=await u_();n||e!==chrome.runtime.OnInstalledReason.INSTALL?n||await l_():(await l_(),ny(),vy());t&&_y()}(e.reason,t.installationIdWasSet)})).catch((e=>wm({errorCode:Ag,errorMessage:`setSettingsAfterInstall failed: ${e.message}`}))).finally((()=>{try{tb(),Ub(!0),async function(){await chrome.alarms.clearAll(),await chrome.alarms.create(Qb.syncExperiments,{delayInMinutes:10,periodInMinutes:10}),await chrome.alarms.create(Qb.syncClientState,{delayInMinutes:30,periodInMinutes:30})}()}catch(e){console.error(e),wm({errorCode:Ag,errorMessage:e.message})}try{chrome.runtime.setUninstallURL("https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU"),e.reason===chrome.runtime.OnInstalledReason.UPDATE&&console.log(`Update from version ${e.previousVersion} to ${chrome.runtime.getManifest().version} was completed`),e.reason===chrome.runtime.OnInstalledReason.INSTALL&&wg()!==Eg.test&&(K()?rS({payload:{destination:tS.firefox_first_run}}):rS({payload:{destination:tS.create_account}})),chrome.contextMenus.removeAll((function(){chrome.contextMenus.create({id:"dlTranslateWithDeepL",title:chrome.i18n.getMessage("right_click_menu_translate_with_deepl"),contexts:["all"]})})),chrome.tabs.query({},(function(e){for(const t of e)eS(t)&&chrome.scripting.executeScript({target:{tabId:t},files:["build/content.js"]})}))}catch(e){wm({errorCode:Ag,errorMessage:e.message})}}))}function cS(e){switch(e.name){case Qb.syncExperiments:tb();break;case Qb.syncClientState:Ub()}}function lS(e){if("dlTranslateWithDeepL"===e.menuItemId)lb(!1)}function uS(){}const dS={setBrowserExtensionUserAgent:{type:"modifyHeaders",requestHeaders:[{header:"user-agent",operation:"set",value:`DeepLBrowserExtension/1.22.2 ${navigator.userAgent} `}]}},pS={lingueeDomainFilter:{excludedDomains:["linguee.com"],urlFilter:"*://www-app.linguee.com*",resourceTypes:["xmlhttprequest"]},deeplToolingApiDomainFilter:{excludedDomains:["deepl.com"],urlFilter:"*://*.deepl.com/jsonrpc?client=chrome-extension,*",resourceTypes:["xmlhttprequest"]},deeplStatisticsDomainFilter:{excludedDomains:["deepl.com"],urlFilter:"*://s.deepl.*/chrome/statistics*",resourceTypes:["xmlhttprequest"]}};function hS(){if(chrome.declarativeNetRequest)chrome.declarativeNetRequest.updateDynamicRules({removeRuleIds:[2,3,4],addRules:[{id:2,priority:1,action:dS.setBrowserExtensionUserAgent,condition:pS.lingueeDomainFilter},{id:3,priority:1,action:dS.setBrowserExtensionUserAgent,condition:pS.deeplToolingApiDomainFilter},{id:4,priority:1,action:dS.setBrowserExtensionUserAgent,condition:pS.deeplStatisticsDomainFilter}]},(async e=>{Ig()&&await console.log("created",e)}));else if(chrome.webRequest?.onBeforeSendHeaders){const e=Ig()?"https://test.deepl.com/":"https://www.deepl.com/";browser.webRequest.onBeforeSendHeaders.addListener((t=>{const n=t.requestHeaders;return n.push({name:"Referer",value:e}),{requestHeaders:n}}),{urls:["*://*.deepl.com/jsonrpc?client=chrome-extension,*"]},["requestHeaders","blocking"]),browser.webRequest.onBeforeSendHeaders.addListener((function(e){for(const t of e.requestHeaders)if("User-Agent"===t.name){t.value=`DeepLBrowserExtension/1.22.2 ${navigator.userAgent}`;break}return{requestHeaders:e.requestHeaders}}),{urls:["*://www-app.linguee.com/*","*://*.deepl.com/jsonrpc?client=chrome-extension,*","https://s.deepl.com/chrome/statistics"]},["blocking","requestHeaders"])}}return console.info("Sentry initialised"),zc({...kg}),kr("appContext",{location:"background"}),hS(),chrome.runtime.onInstalled.addListener(iS),chrome.contextMenus.onClicked.addListener(lS),chrome.tabs.onActivated.addListener((async function(e){eS((await chrome.tabs.get(e.tabId)).url)&&chrome.tabs.sendMessage(e.tabId,{action:"dlTabChanged"}),chrome.tabs.query({},(function(t){for(var n=0;n<t.length;++n)chrome.tabs.sendMessage(t[n].id,{action:"dlChangeActiveTabStatus",payload:{isActive:t[n].id===e.tabId}})})),Ub()})),chrome.runtime.onConnect.addListener((e=>{Ig()&&console.log(`port connected to tab with id: ${e.sender.tab.id}`)})),chrome.runtime.onMessage.addListener(sS),chrome.storage.onChanged.addListener(uS),chrome.commands.onCommand.addListener(aS),chrome.alarms.onAlarm.addListener(cS),chrome.runtime.onMessage.addListener((e=>{"reload"===e&&chrome.tabs.query({active:!0}).then((()=>{chrome.runtime.reload(),chrome.tabs.reload()}))})),e.CONTENT_PROCESS_MODE=iv,e.INTERNAL_PAGE_KEYS=tS,e.PERODIC_CODE_EXECUTION_NAMES=Qb,e.URL_ACTIONS=X,e.URL_LIST=J,e.cacheClientState=$y,e.cacheExperiments=Wy,e.checkCommandShortcuts=ab,e.checkLimits=fv,e.clearLoginTimestamp=s_,e.commandListener=aS,e.connectDatabase=Uy,e.deleteAuthTokens=Zy,e.fetchClientState=A_,e.fetchExperiments=y_,e.fetchGDocsSentenceAlternatives=Av,e.fetchGDocsWordAlternatives=Lv,e.fetchTermbases=Dv,e.getAccountID=d_,e.getActiveTermbase=Zb,e.getAllServiceLevels=m_,e.getAuthTokens=e_,e.getBrowserInstanceId=u_,e.getCachedClientState=Gy,e.getCachedExperiments=Hy,e.getCharacterLimit=f_,e.getClientState=Ub,e.getCurrentExperiments=qy,e.getDapAlternativesSegmentationType=bm,e.getDapApiConfig=zg,e.getDapApiExtensionOpenedFromId=Xg,e.getDapApiInlinePositionType=om,e.getDapApiLingueeError=Kg,e.getDapApiLogoClickedFromId=Jg,e.getDapApiNotificationType=Zg,e.getDapApiSettingType=rm,e.getDapApiShortcutTypes=em,e.getDapApiTranslationTriggerId=Yg,e.getDapApiUiActionEventId=tm,e.getDapApiUiFunctionality=nm,e.getDapApiUiLocation=Qg,e.getDapContentProcessingModeType=_m,e.getDapGmailActionType=mm,e.getDapLogoutTrigger=pm,e.getDapNicheIntegration=lm,e.getDapOnboardingExternalLink=sm,e.getDapOnboardingStepChangeTrigger=am,e.getDapOriginStore=im,e.getDapServiceLevel=gm,e.getDapSessionType=Sm,e.getDapSessionTypeTrigger=hm,e.getDapUpgradeNotificationAction=vm,e.getDapUpgradeNotificationType=ym,e.getDapWhatsAppTranslator=fm,e.getDictionary=bb,e.getExperiments=tb,e.getExperimentsData=p_,e.getExternalUrl=Z,e.getInstallationId=r_,e.getSecondsSinceLastLogin=a_,e.getSessionType=n_,e.getSettings=Yy,e.getSupportedVoices=fb,e.getTermbases=dv,e.getUserInfo=c_,e.getUserState=ob,e.getUserType=h_,e.getUsersCharacterLimit=jb,e.getWebsiteIdFromWebsite=cm,e.getWriteStyle=um,e.handleJobs=uv,e.handleSuccessfulGmailTranslationsCount=Db,e.handleSuccessfulGslidesTranslationsCount=Mb,e.handleSuccessfulZendeskTranslationsCount=db,e.improveWriting=Lb,e.isPayloadNecessaryForUIEvent=dm,e.isProServiceLevel=g_,e.isUserLoggedIn=t_,e.jsonrpc_callFunction=D_,e.jsonrpc_composeMethodCallDict=x_,e.listenToPerodicCodeExecution=cS,e.login=L_,e.loginRequest=nb,e.logout=O_,e.logoutRequest=rb,e.markLoginTimestamp=o_,e.messageListener=sS,e.onContextMenuClicked=lS,e.onInstalled=iS,e.onStorageChanged=uS,e.openInternalPage=rS,e.performGDocsProcessContent=xv,e.performGDocsSplitText=Rv,e.processContent=cv,e.readData=By,e.rebuildGDocsSentenceFromPartialTranslation=Ov,e.redirectToExternalURL=Q,e.requestAlternatives=Jb,e.requestDictionary=F_,e.resetGlossary=Qy,e.sendDAPAlternativeSelected=Dy,e.sendDAPAlternativesEvent=Ay,e.sendDAPBrowserInstanceIdCreated=vy,e.sendDAPCloseInlineHighlighter=oy,e.sendDAPCloseInputHighlighter=ey,e.sendDAPContentScriptErrorData=km,e.sendDAPCustomizationEnabled=Iy,e.sendDAPDeeplWriteEvent=by,e.sendDAPDetectLanguage=Fm,e.sendDAPDictionaryStatus=sy,e.sendDAPDisabledDictionaryHover=iy,e.sendDAPDocTransClick=Nm,e.sendDAPErrorData=wm,e.sendDAPExtensionOpened=Rm,e.sendDAPFPTHide=qm,e.sendDAPFTPBlockSizeExceeded=async function(e){return Tm((t=>({...t,eventId:60006,fptBlockSizeExceededData:{translationData:{sourceLang:e.websiteLanguage,targetLang:e.targetLanguage,sourceLength:e.characterCount},domainName:e.domainName}})))},e.sendDAPGDocsMaxCharExceededShown=hy,e.sendDAPGDocsMaxCharExceededTryProClicked=fy,e.sendDAPGDocsReplaceText=ty,e.sendDAPGlossaryEnabledOrDisabled=Ly,e.sendDAPGmailCharLimitReached=ky,e.sendDAPIconHover=zm,e.sendDAPInlineCopy=Hm,e.sendDAPInlineDragStart=Bm,e.sendDAPInlineListen=Vm,e.sendDAPInlinePositionChange=jm,e.sendDAPInlineSettingOpened=Pm,e.sendDAPInputTranslationInjection=Cm,e.sendDAPInstallSuccess=ny,e.sendDAPInstallationIdCreated=_y,e.sendDAPLandingOnSpecificWebsite=Jm,e.sendDAPLingueeErrorData=cy,e.sendDAPLoggedIn=Ty,e.sendDAPLoggedOut=Ey,e.sendDAPLogin=dy,e.sendDAPLogoClicked=xm,e.sendDAPLogout=py,e.sendDAPNotificationViewed=Am,e.sendDAPOnboardingModalShown=my,e.sendDAPOnboardingOpenExternalPage=Km,e.sendDAPOnboardingStepChange=Ym,e.sendDAPOpenDictionarySection=ay,e.sendDAPOpenInlineHighlighter=ry,e.sendDAPOpenInputHighlighter=Qm,e.sendDAPReadMoreClicked=Xm,e.sendDAPRecommendToAFriendClick=Dm,e.sendDAPRightClick=Um,e.sendDAPSeeAlternativesClicked=Ny,e.sendDAPSessionStarted=Sy,e.sendDAPSettingsChanged=Mm,e.sendDAPShortcutUsed=Lm,e.sendDAPTrackLanguageDetectionForTextProcessing=Oy,e.sendDAPTrackUpgradeNotificationAction=xy,e.sendDAPTrackUpgradeNotificationClosed=Ry,e.sendDAPTrackUpgradeNotificationDisplayed=Cy,e.sendDAPTranslateAcceptOrUndoEvent=wy,e.sendDAPTranslationErrorData=Im,e.sendDAPTranslationRequest=Em,e.sendDAPTwitterTweetTranslationFailed=Wm,e.sendDAPUILocationClicked=yy,e.sendDAPUiAction=Om,e.sendDAPVoiceOverStops=Zm,e.sendDAPWhatsAppMessageTranslated=$m,e.sendDAPWhatsAppMessageTranslationFailed=Gm,e.sendDAPZendeskCustomizationEvent=ly,e.sendDAPZendeskGlossaryConfigOpened=uy,e.sendDAPtrackSessionType=gy,e.sendNotification=sb,e.setAuthTokens=Jy,e.setBrowserInstanceId=l_,e.setUserInfoFromClientState=i_,e.simpleTextProcessor=yv,e.splitText=lv,e.splitTextRequest=Xb,e.stopSpeech=gb,e.testClassicApi=Vb,e.textToSpeech=hb,e.trackAlternativeSelected=Kb,e.trackAlternativesEvent=Fb,e.trackCloseInlineHighlighter=vb,e.trackCloseInputHighlighter=_b,e.trackCustomizationEnabled=Nb,e.trackDeeplWriteEvent=Ab,e.trackDetectLanguage=Pv,e.trackDictionaryStatus=Sb,e.trackDisabledDictionaryHover=Eb,e.trackDocTransClick=jv,e.trackExtensionOpenedEvent=Fv,e.trackFptHide=Vv,e.trackGDocsMaxCharExceededTryProClicked=Cb,e.trackGDocsReplaceText=eb,e.trackGdocsMaxCharExceededShown=kb,e.trackGlossaryDisabled=qb,e.trackGlossaryEnabled=Wb,e.trackGmailCharLimitReached=Pb,e.trackIconHover=zv,e.trackInlineCopy=Yv,e.trackInlineDragStart=Hv,e.trackInlineListen=Xv,e.trackInlinePositionChange=qv,e.trackInlineSettingsOpened=$v,e.trackInputTranslationInjection=Mv,e.trackLandingOnWebsite=ub,e.trackLanguageDetectionForTextProcessing=zb,e.trackLingueeErrorData=Ib,e.trackLogoClickedEvent=Uv,e.trackOnboardingModalShown=Rb,e.trackOnboardingOpenExternalLink=Zv,e.trackOnboardingStepChange=Kv,e.trackOpenDictionarySection=Tb,e.trackOpenInlineHighlighter=yb,e.trackOpenInputHighlighter=mb,e.trackReadMoreClick=Qv,e.trackRecommendToAFriendClick=Bv,e.trackRightClick=Wv,e.trackSeeAlternativesClicked=Yb,e.trackSettingChanged=Gv,e.trackTranslateAcceptOrUndoEvent=Ob,e.trackUILocationClicked=xb,e.trackUiAction=cb,e.trackUpgradeNotificationAction=Hb,e.trackUpgradeNotificationClosed=$b,e.trackUpgradeNotificationDisplayed=Bb,e.trackUseOfShortcut=ib,e.trackVoiceOverStops=Jv,e.trackZendeskCustomizationEvent=wb,e.trackZendeskGlossaryOpened=Gb,e.translate=P_,e.translateGmailReceivedEmail=Ev,e.translateHtmlRequest=vv,e.translateInlineRequest=bv,e.translateInputRequest=Sv,e.translateLinkedInPostRequest=Iv,e.translateSelection=lb,e.translateTwitterTweetRequest=wv,e.translateWhatsAppMessageRequest=kv,e.translateWhatsAppMessagesRequest=Cv,e.translateZendeskInputRequest=Tv,e.translateZendeskMessageRequest=Nv,e.triggerTranslateInline=_v,e.updateDynamicRules=hS,e.updateSession=Xy,e.writeData=jy,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
//# sourceMappingURL=background.js.map
